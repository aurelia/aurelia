(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@aurelia/kernel"),require("@aurelia/runtime")):"function"==typeof define&&define.amd?define(["exports","@aurelia/kernel","@aurelia/runtime"],t):t((e=e||self).debug={},e.kernel,e.runtime)})(this,function(e,kernel,t){"use strict";function s(e){return u[e]||(function(e){return{type:0,message:`Attempted to report with unknown code ${e}.`}})(e)}function i(e,s=0){return e.t.length>s?(function(e){const s=[];return e&t.LifecycleFlags.s&&s.push("mustEvaluate"),e&t.LifecycleFlags.i&&s.push("isCollectionMutation"),e&t.LifecycleFlags.o&&s.push("isInstanceMutation"),e&t.LifecycleFlags.l&&s.push("updateTargetObserver"),e&t.LifecycleFlags.h&&s.push("updateTargetInstance"),e&t.LifecycleFlags.p&&s.push("updateSourceExpression"),e&t.LifecycleFlags.u&&s.push("fromAsyncFlush"),e&t.LifecycleFlags.m&&s.push("fromSyncFlush"),e&t.LifecycleFlags.g&&s.push("fromStartTask"),e&t.LifecycleFlags.v&&s.push("fromStopTask"),e&t.LifecycleFlags.$&&s.push("fromBind"),e&t.LifecycleFlags.O&&s.push("fromUnbind"),e&t.LifecycleFlags.S&&s.push("fromAttach"),e&t.LifecycleFlags.k&&s.push("fromDetach"),e&t.LifecycleFlags.T&&s.push("fromCache"),e&t.LifecycleFlags.j&&s.push("fromDOMEvent"),e&t.LifecycleFlags.C&&s.push("fromObserverSetter"),e&t.LifecycleFlags.A&&s.push("fromBindableHandler"),e&t.LifecycleFlags.I&&s.push("fromLifecycleTask"),e&t.LifecycleFlags.L&&s.push("parentUnmountQueued"),e&t.LifecycleFlags.B&&s.push("doNotUpdateDOM"),e&t.LifecycleFlags.P&&s.push("isTraversingParentScope"),e&t.LifecycleFlags.M&&s.push("allowParentScopeTraversal"),e&t.LifecycleFlags.U&&s.push("getterSetterStrategy"),e&t.LifecycleFlags.D&&s.push("proxyStrategy"),e&t.LifecycleFlags.q&&s.push("keyedStrategy"),e&t.LifecycleFlags.N&&s.push("patchStrategy"),0===s.length?"none":s.join("|")})(e.t[s]):"none"}function n(e){return void 0===e?"undefined":null===e?"null":void 0!==e.constructor?e.constructor.description?`Resource{'${e.constructor.description.name}'}`:e.constructor.name:"string"==typeof e?`'${e}'`:f.call(e)}function r(e,t=0){return e.t.length>t?n(e.t[t]):"undefined"}function a(e,t=0){let s;if(e.t.length>t){const $scope=e.t[t];return`Scope{${s=$scope&&$scope.F?n($scope.F):"undefined"}}`}return"undefined"}function o(e,t=0){if(e.t.length>t){const s=e.t[t];return"string"==typeof s?`'${s}'`:s&&Reflect.has(s,"friendlyName")?s.V:n(s)}return"undefined"}function c(e,t=0){if(e.t.length>t){const s=e.t[t];return"string"==typeof s?`'${s}'`:""+s}return"undefined"}const l=[{type:t.AccessKeyed,name:"AccessKeyed"},{type:t.AccessMember,name:"AccessMember"},{type:t.AccessScope,name:"AccessScope"},{type:t.AccessThis,name:"AccessThis"},{type:t.ArrayBindingPattern,name:"ArrayBindingPattern"},{type:t.ArrayLiteral,name:"ArrayLiteral"},{type:t.Assign,name:"Assign"},{type:t.Binary,name:"Binary"},{type:t.BindingBehavior,name:"BindingBehavior"},{type:t.BindingIdentifier,name:"BindingIdentifier"},{type:t.CallFunction,name:"CallFunction"},{type:t.CallMember,name:"CallMember"},{type:t.CallScope,name:"CallScope"},{type:t.Conditional,name:"Conditional"},{type:t.ForOfStatement,name:"ForOfStatement"},{type:t.HtmlLiteral,name:"HtmlLiteral"},{type:t.Interpolation,name:"Interpolation"},{type:t.ObjectBindingPattern,name:"ObjectBindingPattern"},{type:t.ObjectLiteral,name:"ObjectLiteral"},{type:t.PrimitiveLiteral,name:"PrimitiveLiteral"},{type:t.TaggedTemplate,name:"TaggedTemplate"},{type:t.Template,name:"Template"},{type:t.Unary,name:"Unary"},{type:t.ValueConverter,name:"ValueConverter"}];class h{constructor(){this.text=""}static H(e){const t=new h;return e.accept(t),t.text}R(e){e.object.accept(this),this.text+=`.${e.name}`}Y(e){e.object.accept(this),this.text+="[",e.key.accept(this),this.text+="]"}J(e){if(0===e.K)return void(this.text+="$this");this.text+="$parent";let t=e.K-1;for(;t--;)this.text+=".$parent"}_(e){let t=e.K;for(;t--;)this.text+="$parent.";this.text+=e.name}W(e){const t=e.elements;this.text+="[";for(let e=0,s=t.length;s>e;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+="]"}G(e){const t=e.keys,s=e.values;this.text+="{";for(let e=0,i=t.length;i>e;++e)0!==e&&(this.text+=","),this.text+=`'${t[e]}':`,s[e].accept(this);this.text+="}"}X(e){if(this.text+="(","string"==typeof e.value){const t=e.value.replace(/'/g,"\\'");this.text+=`'${t}'`}else this.text+=`${e.value}`;this.text+=")"}Z(e){this.text+="(",e.ee.accept(this),this.te(e.se),this.text+=")"}ie(e){this.text+="(",e.object.accept(this),this.text+=`.${e.name}`,this.te(e.se),this.text+=")"}ne(e){this.text+="(";let t=e.K;for(;t--;)this.text+="$parent.";this.text+=e.name,this.te(e.se),this.text+=")"}re(e){const{ae:t,oe:s}=e,i=s.length;this.text+="`",this.text+=t[0];for(let e=0;i>e;e++)s[e].accept(this),this.text+=t[e+1];this.text+="`"}ce(e){const{ae:t,oe:s}=e,i=s.length;e.ee.accept(this),this.text+="`",this.text+=t[0];for(let e=0;i>e;e++)s[e].accept(this),this.text+=t[e+1];this.text+="`"}le(e){this.text+=`(${e.he}`,97>e.he.charCodeAt(0)||(this.text+=" "),e.pe.accept(this),this.text+=")"}ue(e){this.text+="(",e.left.accept(this),105===e.he.charCodeAt(0)?this.text+=` ${e.he} `:this.text+=e.he,e.right.accept(this),this.text+=")"}de(e){this.text+="(",e.me.accept(this),this.text+="?",e.ge.accept(this),this.text+=":",e.fe.accept(this),this.text+=")"}ye(e){this.text+="(",e.target.accept(this),this.text+="=",e.value.accept(this),this.text+=")"}be(e){const t=e.se;e.pe.accept(this),this.text+=`|${e.name}`;for(let e=0,s=t.length;s>e;++e)this.text+=":",t[e].accept(this)}ve(e){const t=e.se;e.pe.accept(this),this.text+=`&${e.name}`;for(let e=0,s=t.length;s>e;++e)this.text+=":",t[e].accept(this)}$e(e){const t=e.elements;this.text+="[";for(let e=0,s=t.length;s>e;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+="]"}we(e){const t=e.keys,s=e.values;this.text+="{";for(let e=0,i=t.length;i>e;++e)0!==e&&(this.text+=","),this.text+=`'${t[e]}':`,s[e].accept(this);this.text+="}"}Oe(e){this.text+=e.name}xe(e){throw Error("visitHtmlLiteral")}Se(e){e.ke.accept(this),this.text+=" of ",e.Te.accept(this)}je(e){const{parts,oe:t}=e,s=t.length;this.text+="${",this.text+=parts[0];for(let e=0;s>e;e++)t[e].accept(this),this.text+=parts[e+1];this.text+="}"}te(e){this.text+="(";for(let t=0,s=e.length;s>t;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+=")"}}var p;(function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.info=2]="info",e[e.debug=3]="debug"})(p||(p={}));const Reporter=Object.assign({},kernel.Reporter,{write(e,...t){switch(s(e).type){case 3:case 2:case 1:break;case 0:throw this.error(e,...t)}},error(e,...t){const i=s(e),n=Error(i.message);return n.data=t,n}}),u={0:{type:1,message:"Cannot add observers to object."},1:{type:1,message:"Cannot observe property of object."},2:{type:2,message:"Starting application in debug mode."},3:{type:0,message:"Runtime expression compilation is only available when including JIT support."},4:{type:0,message:"Invalid animation direction."},5:{type:0,message:"key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},6:{type:0,message:"Invalid resolver strategy specified."},7:{type:0,message:"Constructor Parameter with index cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},8:{type:0,message:"Self binding behavior only supports events."},9:{type:0,message:"The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">"},10:{type:0,message:"The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements."},11:{type:0,message:"Only property bindings and string interpolation bindings can be signaled. Trigger, delegate and call bindings cannot be signaled."},12:{type:0,message:"Signal name is required."},14:{type:0,message:"Property cannot be assigned."},15:{type:0,message:"Unexpected call context."},16:{type:0,message:"Only one child observer per content view is supported for the life of the content view."},17:{type:0,message:"You can only define one default implementation for an interface."},18:{type:0,message:"You cannot observe a setter only property."},19:{type:0,message:"Value for expression is non-repeatable."},20:{type:0,message:"No template compiler found with the specified name. JIT support or a custom compiler is required."},21:{type:0,message:"You cannot combine the containerless custom element option with Shadow DOM."},22:{type:0,message:"A containerless custom element cannot be the root component of an application."},30:{type:0,message:"There are more targets than there are target instructions."},31:{type:0,message:"There are more target instructions than there are targets."},100:{type:0,message:"Invalid start of expression."},101:{type:0,message:"Unconsumed token."},102:{type:0,message:"Double dot and spread operators are not supported."},103:{type:0,message:"Invalid member expression."},104:{type:0,message:"Unexpected end of expression."},105:{type:0,message:"Expected identifier."},106:{type:0,message:'Invalid BindingIdentifier at left hand side of "of".'},107:{type:0,message:"Invalid or unsupported property definition in object literal."},108:{type:0,message:"Unterminated quote in string literal."},109:{type:0,message:"Unterminated template string."},110:{type:0,message:"Missing expected token."},111:{type:0,message:"Unexpected character."},150:{type:0,message:"Left hand side of expression is not assignable."},151:{type:0,message:'Unexpected keyword "of"'},10000:{type:3,message:"%s"}},d={Ce:"marker",Ae:"noop",t:kernel.PLATFORM.Ie,Le:-1,Be:null,next:null};class m{constructor(e,t,s){this.Ce=e,this.Ae=t,this.Le=m.stack.length,this.t=s,this.next=d,this.Be=m.Pe,m.Pe.next=this,m.Pe=this,m.stack.push(this)}static reset(){let e=m.head,t=null;for(;null!==e;)t=e.next,e.next=null,e.Be=null,e.t=null,e=t;m.head=d,m.Pe=d,m.stack=[]}static Me(e,t,s){return new m(e,t,s)}static Ue(){return m.stack.pop()}}m.head=d,m.Pe=d,m.stack=[];const Tracer=Object.assign({},kernel.Tracer,{enabled:0,De:0,qe:null,Me(e,t,s){if(this.enabled){const i=m.Me(e,t,s);this.De&&this.qe.write(i)}},Ue(){this.enabled&&m.Ue()},Ne(e){let t=0;const s=m.stack,i=s.length;for(;i>t;)e.write(s[t]),++t},Ee(e){if(null!==e){let t=m.head.next;for(;null!==t&&t!==d;)e.write(t),t=t.next}m.reset()},Fe(e){this.De=1,this.qe=e&&"write"in e?e:(function(e){const t={};return e.Ve&&Object.assign(t,y),e.He&&Object.assign(t,b),e.Re&&Object.assign(t,v),e.Ye&&Object.assign(t,$),e.Je&&Object.assign(t,w),e.Ke&&Object.assign(t,O),e._e&&Object.assign(t,x),e.jit&&Object.assign(t,S),{write(e){let s;if(void 0!==t[e.Ae])s=t[e.Ae](e);else{if(void 0===t[e.Ce])return;s=t[e.Ce](e)}kernel.Reporter.write(1e4,`${"-".repeat(e.Le)}${e.Ce}.${e.Ae}(${s})`)}}})(e||g)},Qe(){this.De=0,this.qe=null}}),g=Object.freeze({Ve:1,He:1,Re:1,Ye:1,Je:1,Ke:1,_e:1,jit:1}),f={}.toString,y={We:e=>i(e),ze:e=>`${i(e)},IDOM,IRenderContext,${r(e,3)}`,addBinding:e=>`${r(e)},${r(e,1)}`,addComponent:e=>`${r(e)},${r(e,1)}`},b={Ge:e=>i(e),Xe:e=>i(e),connect:e=>i(e),constructor(e){switch(e.Ce){case"ArrayObserver":case"MapObserver":case"SetObserver":return i(e);case"SetterObserver":case"SelfObserver":return`${i(e)},${r(e,1)},${c(e,2)}`;case"ProxyObserver":return r(e);case"ProxySubscriberCollection":case"DirtyCheckProperty":return`${r(e,1)},${c(e,2)}`;case"PrimitiveObserver":case"PropertyAccessor":return`${r(e)},${c(e,1)}`;default:return""}},Ze:e=>i(e),et:e=>i(e),tt:e=>`${i(e)},${r(e,1)},${c(e,2)}`,BindingContext(e){switch(e.Ae){case"get":return`${a(e)},${c(e,1)},${c(e,2)},${i(e,3)}`;case"getObservers":return i(e)}},Scope(e){switch(e.Ae){case"create":return`${i(e)},${r(e,1)},${r(e,2)}`;case"fromOverride":return`${i(e)},${r(e,1)}`;case"fromParent":return`${i(e)},${a(e,1)},${r(e,2)}`}},OverrideContext(e){switch(e.Ae){case"create":return`${i(e)},${r(e,1)},${r(e,2)}`;case"getObservers":return""}}},v={st:e=>i(e),it(e){switch(e.Ce){case"Listener":return e.t[0].type;case"Call":const t=[];for(let s=0,i=e.t.length;i>s;++s)t.push(r(e,s));return t.join(",")}},nt(e){let t;const value=e.t[0];switch(typeof value){case"undefined":t="undefined";break;case"object":t=null===value?"null":n(value);break;case"string":t=`'${value}'`;break;case"number":t=""+value;break;default:t=n(value)}return`${t},${i(e,1)}`},flush:e=>i(e),rt:e=>`${c(e)},${c(e,1)},${i(e,2)}`,at:e=>a(e)},$={ot:e=>i(e),ct:e=>i(e),lt:e=>i(e),ht:e=>`Node{'${e.t[0].textContent}'}`,release:e=>i(e)},w={pt:e=>i(e),ut:e=>i(e),dt:e=>r(e),gt:e=>r(e)},O={construct:e=>r(e),ft(e){switch(e.Ae){case"get":case"getAll":return o(e);case"register":const t=[];for(let s=0,i=e.t.length;i>s;++s)t.push(o(e,s));return t.join(",");case"createChild":return""}}},x={yt(e){switch(e.Ae.slice(0,3)){case"beg":return"";case"enq":return r(e);case"end":case"pro":return i(e)}},CompositionCoordinator(e){switch(e.Ae){case"enqueue":return"IView";case"swap":return`IView,${i(e,1)}`;case"processNext":return""}},AggregateLifecycleTask(e){switch(e.Ae){case"addTask":case"removeTask":return r(e);case"complete":return`${c(e,2)}`}}},S={TemplateBinder:()=>""},TraceConfiguration={register(e){Object.assign(kernel.Tracer,Tracer)}};e.DebugConfiguration={register(e){Reporter.write(2),Object.assign(kernel.Reporter,Reporter),l.forEach(e=>{e.type.prototype.toString=function(){return h.H(this)}})}},e.TraceConfiguration=TraceConfiguration,Object.defineProperty(e,"bt",{value:1})});
