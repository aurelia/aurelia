var au=(function(t){"use strict";function s(){}function i(t){return function(s){const i=function(t,s,n){DI.inject(i)(t,s,n)};return i.resolve=function(i,n){return t(s,i,n)},i}}function n(t){return DI.transient(t)}function e(t){return DI.singleton(t)}function r(t){return"function"==typeof t.register}function h(t){if(null==t||t===Object)throw Reporter.error(5)}function o(t,s,i){if(t instanceof Ss&&4===t.strategy){const n=t.state;let e=n.length;const r=Array(e);for(;e--;)r[e]=n[e].resolve(s,i);return r}return[t.resolve(s,i)]}function c(t,s,i,n){let e,r=i.length,h=Array(r);for(;r--;){if(null==(e=i[r]))throw Reporter.error(7,`Index ${r}.`);h[r]=t.get(e)}return void 0!==n&&(h=h.concat(n)),Reflect.construct(s,h)}function attributePattern(...t){return function(s){const i=s.prototype;return(function(t,s){for(const def of s)def.pattern in t?"function"!=typeof t[def.pattern]&&Reporter.write(402,def):Reporter.write(401,def)})(i,t),i.t=t,s.register=function(t){return Registration.singleton(IAttributePattern,s).register(t,IAttributePattern)},s}}function l(t,s,i,n){var e,r,h=arguments.length,o=3>h?s:null===n?n=Object.getOwnPropertyDescriptor(s,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.s)o=Reflect.s(t,s,i,n);else for(r=t.length-1;r>=0;r--)(e=t[r])&&(o=(3>h?e(o):h>3?e(s,i,o):e(s,i))||o);return h>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(t){return function(s){const i=s.prototype;i.i=0,i.h=null,i.o=null,i.l=null,i.u=null,i.g=u,i.p=a,i.m=w,i.v=g,i.C=t===MutationKind.T?f:d}}function u(t){if(this.m(t))return 0;const s=this.i;return 1&s?2&s?4&s?8&s?(this.u.push(t),1):(this.u=[t],this.i|=8,1):(this.l=t,this.i|=4,1):(this.o=t,this.i|=2,1):(this.h=t,this.i|=1,1)}function a(t){const s=this.i;if(1&s&&this.h===t)return this.h=null,this.i&=-2,1;if(2&s&&this.o===t)return this.o=null,this.i&=-3,1;if(4&s&&this.l===t)return this.l=null,this.i&=-5,1;if(8&s){const s=this.u;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.i&=-9),1}return 0}function f(t,s,i){const n=this.h,e=this.o,r=this.l;let h=this.u;null!==h&&(h=h.slice()),null!==n&&n.A(t,s,i),null!==e&&e.A(t,s,i),null!==r&&r.A(t,s,i);const o=h&&h.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const e=h[n];null!==e&&e.A(t,s,i)}}function d(t,s,i){const n=this.h,e=this.o,r=this.l;let h=this.u;null!==h&&(h=h.slice()),null!==n&&n.A(t,s,i),null!==e&&e.A(t,s,i),null!==r&&r.A(t,s,i);const o=h&&h.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const e=h[n];null!==e&&e.A(t,s,i)}this.O.B(this).catch(t=>{throw t})}function g(){return 0!==this.i}function w(t){const s=this.i;if(1&s&&this.h===t)return 1;if(2&s&&this.o===t)return 1;if(4&s&&this.l===t)return 1;if(8&s){const s=this.u;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.R=0,s.k=null,s.I=null,s.S=null,s.L=null,s.P=b,s.D=p,s.M=C,s.j=v,s.F=m}}function b(t){if(this.M(t))return 0;const s=this.R;return 1&s?2&s?4&s?8&s?(this.L.push(t),1):(this.L=[t],this.R|=8,1):(this.S=t,this.R|=4,1):(this.I=t,this.R|=2,1):(this.k=t,this.R|=1,1)}function p(t){const s=this.R;if(1&s&&this.k===t)return this.k=null,this.R&=-2,1;if(2&s&&this.I===t)return this.I=null,this.R&=-3,1;if(4&s&&this.S===t)return this.S=null,this.R&=-5,1;if(8&s){const s=this.L;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.R&=-9),1}return 0}function m(t){const s=this.k,i=this.I,n=this.S;let e=this.L;null!==e&&(e=e.slice()),null!==s&&s.U(t),null!==i&&i.U(t),null!==n&&n.U(t);const r=e&&e.length;if(void 0!==r&&r>0)for(let s=0;r>s;++s){const i=e[s];null!==i&&i.U(t)}}function v(){return 0!==this.R}function C(t){const s=this.R;if(1&s&&this.k===t)return 1;if(2&s&&this.I===t)return 1;if(4&s&&this.S===t)return 1;if(8&s){const s=this.L;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function T(t){if(0==this.V){this.V=1;const{$:t,N:s}=this;this.q=t[s],Ws.get=(()=>this.H()),Ws.set=(value=>{this.W(value,LifecycleFlags.K)}),zs(t,s,Ws)||Reporter.write(1,s,t)}this.g(t)}function y(){delete this.$[this.N],this.$=null,this.N=null,this.q=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.T)(t);const s=t.prototype;s.V=0,s.$=null,s.N=null,s.q=Symbol(),s.subscribe=s.subscribe||T,s.unsubscribe=s.unsubscribe||s.p,s.G=s.G||y}}function A(t){const s=BindingBehaviorResource.Z(this.description.name);t.register(Registration.singleton(s,this))}function B(t){const s=this.kind.Z(this.description.name);t.register(Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t.X)}function hasUnbind(t){return 4096==(4096&t.X)}function isLiteral(t){return 16384==(16384&t.X)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.X){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.J);case 17925:return 1}return 0}function O(t,s,i,n){const e=n.length,r=Array(e);for(let h=0;e>h;++h)r[h]=n[h].evaluate(t,s,i);return r}function R(t,s,name){const i=null==s?null:s[name];if("function"==typeof i)return i;if(!(t&LifecycleFlags.Y)&&null==i)return null;throw Reporter.error(207,s,name,i)}function k(t){if(t===si){const s=xs.length=ti.length=(si+=5)+1;for(let i=t+1;s>i;++i)xs[i]=`_observer${i}`,ti[i]=`_observerVersion${i}`}}function I(t){const s=void 0===this._?0:this._;let i=s;for(;i--&&this[xs[i]]!==t;);if(-1===i){for(i=0;this[xs[i]];)i++;this[xs[i]]=t,t.subscribe(this),i===s&&(this._=i+1)}void 0===this.version&&(this.version=0),this[ti[i]]=this.version,k(i)}function E(t,s){const i=this.st.tt(t,s);this.it(i)}function S(t){const s=this._;let i,n;if(1==t)for(let t=0;s>t;++t)null!=(n=this[i=xs[t]])&&(this[i]=null,n.unsubscribe(this));else{const t=this.version;for(let e=0;s>e;++e)this[ti[e]]!==t&&null!=(n=this[i=xs[e]])&&(this[i]=null,n.unsubscribe(this))}}function L(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.nt=E),s.hasOwnProperty("unobserve")||(s.unobserve=S),s.hasOwnProperty("addObserver")||(s.it=I),t}function connectable(t){return void 0===t?L:L(t)}function P(t,s){if(this.q!==(t=null==t?this.defaultValue:t)){if(this.q=t,!(s&(LifecycleFlags.et|LifecycleFlags.rt))||this.ht&&s&LifecycleFlags.ot)return this.ct=s,this.O.B(this);this.lt(t,s)}return Promise.resolve()}function D(t){if(this.ht&&t&LifecycleFlags.ot)return void this.O.B(this).catch(t=>{throw t});const s=this.q;this.oldValue!==s&&(this.lt(s,this.ct|t|LifecycleFlags.K),this.oldValue=this.q)}function M(){this.q=null,this.oldValue=null,this.defaultValue=null,this.$=null,this.N=""}function targetObserver(t=null){return function(s){subscriberCollection(MutationKind.T)(s);const i=s.prototype;i.ut=null,i.q=t,i.oldValue=t,i.defaultValue=t,i.$=null,i.N="",i.W=i.W||P,i.flush=i.flush||D,i.G=i.G||M}}function j(){this.F(this.at),this.ft&&this.ft.dt(LifecycleFlags.et|LifecycleFlags.K),this.gt()}function F(){this.bt.wt=void 0,this.bt=null,this.at=null}function U(){const t=this.bt.length,s=this.at=Array(t);let i=0;for(;t>i;)s[i]=i++;s.pt=[]}function V(){const t=this.bt.size,s=this.at=Array(t);let i=0;for(;t>i;)s[i]=i++;s.pt=[]}function $(){return void 0===this.ft?this.ft=new CollectionLengthObserver(this,this.vt):this.ft}function collectionObserver(t){return function(s){subscriberCollection(MutationKind.bt)(s),batchedSubscriberCollection()(s);const i=s.prototype;i.ut=null,i.bt=null,i.at=null,i.Ct=0,i.vt=8&t?"length":"size",i.Tt=t,i.gt=8&t?U:V,i.flush=j,i.G=F,i.yt=$,i.subscribe=i.subscribe||i.g,i.unsubscribe=i.unsubscribe||i.p,i.At=i.At||i.P,i.Bt=i.Bt||i.D}}function N(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function q(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function H(t,s,from,to,i){let n,e,r,h,o,c,l;for(c=from+1;to>c;c++){for(n=t[c],e=s[c],l=c-1;l>=from&&(h=s[l],(o=i(r=t[l],n))>0);l--)t[l+1]=r,s[l+1]=h;t[l+1]=n,s[l+1]=e}}function z(t,s,from,to,i){let n,e,r,h,o,c,l,u,a,f,d,g,w,b,p,m,v,C,T,y=0,A=0;for(;;){if(10>=to-from)return void H(t,s,from,to,i);h=s[from],o=s[to-1],r=t[y=from+(to-from>>1)],c=s[y],(l=i(n=t[from],e=t[to-1]))>0&&(f=n,d=h,n=e,h=o,e=f,o=d),0>(u=i(n,r))?(a=i(e,r))>0&&(f=e,d=o,e=r,o=c,r=f,c=d):(f=n,d=h,n=r,h=c,r=e,c=o,e=f,o=d),t[from]=n,s[from]=h,t[to-1]=r,s[to-1]=c,g=e,w=o,p=to-1,t[y]=t[b=from+1],s[y]=s[b],t[b]=g,s[b]=w;t:for(A=b+1;p>A;A++)if(v=s[A],0>(C=i(m=t[A],g)))t[A]=t[b],s[A]=s[b],t[b]=m,s[b]=v,b++;else if(C>0){do{if(--p==A)break t;C=i(T=t[p],g)}while(C>0);t[A]=t[p],s[A]=s[p],t[p]=m,s[p]=v,0>C&&(m=t[A],v=s[A],t[A]=t[b],s[A]=s[b],t[b]=m,s[b]=v,b++)}b-from>to-p?(z(t,s,p,to,i),to=b):(z(t,s,from,b,i),from=p)}}function enableArrayObservation(){for(const t of pi)1!=ci[t].V&&def(ci,t,Object.assign({},vi,{value:mi[t]}))}function W(t,s){return s.wt||new ArrayObserver(t,s)}function enableMapObservation(){for(const t of Oi)1!=Ci[t].V&&Ii(Ci,t,Object.assign({},ki,{value:Ri[t]}))}function K(t,s){return s.wt||new MapObserver(t,s)}function enableSetObservation(){for(const t of Mi)1!=Ei[t].V&&Ui(Ei,t,Object.assign({},Fi,{value:ji[t]}))}function Q(t,s){return s.wt||new SetObserver(t,s)}function getCollectionObserver(t,s){switch(Hi.call(s)){case"[object Array]":return W(t,s);case"[object Map]":return K(t,s);case"[object Set]":return Q(t,s)}return null}function G(t,s,i){const n=this.Ot;PLATFORM.global.clearTimeout(n.Rt),n.Rt=PLATFORM.global.setTimeout(()=>{this.kt(t,s,i)},n.It)}function Z(t,s,i){const n=this.Ot;if(PLATFORM.global.clearTimeout(n.Rt),!(i&n.Et))return n.oldValue=Xi,void this.kt(t,s,i);n.oldValue===Xi&&(n.oldValue=s);const e=PLATFORM.global.setTimeout(()=>{const s=n.oldValue;n.oldValue=Xi,this.kt(t,s,i)},n.It);n.Rt=e}function X(t){const s=this.St,i=+new Date-s.Lt;if(i>=s.It)return PLATFORM.global.clearTimeout(s.Rt),s.Rt=-1,s.Lt=+new Date,void this.Pt(t);if(s.newValue=t,-1===s.Rt){const t=PLATFORM.global.setTimeout(()=>{s.Rt=-1,s.Lt=+new Date,this.Pt(s.newValue)},s.It-i);s.Rt=t}}function J(name){return`${Yi}:${name}`}function Y(t){return void 0===t.$customElement?null:t.$customElement}function _(name){return`${_i}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots){const def=new sn,i=arguments.length;switch(i){case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?xi:0==build?tn:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(nn.forEach(t=>{s[t]&&(def[t]=s[t])}),en.forEach(t=>{s[t]&&(def[t]=PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===PLATFORM.Dt?def.bindables=Object.assign({},s.bindables):Object.assign(def.bindables,s.bindables)))}return 2!==i||null===t||"string"!=typeof s&&"build"in s||(def.build=xi),def}function x(t){if(8&this.$state)return;const s=this.$lifecycle;s.Mt(),this.$state|=4,t|=LifecycleFlags.jt;const i=this.$hooks;16&i&&this.Ft(t),this.$state|=8,this.$state&=-5,32&i&&s.Ut(this),s.Vt(t)}function tt(t){if(8&this.$state)return;const s=this.$lifecycle;s.Mt(),this.$state|=4,t|=LifecycleFlags.jt;const i=this.$hooks;16&i&&this.Ft(t);let n=this.$t;for(;null!==n;)n.Nt(t),n=n.qt;s.Ht(this),this.$state|=8,this.$state&=-5,32&i&&s.Ut(this),s.Vt(t)}function st(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.jt;let s=this.$t;for(;null!==s;)s.Nt(t),s=s.qt;this.$lifecycle.Ht(this),this.$state|=8,this.$state&=-5}function it(t){if(8&this.$state){const s=this.$lifecycle;s.zt(),this.$state|=32,t|=LifecycleFlags.Wt;const i=this.$hooks;64&i&&this.Kt(t),this.$state&=-41,128&i&&s.Qt(this),s.Gt(t)}}function nt(t){if(8&this.$state){const s=this.$lifecycle;s.zt(),this.$state|=32,(t|=LifecycleFlags.Wt)&LifecycleFlags.Zt^LifecycleFlags.Zt|t&LifecycleFlags.Xt&&(s.Jt(this),t|=LifecycleFlags.Zt);const i=this.$hooks;64&i&&this.Kt(t);let n=this.Yt;for(;null!==n;)n._t(t),n=n.xt;this.$state&=-41,128&i&&s.Qt(this),s.Gt(t)}}function et(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.Wt)&LifecycleFlags.Zt^LifecycleFlags.Zt|t&LifecycleFlags.Xt&&(this.$lifecycle.Jt(this),t|=LifecycleFlags.Zt);let s=this.Yt;for(;null!==s;)s._t(t),s=s.xt;this.$state&=-41}}function rt(t){2048&this.$hooks&&this.ts(t|=LifecycleFlags.ss)}function ht(t){t|=LifecycleFlags.ss,2048&this.$hooks&&this.ts(t);let s=this.Yt;for(;null!==s;)s.ns(t),s=s.xt}function ot(t){t|=LifecycleFlags.ss;let s=this.Yt;for(;null!==s;)s.ns(t),s=s.xt}function ct(){16&this.$state||(this.$state|=16,this.rs.es(this.$nodes))}function lt(){16&this.$state&&(this.$state&=-17,this.rs.hs(this.$nodes))}function ut(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function at(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.os&&(this.os=0,this.cache.cs(this))?(this.$state|=128,1):0):0}function ft(t,s){if(t|=LifecycleFlags.rt,2&this.$state){if(this.$scope===s)return;this.ls(t)}const i=this.$lifecycle;i.us(),this.$state|=1;const n=this.$hooks;8&n&&i.as(this),this.$scope=s,4&n&&this.fs(t),this.$state|=2,this.$state&=-2,i.ds(t)}function dt(t,s){if(2&this.$state)return;const i=this.$scope;i.gs=s;const n=this.$lifecycle;n.us(),this.$state|=1;const e=this.$hooks;t|=LifecycleFlags.rt,8&e&&n.as(this),4&e&&this.fs(t);let r=this.ws;for(;null!==r;)r.bs(t,i),r=r.ps;this.$state|=2,this.$state&=-2,n.ds(t)}function gt(t,s){if(t|=LifecycleFlags.rt,2&this.$state){if(this.$scope===s)return;this.ls(t)}this.$state|=1,this.$scope=s;let i=this.ws;for(;null!==i;)i.bs(t,s),i=i.ps;this.$state|=2,this.$state&=-2}function wt(t){if(2&this.$state){const s=this.$lifecycle;s.ms(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.vs,512&i&&s.Cs(this),256&i&&this.Ts(t),this.$state&=-67,s.ys(t)}}function bt(t){if(2&this.$state){const s=this.$lifecycle;s.ms(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.vs,512&i&&s.Cs(this),256&i&&this.Ts(t);let n=this.As;for(;null!==n;)n.ls(t),n=n.Bs;this.$scope.gs=null,this.$state&=-67,s.ys(t)}}function pt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.vs;let s=this.As;for(;null!==s;)s.ls(t),s=s.Bs;this.$state&=-67,this.$scope=null}}function mt(t){t.Os(this.constructor,this),2&this.$hooks&&this.Rs()}function vt(dom,t,s,host,i,n=PLATFORM.Dt){const e=this.constructor,r=e.description;if(this.$scope=Scope.create(this,null),this.ks=host,this.rs=t.Is(dom,this,host,r),s.Os(e,this),1024&this.$hooks){const t=this.Es(host,n.parts,i);t&&"getElementTemplate"in t&&t.Ss(s,e,i).Es(this,host,n.parts)}else s.Ss(dom,r,i,e).Es(this,host,n.parts);2&this.$hooks&&this.Rs()}function Ct(t){const s=this.description,i=this.kind.Z(s.name),aliases=s.aliases;t.register(Registration.transient(i,this));for(let s=0,n=aliases.length;n>s;++s){const n=this.kind.Z(aliases[s]);t.register(Registration.Ls(i,n))}}function Tt(t){return t.Ps=1,t}function bindable(t,s){let i;const n=function(t,s){const n=t.constructor;let bindables=n.bindables;void 0===bindables&&(bindables=n.bindables={}),i.Ds||(i.Ds=PLATFORM.Ms(s)),i.js||(i.js=`${s}Changed`),void 0===i.mode&&(i.mode=BindingMode.Fs),arguments.length>1&&(i.Us=s),bindables[i.Us]=i};return arguments.length>1?(i={},void n(t,s)):"string"==typeof t?(i={},n):(i=t||{},n)}function yt(t){const s=this.kind.Z(this.description.name);t.register(Registration.transient(s,this))}function At(t){return t.containerless=1,t}function Bt(t){if(2&this.$state)return;t|=LifecycleFlags.rt;const s=this.$scope;let i=this.ws;for(;null!==i;)i.bs(t,s),i=i.ps;this.$state|=2}function Ot(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.vs;let s=this.As;for(;null!==s;)s.ls(t),s=s.Bs;this.$state&=-67}}function createRenderContext(dom,t,dependencies,s){const i=t.Vs(),n=new an,e=new an,r=new an,h=new fn,o=new an,c=i.get(IRenderer);return dom.$s(i,e),i.Ns(IViewFactory,h),i.Ns(IRenderable,n),i.Ns(ITargetedInstruction,r),i.Ns(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.Es=function(t,targets,s,host,parts){c.Es(dom,this,t,targets,s,host,parts)},i.qs=function(t,s,c,l,parts,u){return n.Hs(t),e.Hs(s),r.Hs(c),l&&h.Hs(l,parts),u&&o.Hs(u),i},i.G=function(){h.G(),n.G(),r.G(),e.G(),o.G()},i}function Rt(t){const s=[];for(let i=0,n=t.length;n>i;++i){const component=Y(t[i]);null!==component&&s.push(component)}return s}function kt(t,name){Reflect.defineProperty(t,name,{zs:1,get(){return this.Ws[name].H()},set(value){this.Ws[name].W(value,LifecycleFlags.K)}})}function instructionRenderer(t){return function(s){const i=function(...i){const n=new s(...i);return n.Ks=t,n};i.register=function(t){return Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const n=Object.getOwnPropertyDescriptors(s);return Object.keys(n).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,n[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addBindable(t,bindable){bindable.Bs=t.As,bindable.ps=null,null===t.As?t.ws=bindable:t.As.ps=bindable,t.As=bindable}function addAttachable(t,s){s.xt=t.Yt,s.qt=null,null===t.Yt?t.$t=s:t.Yt.qt=s,t.Yt=s}function It(t){const s=BindingCommandResource.Z(this.description.name);t.register(Registration.singleton(s,this))}function getTarget(t,s){return 256&t.flags?t.bindable.Qs:s?PLATFORM.Gs(t.Zs.target):t.Zs.target}function getMode(t){return 256&t.flags?t.bindable.mode:In[t.Zs.command]}function Et(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}function parseExpression(t,s){return $state.input=t,$state.length=t.length,$state.index=0,$state.Xs=t.charCodeAt(0),St($state,0,61,void 0===s?53:s)}function St(t,s,i,n){if(0===t.index){if(2048&n)return(function(t){const parts=[],s=[],i=t.length;let n="";for(;i>t.index;){switch(t.Xs){case 36:if(123===t.input.charCodeAt(t.index+1)){parts.push(n),n="",t.index+=2,t.Xs=t.input.charCodeAt(t.index),Pt(t);const i=St(t,0,61,2048);s.push(i);continue}n+="$";break;case 92:n+=String.fromCharCode(Et(Dt(t)));break;default:n+=String.fromCharCode(t.Xs)}Dt(t)}return s.length?(parts.push(n),new Interpolation(parts,s)):null})(t);if(Pt(t),1048576&t.Js)throw Reporter.error(100,{state:t})}t.Ys=448>i;let e=void 0;if(32768&t.Js){const i=jn[63&t.Js];Pt(t),e=new Unary(i,St(t,s,449,n)),t.Ys=0}else{t:switch(t.Js){case 3077:t.Ys=0;do{if(Pt(t),s++,!Ut(t,16392)){if(524288&t.Js){const t=511&s;e=0===t?Dn:1===t?Mn:new AccessThis(t),s=512;break t}throw Reporter.error(103,{state:t})}if(16392===t.Js)throw Reporter.error(102,{state:t});if(1572864===t.Js)throw Reporter.error(105,{state:t})}while(3077===t.Js);case 1024:512&n?e=new BindingIdentifier(t._s):(e=new AccessScope(t._s,511&s),s=1024),t.Ys=1,Pt(t);break;case 3076:t.Ys=0,Pt(t),e=Dn,s=512;break;case 671750:Pt(t),e=St(t,0,62,n),Vt(t,1835018),s=0;break;case 671756:e=(function(t,s,i){Pt(t);const n=[];for(;1835021!==t.Js;)if(Ut(t,1572875)){if(n.push(Pn),1835021===t.Js){n.push(Pn);break}}else{if(n.push(St(t,s,62,-513&i)),!Ut(t,1572875))break;if(1835021===t.Js){n.push(Pn);break}}return Vt(t,1835021),512&i?new ArrayBindingPattern(n):(t.Ys=0,new ArrayLiteral(n))})(t,s,n),s=0;break;case 131079:e=(function(t,s){const i=[],n=[];for(Pt(t);1835017!==t.Js;){if(i.push(t._s),12288&t.Js)Pt(t),Vt(t,1572878),n.push(St(t,0,62,-513&s));else{if(!(3072&t.Js))throw Reporter.error(107,{state:t});{const{Xs:i,Js:e,index:r}=t;Pt(t),Ut(t,1572878)?n.push(St(t,0,62,-513&s)):(t.Xs=i,t.Js=e,t.index=r,n.push(St(t,0,450,-513&s)))}}1835017!==t.Js&&Vt(t,1572875)}return Vt(t,1835017),512&s?new ObjectBindingPattern(i,n):(t.Ys=0,new ObjectLiteral(i,n))})(t,n),s=0;break;case 540713:e=new Template([t._s]),t.Ys=0,Pt(t),s=0;break;case 540714:e=Lt(t,s,n,e,0),s=0;break;case 4096:case 8192:e=new PrimitiveLiteral(t._s),t.Ys=0,Pt(t),s=0;break;case 2050:case 2051:case 2049:case 2048:e=jn[63&t.Js],t.Ys=0,Pt(t),s=0;break;default:throw Reporter.error(t.length>t.index?101:104,{state:t})}if(512&n)return(function(t,s){if(0==(65536&s.X))throw Reporter.error(106,{state:t});if(1051179!==t.Js)throw Reporter.error(106,{state:t});Pt(t);const i=s,n=St(t,0,61,0);return new ForOfStatement(i,n)})(t,e);if(i>449)return e;let name=t._s;for(;(16384&t.Js)>0;)switch(t.Js){case 16392:if(t.Ys=1,Pt(t),0==(3072&t.Js))throw Reporter.error(105,{state:t});if(name=t._s,Pt(t),s=(1536&s)<<1|2048&s|(4096&s)>>1,671750===t.Js){0===s&&(s=2048);continue}e=1024&s?new AccessScope(name,e.xs):new AccessMember(e,name);continue;case 671756:t.Ys=1,Pt(t),s=4096,e=new AccessKeyed(e,St(t,0,62,n)),Vt(t,1835021);break;case 671750:t.Ys=0,Pt(t);const i=[];for(;1835018!==t.Js&&(i.push(St(t,0,62,n)),Ut(t,1572875)););Vt(t,1835018),e=1024&s?new CallScope(name,i,e.xs):2048&s?new CallMember(e,name,i):new CallFunction(e,i),s=0;break;case 540713:t.Ys=0;const r=[t._s];e=new TaggedTemplate(r,r,e),Pt(t);break;case 540714:e=Lt(t,s,n,e,1)}}if(i>448)return e;for(;(65536&t.Js)>0;){const r=t.Js;if(i>=(448&r))break;Pt(t),e=new Binary(jn[63&r],e,St(t,s,448&r,n)),t.Ys=0}if(i>63)return e;if(Ut(t,1572879)){const i=St(t,s,62,n);Vt(t,1572878),e=new Conditional(e,i,St(t,s,62,n)),t.Ys=0}if(i>62)return e;if(Ut(t,1048615)){if(!t.Ys)throw Reporter.error(150,{state:t});e=new Assign(e,St(t,s,62,n))}if(i>61)return e;for(;Ut(t,1572883);){if(1572864===t.Js)throw Reporter.error(112);const name=t._s;Pt(t);const i=[];for(;Ut(t,1572878);)i.push(St(t,s,62,n));e=new ValueConverter(e,name,i)}for(;Ut(t,1572880);){if(1572864===t.Js)throw Reporter.error(113);const name=t._s;Pt(t);const i=[];for(;Ut(t,1572878);)i.push(St(t,s,62,n));e=new BindingBehavior(e,name,i)}if(1572864!==t.Js){if(2048&n)return e;if("of"===t.ti)throw Reporter.error(151,{state:t});throw Reporter.error(101,{state:t})}return e}function Lt(t,s,i,n,e){const r=[t._s];Vt(t,540714);const h=[St(t,s,62,i)];for(;540713!==(t.Js=Ft(t));)r.push(t._s),Vt(t,540714),h.push(St(t,s,62,i));return r.push(t._s),t.Ys=0,e?(Pt(t),new TaggedTemplate(r,r,n,h)):(Pt(t),new Template(r,h))}function Pt(t){for(;t.length>t.index;)if(t.si=t.index,null!==(t.Js=qn[t.Xs](t)))return;t.Js=1572864}function Dt(t){return t.Xs=t.input.charCodeAt(++t.index)}function Mt(t,s){let i=t.Xs;if(0==s){do{i=Dt(t)}while(57>=i&&i>=48);if(46!==i)return t._s=parseInt(t.ti,10),8192;if(i=Dt(t),t.index>=t.length)return t._s=parseInt(t.ti.slice(0,-1),10),8192}if(i>57||48>i)t.Xs=t.input.charCodeAt(--t.index);else do{i=Dt(t)}while(57>=i&&i>=48);return t._s=parseFloat(t.ti),8192}function jt(t){let s=1,i="";for(;96!==Dt(t);)if(36===t.Xs){if(t.length>t.index+1&&123===t.input.charCodeAt(t.index+1)){t.index++,s=0;break}i+="$"}else if(92===t.Xs)i+=String.fromCharCode(Et(Dt(t)));else{if(t.index>=t.length)throw Reporter.error(109,{state:t});i+=String.fromCharCode(t.Xs)}return Dt(t),t._s=i,s?540713:540714}function Ft(t){if(t.index>=t.length)throw Reporter.error(109,{state:t});return t.index--,jt(t)}function Ut(t,s){return t.Js===s?(Pt(t),1):0}function Vt(t,s){if(t.Js!==s)throw Reporter.error(110,{state:t,ii:s});Pt(t)}function $t(t,s,i,value){const n=i.length;for(let e=0;n>e;e+=2){const n=i[e];let r=i[e+1];if(r=r>0?r:n+1,t&&t.fill(value,n,r),s)for(let t=n;r>t;t++)s.add(t)}}function Nt(t){return s=>(Dt(s),t)}function qt(dom){const t=dom.createElement("au-m");return dom.ni(t),t}function Ht(t){return t.ei&&t.ei()[0]||t.ri&&t.ri()[0]||t.path&&t.path[0]||t.target}function zt(){this.hi(),this.oi=1}function Wt(t){t.oi=0;let s=Ht(t);const i=[];for(;s;){if(s.ci){const n=s.ci[t.type];n&&(t.stopPropagation!==zt&&(t.hi=t.stopPropagation,t.stopPropagation=zt),i.push(n))}s=s.parentNode}for(let s=i.length-1;s>=0&&!t.oi;s--){const n=i[s];"handleEvent"in n?n.li(t):n(t)}}function Kt(t){t.oi=0;let s=Ht(t);for(;s&&!t.oi;){if(s.ui){const i=s.ui[t.type];i&&(t.stopPropagation!==zt&&(t.hi=t.stopPropagation,t.stopPropagation=zt),"handleEvent"in i?i.li(t):i(t))}s=s.parentNode}}function Qt(t,s){return t===s}function Gt(t){const s=Ht(t);if(this.target===s)return this.ai(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,s,i){return"string"==typeof t?(function(dom,s,i,n){const instructions=[],e=[],dependencies=[],r=dom.createElement(t);let h=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(h=1,instructions.push(value)):dom.setAttribute(r,to,value)}),h&&(dom.ni(r),e.push(instructions)),n&&Zt(dom,r,n,e,dependencies),new RenderPlan(dom,r,e,dependencies)})(dom,0,s,i):(function(dom,t,s,i){const n=t.description.name,instructions=[],e=[instructions],dependencies=[],r=[],bindables=t.description.bindables,h=dom.createElement(n);return dom.ni(h),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(n,r)),s&&Object.keys(s).forEach(to=>{const value=s[to];if(isHTMLTargetedInstruction(value))r.push(value);else{r.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),i&&Zt(dom,h,i,e,dependencies),new RenderPlan(dom,h,e,dependencies)})(dom,t,s,i)}function Zt(dom,t,s,i,dependencies){for(let n=0,e=s.length;e>n;++n){const e=s[n];switch(typeof e){case"string":dom.appendChild(t,dom.createTextNode(e));break;case"object":dom.fi(e)?dom.appendChild(t,e):"mergeInto"in e&&e.di(t,i,dependencies)}}}function Xt(t){const s=t.index,{length:i,input:n}=t;for(;i>t.index&&58!==n.charCodeAt(++t.index););return n.slice(s,t.index).trim()}function Jt(t){++t.index;const{length:s,input:i}=t;let n="",e=0;for(;s>t.index;){switch(e=i.charCodeAt(t.index)){case 59:return++t.index,n.trim();case 47:e=i.charCodeAt(++t.index),n+=`\\${Ee(e)}`;break;case 39:n+="'";break;default:n+=Ee(e)}++t.index}return n.trim()}function stringifyDOM(t,s){let i=" ".repeat(s);if(i+=`Node: ${t.nodeName}`,3===t.nodeType&&(i+=` "${t.textContent}"`),1===t.nodeType){let s,n=0;const e=t.attributes,r=e.length;for(;r>n;++n)i+=` ${(s=e[n]).name}=${s.value}`}if(i+="\n",1===t.nodeType){let n=0,childNodes=t.childNodes,e=childNodes.length;for(;e>n;++n)i+=stringifyDOM(childNodes[n],s+1);if("TEMPLATE"===t.nodeName)for(n=0,e=(childNodes=t.content.childNodes).length;e>n;++n)i+=stringifyDOM(childNodes[n],s+1)}return i}function stringifyInstructions(t,s){let i=" ".repeat(s);switch(t.type){case"ha":i+="textBinding\n";break;case"rh":i+="callBinding\n";break;case"rk":i+="iteratorBinding\n";break;case"hb":i+="listenerBinding\n";break;case"rg":i+="propertyBinding\n";break;case"rj":i+="refBinding\n";break;case"hc":i+="stylePropertyBinding\n";break;case"re":i+="setProperty\n";break;case"hd":i+="setAttribute\n";break;case"rf":i+="interpolation\n";break;case"rd":i+="hydrateLetElement\n",t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"rb":i+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"ra":i+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"rc":i+=`hydrateTemplateController: ${t.res}\n`,i+=stringifyTemplateDefinition(t.def,s+1),t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)})}return i}function stringifyTemplateDefinition(def,t){const s=" ".repeat(t);let i=s;return i+=`TemplateDefinition: ${def.name}\n`,i+=stringifyDOM(def.template,t+1),i+=`${s} Instructions:\n`,def.instructions.forEach(n=>{i+=`${s}  Row:\n`,n.forEach(s=>{i+=stringifyInstructions(s,t+3)})}),i}var Yt,_t,LifecycleFlags,xt,DelegationStrategy,MutationKind,CollectionKind,ts,ExpressionKind,ss,BindingMode,is,Hooks,BindingType,TargetedInstructionType,ViewCompileFlags,ns,es,rs,hs,os,cs,ls,SymbolFlags,us,HTMLTargetedInstructionType,NodeType,as,fs,ds,gs,ws,bs;class AttrSyntax{constructor(t,s,i,n){this.gi=t,this.wi=s,this.target=i,this.command=n}}const ps=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(t){return{}}})(),ms=(function(){let t,s,i,n,e;if(null!=ps.performance&&ps.performance.now){const t=ps.performance;return function(){return t.now()}}if(null!=ps.process&&ps.process.bi){const r=function(){return(t()-n)/1e6};return s=ps.process.bi,i=(t=function(){let t;return 1e9*(t=s())[0]+t[1]})(),e=1e9*ps.process.pi(),n=i-e,r}})(),{mi:vs,vi:Cs,Ci:Ts,Ti:ys,yi:As,Ai:Bs}=(function(){if(null!=ps.performance&&ps.performance.mark&&ps.performance.measure&&ps.performance.getEntriesByName&&ps.performance.getEntriesByType&&ps.performance.clearMarks&&ps.performance.clearMeasures){const t=ps.performance;return{mi(name){t.mark(name)},vi(name,s,i){t.measure(name,s,i)},Ci:name=>t.getEntriesByName(name),Ti:type=>t.getEntriesByType(type),yi(name){t.clearMarks(name)},Ai(name){t.clearMeasures(name)}}}if(null!=ps.process&&ps.process.bi){const t=[],s={},i=function(s,value){let i=0;const n=t.length,e=[];for(;n>i;i++)t[i][s]===value&&e.push(t[i]);return e},n=function(type,name){let s,i=t.length;for(;i--;)(s=t[i]).entryType!==type||void 0!==name&&s.name!==name||t.splice(i,1)};return{mi(name){const i={name,entryType:"mark",startTime:ms(),duration:0};t.push(i),s[name]=i},vi(name,i,n){let e,r;if(void 0!==n&&void 0===s[n])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${n}' does not exist.`);if(void 0!==i&&void 0===s[i])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${i}' does not exist.`);e=s[i]?s[i].startTime:0,r=s[n]?s[n].startTime:ms(),t.push({name,entryType:"measure",startTime:e,duration:r-e})},Ci:name=>i("name",name),Ti:type=>i("entryType",type),yi(name){n("mark",name)},Ai(name){n("measure",name)}}}})(),{Bi:Os,Oi:Rs}=(function(){const t=["moz","webkit"],s="AnimationFrame";let i=ps[`request${s}`],n=ps[`cancel${s}`]||ps[`cancelRequest${s}`];for(let e=0;!i&&2>e;++e)i=ps[`${t[e]}Request${s}`],n=ps[`${t[e]}Cancel${s}`]||ps[`${t[e]}CancelRequest${s}`];if(!i||!n){let t=0,s=0;const e=[],r=1e3/60;i=function(i){let n,h;return 0===e.length&&(n=ms(),t=(h=Math.max(0,r-(n-t)))+n,setTimeout(function(){const s=e.slice(0);e.length=0;for(let i=0;s.length>i;++i)if(!s[i].Ri)try{s[i].js(t)}catch(t){setTimeout(function(){throw t},0)}},Math.round(h))),e.push({ki:++s,js:i,Ri:0}),s},n=function(t){for(let s=0;e.length>s;++s)e[s].ki===t&&(e[s].Ri=1)}}const e=function(t){return i.call(ps,t)};return e.cancel=function(){n.apply(ps,arguments)},ps.requestAnimationFrame=i,ps.cancelAnimationFrame=n,{Bi:e,Oi:n}})();class ks{constructor(t,s=null){this.Ii=t,this.context=s,this.next=null,this.Ei=null,this.Si=0}Li(t,s){return this.Ii===t&&this.context===(void 0===s?null:s)}Pi(t){null!==this.Ii&&(null!==this.context?this.Ii.call(this.context,t):this.Ii(t));const s=this.next;return this.Si&&(this.next=null),s}connect(t){this.Ei=t,null!==t.next&&(t.next.Ei=this),this.next=t.next,t.next=this}disconnect(t=0){this.Si=1,this.Ii=null,this.context=null,null!==this.Ei&&(this.Ei.next=this.next),null!==this.next&&(this.next.Ei=this.Ei);const s=this.next;return this.next=t?null:s,this.Ei=null,s}}const Is={},Es={},PLATFORM={global:ps,Di:new class{constructor(){this.head=new ks(null,null),this.Mi=-1,this.ji=1,this.Fi=-1,this.Ui=0,this.Vi=null,this.resolve=s,this.$i=(t=>{this.Mi=-1,this.Ui&&(this.update(t),this.Ui&&-1===this.Mi&&null!==this.head.next&&(this.Mi=Os(this.$i))),this.resolve(t),this.resolve=s,this.Vi=null})}add(t,s){const i=new ks(t,s);let n=this.head.next,e=this.head;if(null===n)i.connect(e);else{for(;null!==n;)e=n,n=n.next;null===i.Ei&&i.connect(e)}return this.Ui?this.Ni():this.start(),this}remove(t,s){let i=this.head.next;for(;null!==i;)i=i.Li(t,s)?i.disconnect():i.next;return null===this.head.next&&this.qi(),this}start(){this.Ui||(this.Ui=1,this.Ni())}stop(){this.Ui&&(this.Ui=0,this.qi())}update(t=ms()){let s;if(t>this.Fi){this.ji=~~(60*(s=t-this.Fi)+.5)/1e3;const i=this.head;let n=i.next;for(;null!==n;)n=n.Pi(this.ji);null===i.next&&this.qi()}else this.ji=0;this.Fi=t}Hi(){return null===this.Vi&&(this.Vi=new Promise(t=>{this.resolve=t})),this.Vi}Ni(){-1===this.Mi&&null!==this.head.next&&(this.Fi=ms(),this.Mi=Os(this.$i))}qi(){-1!==this.Mi&&(Rs(this.Mi),this.Mi=-1)}},zi:Object.freeze([]),Dt:Object.freeze({}),Wi:s,now:ms,mark:vs,measure:Cs,getEntriesByName:Ts,getEntriesByType:ys,clearMarks:As,clearMeasures:Bs,Gs(t){let value=Is[t];if(void 0!==value)return value;value="";let s,i=1,n=0;for(let e=0,r=t.length;r>e;++e)"-"===(s=t.charAt(e))||"."===s||"_"===s?n=1:(value+=i?s.toLowerCase():n?s.toUpperCase():s,n=0),i=0;return Is[t]=value},Ms(t){let value=Es[t];if(void 0!==value)return value;value="";let s,i,n=1;for(let e=0,r=t.length;r>e;++e)i=(s=t.charAt(e)).toLowerCase(),value+=n?i:s!==i?`-${i}`:i,n=0;return Es[t]=value},toArray(t){const s=t.length,i=Array(s);for(let n=0;s>n;++n)i[n]=t[n];return i},requestAnimationFrame:t=>Os(t),clearInterval(t){ps.clearInterval(t)},clearTimeout(t){ps.clearTimeout(t)},setInterval:(t,s,...i)=>ps.setInterval(t,s,...i),setTimeout:(t,s,...i)=>ps.setTimeout(t,s,...i)},Reporter={write(t,...s){},error:t=>Error(`Code ${t}`)},Tracer={enabled:0,Ki:0,Qi:null,Gi(name,t){},Zi(){},Xi(t){},Ji(t){},Yi(t){},_i(){}};"getOwnMetadata"in Reflect||(Reflect.xi=function(t,s){return s[t]},Reflect.tn=function(t,s){return function(i){i[t]=s}});const DI={sn(...t){return 0===arguments.length?new Ds:(new Ds).register(...t)},in:t=>Reflect.xi("design:paramtypes",t)||PLATFORM.zi,nn(t){let dependencies;if(void 0===t.inject)dependencies=DI.in(t);else{dependencies=[];let s=t;for(;"function"==typeof s;)s.hasOwnProperty("inject")&&dependencies.push(...s.inject),s=Object.getPrototypeOf(s)}return dependencies},en(t){const s=function(i,n,e){if(s.rn=t||"Interface",void 0===i)throw Reporter.error(16,s.rn,s);return(i.inject||(i.inject=[]))[e]=s,i};return s.hn=function(){return s},s.on=function(t){return s.on=function(){throw Reporter.error(17,s)},s.register=function(i,n){const e=n||s;return t({T:value=>i.Ns(e,new Ss(e,0,value)),singleton:value=>i.Ns(e,new Ss(e,1,value)),transient:value=>i.Ns(e,new Ss(e,2,value)),js:value=>i.Ns(e,new Ss(e,3,value)),cn:t=>i.Ns(e,new Ss(e,5,t))})},s},s},inject:(...dependencies)=>(function(t,s,i){if("number"==typeof i){if(!t.hasOwnProperty("inject")){const s=DI.in(t);t.inject=s.slice()}1===dependencies.length&&(t.inject[i]=dependencies[0])}else if(s){const i=t.constructor;(i.inject||(i.inject={}))[s]=dependencies[0]}else if(i)i.value.inject=dependencies;else if(0===dependencies.length){const s=DI.in(t);t.inject=s.slice()}else t.inject=dependencies}),transient:t=>(t.register=function(s){return Registration.transient(t,t).register(s,t)},t),singleton:t=>(t.register=function(s){return Registration.singleton(t,t).register(s,t)},t)},IContainer=DI.en("IContainer").hn(),IServiceLocator=IContainer,inject=DI.inject,all=i((t,s,i)=>i.getAll(t)),lazy=i((t,s,i)=>{let n=null;return()=>(null===n&&(n=i.get(t)),n)}),optional=i((t,s,i)=>i.has(t,1)?i.get(t):null);(function(t){t[t.T=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.js=3]="callback",t[t.ln=4]="array",t[t.Ls=5]="alias"})(Yt||(Yt={}));class Ss{constructor(t,strategy,s){this.key=t,this.strategy=strategy,this.state=s}register(t,s){return t.Ns(s||this.key,this)}resolve(t,s){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const s=t.un(this.state);return this.state=s.construct(t)}case 2:return t.un(this.state).construct(s);case 3:return this.state(t,s,this);case 4:return this.state[0].resolve(t,s);case 5:return t.get(this.state);default:throw Reporter.error(6,this.strategy)}}un(t){switch(this.strategy){case 1:case 2:return t.un(this.state);default:return null}}}class Ls{constructor(t,s,dependencies){this.an=t,this.fn=s,this.dependencies=dependencies,this.dn=null}static create(t){const dependencies=DI.nn(t);return new Ls(t,Ms[dependencies.length]||js,dependencies)}construct(t,s){const i=this.dn;let n=void 0!==s?this.fn.gn(t,this.an,this.dependencies,s):this.fn.wn(t,this.an,this.dependencies);if(null===i)return n;for(let t=0,s=i.length;s>t;++t)n=i[t](n);return n}bn(t){return null===this.dn&&(this.dn=[]),this.dn.push(t),1}}const Ps={resolve:(t,s)=>s};class Ds{constructor(t={}){this.parent=null,this.pn=new Map,this.mn=t,this.vn=t.vn||(t.vn=new Map),this.Cn=t.Cn||(t.Cn=Object.create(null)),this.pn.set(IContainer,Ps)}register(...t){for(let s=0,i=t.length;i>s;++s){const i=t[s];if(r(i))i.register(this);else{const t=Object.keys(i);for(let s=0,n=t.length;n>s;++s){const value=i[t[s]];r(value)?value.register(this):this.register(value)}}}return this}Ns(t,s){h(t);const i=this.pn,n=i.get(t);return void 0===n?(i.set(t,s),"string"==typeof t&&(this.Cn[t]=s)):n instanceof Ss&&4===n.strategy?n.state.push(s):i.set(t,new Ss(t,4,[n,s])),s}bn(t,s){const i=this.Tn(t);if(null===i)return 0;if(i.un){const t=i.un(this);return null===t?0:t.bn(s)}return 0}Tn(t,s=1){if(h(t),t.resolve)return t;let i=this;for(;null!==i;){const n=i.pn.get(t);if(void 0!==n)return n;if(null===i.parent)return s?this.yn(t,i):null;i=i.parent}return null}has(t,s=0){return this.pn.has(t)?1:s&&null!==this.parent?this.parent.has(t,1):0}get(t){if(h(t),t.resolve)return t.resolve(this,this);let s=this;for(;null!==s;){let i=s.pn.get(t);if(void 0!==i)return i.resolve(s,this);if(null===s.parent)return(i=this.yn(t,s)).resolve(s,this);s=s.parent}}getAll(t){h(t);let s=this;for(;null!==s;){const i=s.pn.get(t);if(void 0!==i)return o(i,s,this);if(null===this.parent)return PLATFORM.zi;s=s.parent}return PLATFORM.zi}un(t){let s=this.vn.get(t);return void 0===s&&(s=Ls.create(t),this.vn.set(t,s)),s}Vs(){const t=this.mn,s={vn:t.vn,Cn:Object.assign({},t.Cn)},i=new Ds(s);return i.parent=this,i}yn(t,s){if(t.register){const i=t.register(s,t);if(!i||!i.resolve)throw Reporter.error(40);return i}const i=new Ss(t,1,t);return s.pn.set(t,i),i}}const Registration={T:(t,value)=>new Ss(t,0,value),singleton:(t,value)=>new Ss(t,1,value),transient:(t,value)=>new Ss(t,2,value),js:(t,s)=>new Ss(t,3,s),Ls:(t,s)=>new Ss(s,5,t),An:(t,...s)=>({register(i){const n=i.Tn(t);if(null!==n){let t=null;if(n.un){const e=n.un(i);null!==e&&(t=e.construct(i,s))}else t=n.resolve(i,i);null!==t&&t.register(i)}}})},Ms=[{wn:(t,s)=>new s,gn:c},{wn:(t,s,i)=>new s(t.get(i[0])),gn:c},{wn:(t,s,i)=>new s(t.get(i[0]),t.get(i[1])),gn:c},{wn:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2])),gn:c},{wn:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3])),gn:c},{wn:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3]),t.get(i[4])),gn:c}],js={wn:c,gn:c},Profiler=(function(){const t=PLATFORM.now,s=[];let i;const n={Bn(name){s.push(name);let n=0,e=0;return{Gi(){1==++n&&(e=t(),++i[name].On),++i[name].Rn},Zi(){0==--n&&(i[name].duration+=t()-e)}}},enable(){i={};for(const t of s)i[t]={name:t,duration:0,On:0,Rn:0};n.enabled=1},disable(){n.enabled=0},kn(t){Object.keys(i).map(t=>i[t]).sort((t,s)=>s.duration-t.duration).forEach(s=>{t(s.name,s.duration,s.On,s.Rn)})},enabled:0};return n})();class RuntimeCompilationResources{constructor(t){this.context=t}find(t,name){const s=t.Z(name),i=this.context.Cn;let n=i[s];if(void 0===n&&(n=i[s]=this.context.Tn(s,0)),null!==n&&n.un){const t=n.un(this.context);if(null!==t){const s=t.an.description;return void 0===s?null:s}}return null}create(t,name){const s=t.Z(name),i=this.context.Cn;let n=i[s];if(void 0===n&&(n=i[s]=this.context.Tn(s,0)),null!==n){const t=n.resolve(this.context,this.context);return void 0===t?null:t}return null}}_t=Object.freeze({all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton:t=>void 0===t?e:e(t),transient:t=>void 0===t?n:n(t),PLATFORM,Reporter,Tracer,Profiler,RuntimeCompilationResources});class Fs{constructor(t,s,i,n){if(this.In=t,this.repeat=s,this.En=i,this.Sn=n,n)switch(t.length){case 0:this.has=this.Ln;break;case 1:this.has=this.Pn;break;default:this.has=this.Dn}else switch(t.length){case 0:this.has=this.Mn;break;case 1:this.has=this.jn;break;default:this.has=this.Fn}}Li(t){return this.In===t.In&&this.repeat===t.repeat&&this.En===t.En&&this.Sn===t.Sn}Fn(t){return-1!==this.In.indexOf(t)}jn(t){return this.In===t}Mn(t){return 0}Dn(t){return-1===this.In.indexOf(t)}Pn(t){return this.In!==t}Ln(t){return 1}}class Interpretation{get pattern(){const value=this.Un;return""===value?null:value}set pattern(value){null===value?(this.Un="",this.parts=PLATFORM.zi):(this.Un=value,this.parts=this.Vn[value])}constructor(){this.Un="",this.parts=PLATFORM.zi,this.$n={},this.Vn={}}append(t,s){const{$n:i}=this;void 0===i[t]?i[t]=s:i[t]+=s}next(t){const{$n:s}=this;if(void 0!==s[t]){const{Vn:i}=this;void 0===i[t]?i[t]=[s[t]]:i[t].push(s[t]),s[t]=void 0}}}class State{get pattern(){return this.Nn?this.qn[0]:null}constructor(t,...s){this.Hn=t,this.zn=[],this.types=null,this.qn=s,this.Nn=0}Wn(t){const s=this.zn,i=s.length;let n=null;for(let e=0;i>e;++e)if(t.Li((n=s[e]).Hn))return n;return null}append(t,s){const{qn:i}=this;-1===i.indexOf(s)&&i.push(s);let n=this.Wn(t);return null===n&&(n=new State(t,s),this.zn.push(n),t.repeat&&n.zn.push(n)),n}Kn(t,s){const i=[],n=this.zn,e=n.length;let r=0,h=null,o=0,c=0;for(;e>o;++o)if((h=n[o]).Hn.has(t))if(i.push(h),r=h.qn.length,c=0,h.Hn.En)for(;r>c;++c)s.next(h.qn[c]);else for(;r>c;++c)s.append(h.qn[c],t);return i}}class Us{constructor(t){this.text=t;const s=this.Qn=t.length,i=this.Gn=[];for(let n=0;s>n;++n)i.push(new Fs(t[n],0,0,0))}Zn(t){const{Qn:s,Gn:i}=this;for(let n=0;s>n;++n)t(i[n])}}class Vs{constructor(t){this.text="PART",this.Xn=new Fs(t,1,0,1)}Zn(t){t(this.Xn)}}class $s{constructor(t){this.text=t,this.Xn=new Fs(t,0,1,0)}Zn(t){t(this.Xn)}}class Ns{constructor(){this.Jn=0,this.Yn=0,this.symbols=0}}const ISyntaxInterpreter=DI.en("ISyntaxInterpreter").on(t=>t.singleton(qs));class qs{constructor(){this._n=new State(null),this.xn=[this._n]}add(t){let s=0;if(Array.isArray(t)){const i=t.length;for(;i>s;++s)this.add(t[s]);return}let i=this._n;const def=t,n=def.pattern,e=new Ns,r=this.parse(def,e),h=r.length,o=t=>{i=i.append(t,n)};for(s=0;h>s;++s)r[s].Zn(o);i.types=e,i.Nn=1}An(name){const t=new Interpretation;let s=this.xn;const i=name.length;for(let n=0;i>n&&0!==(s=this.te(s,name.charAt(n),t)).length;++n);if(s.sort((t,s)=>{if(!t.Nn)return s.Nn?1:0;if(!s.Nn)return-1;const i=t.types,n=s.types;return i.Jn!==n.Jn?n.Jn-i.Jn:i.Yn!==n.Yn?n.Yn-i.Yn:i.symbols!==n.symbols?n.symbols-i.symbols:0}),s.length>0){const i=s[0];i.Hn.En||t.next(i.pattern),t.pattern=i.pattern}return t}te(t,s,i){const n=[];let e=null;const r=t.length;for(let h=0;r>h;++h)n.push(...(e=t[h]).Kn(s,i));return n}parse(def,t){const s=[],i=def.pattern,n=i.length;let e=0,r=0,h="";for(;n>e;)h=i.charAt(e),-1===def.symbols.indexOf(h)?e===r&&"P"===h&&"PART"===i.slice(e,e+4)?(r=e+=4,s.push(new Vs(def.symbols)),++t.Yn):++e:e!==r?(s.push(new Us(i.slice(r,e))),++t.Jn,r=e):(s.push(new $s(i.slice(r,e+1))),++t.symbols,r=++e);return r!==e&&(s.push(new Us(i.slice(r,e))),++t.Jn),s}}const IAttributePattern=DI.en("IAttributePattern").hn();class DotSeparatedAttributePattern{se(t,s,parts){return new AttrSyntax(t,s,parts[0],parts[1])}ie(t,s,parts){return new AttrSyntax(t,s,parts[0],parts[2])}}attributePattern({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})(DotSeparatedAttributePattern);class RefAttributePattern{ne(t,s,parts){return new AttrSyntax(t,s,"ref",null)}ee(t,s,parts){return new AttrSyntax(t,s,"ref",parts[1])}}attributePattern({pattern:"ref",symbols:""},{pattern:"ref.PART",symbols:"."})(RefAttributePattern);class ColonPrefixedBindAttributePattern{re(t,s,parts){return new AttrSyntax(t,s,parts[0],"bind")}}attributePattern({pattern:":PART",symbols:":"})(ColonPrefixedBindAttributePattern);class AtPrefixedTriggerAttributePattern{he(t,s,parts){return new AttrSyntax(t,s,parts[0],"trigger")}}attributePattern({pattern:"@PART",symbols:"@"})(AtPrefixedTriggerAttributePattern);const IAttributeParser=DI.en("IAttributeParser").on(t=>t.singleton(Hs));Profiler.Bn("AttributeParser");class Hs{constructor(t,s){this.oe=t,this.cache={};const i=this.qn={};s.forEach(s=>{const n=s.t;t.add(n),n.forEach(def=>{i[def.pattern]=s})})}parse(name,value){let t=this.cache[name];void 0===t&&(t=this.cache[name]=this.oe.An(name));const s=t.pattern;return null===s?new AttrSyntax(name,value,name,null):this.qn[s][s](name,value,t.parts)}}Hs.inject=[ISyntaxInterpreter,all(IAttributePattern)],(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.ce=0]="none",LifecycleFlags[LifecycleFlags.Y=524288]="mustEvaluate",LifecycleFlags[LifecycleFlags.le=3]="mutation",LifecycleFlags[LifecycleFlags.ue=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.ae=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.fe=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags.K=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.de=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524256]="from",LifecycleFlags[LifecycleFlags.et=224]="fromFlush",LifecycleFlags[LifecycleFlags.ge=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.we=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.be=128]="fromTick",LifecycleFlags[LifecycleFlags.pe=256]="fromStartTask",LifecycleFlags[LifecycleFlags.Xt=512]="fromStopTask",LifecycleFlags[LifecycleFlags.rt=1024]="fromBind",LifecycleFlags[LifecycleFlags.vs=2048]="fromUnbind",LifecycleFlags[LifecycleFlags.jt=4096]="fromAttach",LifecycleFlags[LifecycleFlags.Wt=8192]="fromDetach",LifecycleFlags[LifecycleFlags.ss=16384]="fromCache",LifecycleFlags[LifecycleFlags.me=32768]="fromDOMEvent",LifecycleFlags[LifecycleFlags.ve=65536]="fromObserverSetter",LifecycleFlags[LifecycleFlags.Ce=131072]="fromBindableHandler",LifecycleFlags[LifecycleFlags.Te=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Zt=1048576]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ot=2097152]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.ye=4194304]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Ae=8388608]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Be=8388608]="allowParentScopeTraversal"})(LifecycleFlags||(LifecycleFlags={})),(function(t){t[t.Oe=0]="None",t[t.Re=1]="Subscriber0",t[t.ke=2]="Subscriber1",t[t.Ie=4]="Subscriber2",t[t.Ee=8]="SubscribersRest",t[t.Se=15]="Any"})(xt||(xt={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.ce=0]="none",DelegationStrategy[DelegationStrategy.Le=1]="capturing",DelegationStrategy[DelegationStrategy.Pe=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(MutationKind){MutationKind[MutationKind.T=1]="instance",MutationKind[MutationKind.bt=2]="collection"})(MutationKind||(MutationKind={})),(function(CollectionKind){CollectionKind[CollectionKind.De=8]="indexed",CollectionKind[CollectionKind.Me=4]="keyed",CollectionKind[CollectionKind.ln=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));const zs=Reflect.defineProperty,Ws={get:void 0,set:void 0,zs:1,je:1};let SetterObserver=class{constructor(t,s){this.$=t,this.N=s}H(){return this.q}W(t,s){const i=this.q;i!==t&&(this.q=t,s&LifecycleFlags.rt||this.C(t,i,s),this.V||(this.$[this.N]=t))}};SetterObserver=l([propertyObserver()],SetterObserver),(function(t){t[t.Fe=250]="UndefinedScope",t[t.Ue=251]="NullScope",t[t.Ve=252]="NilOverrideContext",t[t.$e=253]="NilParentScope"})(ts||(ts={}));class Ks{Ne(t,s){let i=this[s];return void 0===i&&(i=this[s]=new SetterObserver(t,s)),i}}class BindingContext{constructor(t,value){if(this.qe=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(t,value){return new BindingContext(t,value)}static get(t,name,s,i){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let n=t.He;if(s>0){for(;s>0;){if(null===n.ze)return;s--,n=n.ze}return name in n?n:n.We}for(;n&&!(name in n)&&!(n.We&&name in n.We);)n=n.ze;if(n)return name in n?n:n.We;if(i&LifecycleFlags.Be&&null!==t.gs){const n=this.get(t.gs,name,s,i&~LifecycleFlags.Be|LifecycleFlags.ye);if(null!==n)return n}return i&LifecycleFlags.ye?null:t.We||t.He}Ke(){let t=this.Ws;return void 0===t&&(this.Ws=t=new Ks),t}}class Scope{constructor(t,s){this.We=t,this.He=s,this.gs=null}static create(t,s){return new Scope(t,null==s?OverrideContext.create(t,s):s)}static Qe(t){if(null==t)throw Reporter.error(252);return new Scope(t.We,t)}static Ge(t,s){if(null==t)throw Reporter.error(253);return new Scope(s,OverrideContext.create(s,t.He))}}class OverrideContext{constructor(t,s){this.qe=1,this.We=t,this.ze=s}static create(t,s){return new OverrideContext(t,void 0===s?null:s)}Ke(){let t=this.Ws;return void 0===t&&(this.Ws=t=new Ks),t}}const ISignaler=DI.en("ISignaler").on(t=>t.singleton(Qs));class Qs{constructor(){this.Ze=Object.create(null)}Xe(name,t){const s=this.Ze[name];if(void 0!==s)for(const i of s.keys())i.A(void 0,void 0,t|LifecycleFlags.K)}Je(name,t){const s=this.Ze,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}Ye(name,t){const s=this.Ze[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",Z(name){return`${this.name}:${name}`},_e(t){return t.kind===this},xe(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=n,i.register=A,i}},ValueConverterResource={name:"value-converter",Z(name){return`${this.name}:${name}`},_e(t){return t.kind===this},xe(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=n,i.register=B,i}};(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.tr=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.an=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=55]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(t){t[t.sr=202]="NoLocator",t[t.ir=203]="NoBehaviorFound",t[t.nr=204]="BehaviorAlreadyApplied",t[t.er=205]="NoConverterFound",t[t.rr=206]="NoBinding",t[t.hr=207]="NotAFunction",t[t.or=208]="UnknownOperator",t[t.Fe=250]="UndefinedScope",t[t.Ue=251]="NullScope"})(ss||(ss={}));class BindingBehavior{constructor(t,name,s){this.X=38962,this.cr=t,this.name=name,this.lr=s,this.ur=BindingBehaviorResource.Z(this.name),this.ar=hasBind(t),this.dr=hasUnbind(t)}evaluate(t,s,i){return this.cr.evaluate(t,s,i)}assign(t,s,i,value){return this.cr.assign(t,s,i,value)}connect(t,s,i){this.cr.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const n=i.gr;if(!n)throw Reporter.error(202,this);this.ar&&this.cr.bind(t,s,i);const e=this.ur,r=n.get(e);if(!r)throw Reporter.error(203,this);if(null!=i[e])throw Reporter.error(204,this);i[e]=r,r.bind.apply(r,[t,s,i].concat(O(t,s,n,this.lr)))}wr(t,s,i){const n=this.ur;i[n].wr(t,s,i),i[n]=null,this.dr&&this.cr.wr(t,s,i)}accept(t){return t.br(this)}}class ValueConverter{constructor(t,name,s){this.X=36913,this.cr=t,this.name=name,this.lr=s,this.pr=ValueConverterResource.Z(this.name)}evaluate(t,s,i){if(!i)throw Reporter.error(202,this);const n=i.get(this.pr);if(!n)throw Reporter.error(205,this);if("toView"in n){const e=this.lr,r=e.length,h=Array(r+1);h[0]=this.cr.evaluate(t,s,i);for(let n=0;r>n;++n)h[n+1]=e[n].evaluate(t,s,i);return n.Fs.apply(n,h)}return this.cr.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw Reporter.error(202,this);const n=i.get(this.pr);if(!n)throw Reporter.error(205,this);return"fromView"in n&&(value=n.mr.apply(n,[value].concat(O(t,s,i,this.lr)))),this.cr.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const n=i.gr;if(!n)throw Reporter.error(202,this);this.cr.connect(t,s,i);const e=this.lr;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i);const r=n.get(this.pr);if(!r)throw Reporter.error(205,this);const h=r.Ze;if(void 0===h)return;const o=n.get(ISignaler);for(let t=0,s=h.length;s>t;++t)o.Je(h[t],i)}wr(t,s,i){const n=i.gr,e=n.get(this.pr).Ze;if(void 0===e)return;const r=n.get(ISignaler);for(let t=0,s=e.length;s>t;++t)r.Ye(e[t],i)}accept(t){return t.vr(this)}}class Assign{constructor(t,value){this.X=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t.Cr(this)}}class Conditional{constructor(t,s,i){this.X=63,this.assign=PLATFORM.Wi,this.Tr=t,this.yr=s,this.Ar=i}evaluate(t,s,i){return this.Tr.evaluate(t,s,i)?this.yr.evaluate(t,s,i):this.Ar.evaluate(t,s,i)}connect(t,s,i){this.Tr.evaluate(t,s,null)?(this.Tr.connect(t,s,i),this.yr.connect(t,s,i)):(this.Tr.connect(t,s,i),this.Ar.connect(t,s,i))}accept(t){return t.Br(this)}}class AccessThis{constructor(t=0){this.X=1793,this.assign=PLATFORM.Wi,this.connect=PLATFORM.Wi,this.xs=t}evaluate(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);let n=s.He,e=this.xs;for(;e--&&n;)n=n.ze;return 1>e&&n?n.We:void 0}accept(t){return t.Or(this)}}AccessThis.Rr=new AccessThis(0),AccessThis.kr=new AccessThis(1);class AccessScope{constructor(name,t=0){this.X=10082,this.name=name,this.xs=t}evaluate(t,s,i){const name=this.name;return BindingContext.get(s,name,this.xs,t)[name]}assign(t,s,i,value){const name=this.name,n=BindingContext.get(s,name,this.xs,t);return n?n[name]=value:void 0}connect(t,s,i){const name=this.name,n=BindingContext.get(s,name,this.xs,t);i.nt(n,name)}accept(t){return t.Ir(this)}}class AccessMember{constructor(t,name){this.X=9323,this.object=t,this.name=name}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);return null==n?n:n[this.name]}assign(t,s,i,value){let n=this.object.evaluate(t,s,i);return null!==n&&"object"==typeof n||this.object.assign(t,s,i,n={}),n[this.name]=value,value}connect(t,s,i){const n=this.object.evaluate(t,s,null);this.object.connect(t,s,i),n&&i.nt(n,this.name)}accept(t){return t.Er(this)}}class AccessKeyed{constructor(t,s){this.X=9324,this.object=t,this.key=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);if(null!=n)return n[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof n&&null!==n){this.key.connect(t,s,i);const e=this.key.evaluate(t,s,null);Array.isArray(n)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;for(let t=0;s>t;++t){const s=value.charCodeAt(t);if(48>s||s>57)return 0}return 1})(e)||i.nt(n,e)}}accept(t){return t.Sr(this)}}class CallScope{constructor(name,t,s=0){this.X=1448,this.assign=PLATFORM.Wi,this.name=name,this.lr=t,this.xs=s}evaluate(t,s,i){const n=O(t,s,i,this.lr),e=BindingContext.get(s,this.name,this.xs,t),r=R(t,e,this.name);if(r)return r.apply(e,n)}connect(t,s,i){const n=this.lr;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i)}accept(t){return t.Lr(this)}}class CallMember{constructor(t,name,s){this.X=1161,this.assign=PLATFORM.Wi,this.object=t,this.name=name,this.lr=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i),e=O(t,s,i,this.lr),r=R(t,n,this.name);if(r)return r.apply(n,e)}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),R(t&~LifecycleFlags.Y,n,this.name)){const n=this.lr;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i)}}accept(t){return t.Pr(this)}}class CallFunction{constructor(t,s){this.X=1162,this.assign=PLATFORM.Wi,this.Dr=t,this.lr=s}evaluate(t,s,i){const n=this.Dr.evaluate(t,s,i);if("function"==typeof n)return n.apply(null,O(t,s,i,this.lr));if(t&LifecycleFlags.Y||null!=n)throw Reporter.error(207,this)}connect(t,s,i){const n=this.Dr.evaluate(t,s,null);if(this.Dr.connect(t,s,i),"function"==typeof n){const n=this.lr;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i)}}accept(t){return t.Mr(this)}}class Binary{constructor(t,s,i){this.X=46,this.assign=PLATFORM.Wi,this.jr=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw Reporter.error(208,this)}connect(t,s,i){const n=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.jr&&!n||"||"===this.jr&&n||this.right.connect(t,s,i)}Fr(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}Ur(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}Vr(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}$r(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}Nr(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}qr(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}Hr(t,s,i){const n=this.right.evaluate(t,s,i);return"function"==typeof n?this.left.evaluate(t,s,i)instanceof n:0}zr(t,s,i){const n=this.right.evaluate(t,s,i);return null!==n&&"object"==typeof n?this.left.evaluate(t,s,i)in n:0}Wr(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}Kr(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}Qr(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}Gr(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}Zr(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}Xr(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}Jr(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}Yr(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}_r(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.xr(this)}}class Unary{constructor(t,s){this.X=39,this.assign=PLATFORM.Wi,this.jr=t,this.cr=s,this.evaluate=this[t]}evaluate(t,s,i){throw Reporter.error(208,this)}connect(t,s,i){this.cr.connect(t,s,i)}th(t,s,i){this.cr.evaluate(t,s,i)}sh(t,s,i){return typeof this.cr.evaluate(t,s,i)}ih(t,s,i){return!this.cr.evaluate(t,s,i)}Kr(t,s,i){return-this.cr.evaluate(t,s,i)}Wr(t,s,i){return+this.cr.evaluate(t,s,i)}accept(t){return t.nh(this)}}class PrimitiveLiteral{constructor(value){this.X=17925,this.assign=PLATFORM.Wi,this.connect=PLATFORM.Wi,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.eh(this)}}PrimitiveLiteral.rh=new PrimitiveLiteral(void 0),PrimitiveLiteral.hh=new PrimitiveLiteral(null),PrimitiveLiteral.oh=new PrimitiveLiteral(1),PrimitiveLiteral.lh=new PrimitiveLiteral(0),PrimitiveLiteral.uh=new PrimitiveLiteral("");class HtmlLiteral{constructor(parts){this.X=51,this.assign=PLATFORM.Wi,this.parts=parts}evaluate(t,s,i){const n=this.parts;let e="";for(let r=0,h=n.length;h>r;++r){const value=n[r].evaluate(t,s,i);null!=value&&(e+=value)}return e}connect(t,s,i){for(let n=0,e=this.parts.length;e>n;++n)this.parts[n].connect(t,s,i)}accept(t){return t.ah(this)}}class ArrayLiteral{constructor(t){this.X=17955,this.assign=PLATFORM.Wi,this.elements=t}evaluate(t,s,i){const n=this.elements,e=n.length,r=Array(e);for(let h=0;e>h;++h)r[h]=n[h].evaluate(t,s,i);return r}connect(t,s,i){const n=this.elements;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i)}accept(t){return t.fh(this)}}ArrayLiteral.uh=new ArrayLiteral(PLATFORM.zi);class ObjectLiteral{constructor(t,s){this.X=17956,this.assign=PLATFORM.Wi,this.keys=t,this.values=s}evaluate(t,s,i){const n={},e=this.keys,r=this.values;for(let h=0,o=e.length;o>h;++h)n[e[h]]=r[h].evaluate(t,s,i);return n}connect(t,s,i){const n=this.values;for(let e=0,r=this.keys.length;r>e;++e)n[e].connect(t,s,i)}accept(t){return t.dh(this)}}ObjectLiteral.uh=new ObjectLiteral(PLATFORM.zi,PLATFORM.zi);class Template{constructor(t,s){this.X=17958,this.assign=PLATFORM.Wi,this.gh=t,this.J=void 0===s?PLATFORM.zi:s}evaluate(t,s,i){const n=this.J,e=this.gh;let r=e[0];for(let h=0,o=n.length;o>h;++h)r+=n[h].evaluate(t,s,i),r+=e[h+1];return r}connect(t,s,i){const n=this.J;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i),e++}accept(t){return t.wh(this)}}Template.uh=new Template([""]);class TaggedTemplate{constructor(t,s,i,n){this.X=1197,this.assign=PLATFORM.Wi,this.gh=t,this.gh.raw=s,this.Dr=i,this.J=void 0===n?PLATFORM.zi:n}evaluate(t,s,i){const n=this.J,e=n.length,r=Array(e);for(let h=0,o=e;o>h;++h)r[h]=n[h].evaluate(t,s,i);const h=this.Dr.evaluate(t,s,i);if("function"!=typeof h)throw Reporter.error(207,this);return h.apply(null,[this.gh].concat(r))}connect(t,s,i){const n=this.J;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i);this.Dr.connect(t,s,i)}accept(t){return t.bh(this)}}class ArrayBindingPattern{constructor(t){this.X=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.ph(this)}}class ObjectBindingPattern{constructor(t,s){this.X=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.mh(this)}}class BindingIdentifier{constructor(name){this.X=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.vh(this)}}const Gs={}.toString;class ForOfStatement{constructor(t,s){this.X=55,this.assign=PLATFORM.Wi,this.Ch=t,this.Th=s}evaluate(t,s,i){return this.Th.evaluate(t,s,i)}count(t){return Xs[Gs.call(t)](t)}yh(t,s){Zs[Gs.call(t)](t,s)}connect(t,s,i){this.Ch.connect(t,s,i),this.Th.connect(t,s,i)}accept(t){return t.Ah(this)}}class Interpolation{constructor(parts,t){this.X=24,this.assign=PLATFORM.Wi,this.parts=parts,this.J=void 0===t?PLATFORM.zi:t,this.Bh=this.J.length>1,this.Oh=this.J[0]}evaluate(t,s,i){if(this.Bh){const n=this.J,parts=this.parts;let e=parts[0];for(let r=0,h=n.length;h>r;++r)e+=n[r].evaluate(t,s,i),e+=parts[r+1];return e}{const parts=this.parts;return parts[0]+this.Oh.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.Rh(this)}}BindingBehavior.prototype.X=38962,ValueConverter.prototype.X=36913,Assign.prototype.X=8208,Conditional.prototype.X=63,AccessThis.prototype.X=1793,AccessScope.prototype.X=10082,AccessMember.prototype.X=9323,AccessKeyed.prototype.X=9324,CallScope.prototype.X=1448,CallMember.prototype.X=1161,CallFunction.prototype.X=1162,Binary.prototype.X=46,Unary.prototype.X=39,PrimitiveLiteral.prototype.X=17925,HtmlLiteral.prototype.X=51,ArrayLiteral.prototype.X=17955,ObjectLiteral.prototype.X=17956,Template.prototype.X=17958,TaggedTemplate.prototype.X=1197,ArrayBindingPattern.prototype.X=65556,ObjectBindingPattern.prototype.X=65557,BindingIdentifier.prototype.X=65558,ForOfStatement.prototype.X=55,Interpolation.prototype.X=24;const Zs={kh(t,s){for(let i=0,n=t.length;n>i;++i)s(t,i,t[i])},Ih(t,s){const i=Array(t.size);let n=-1;for(const s of t.entries())i[++n]=s;Zs["kh"](i,s)},Eh(t,s){const i=Array(t.size);let n=-1;for(const s of t.keys())i[++n]=s;Zs["kh"](i,s)},Sh(t,s){const i=Array(t);for(let s=0;t>s;++s)i[s]=s;Zs["kh"](i,s)},Lh(t,s){},Ph(t,s){}},Xs={kh:t=>t.length,Ih:t=>t.size,Eh:t=>t.size,Sh:t=>t,Lh:()=>0,Ph:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Fs=2]="toView",BindingMode[BindingMode.mr=4]="fromView",BindingMode[BindingMode.Dh=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(State){State[State.ce=0]="none",State[State.Mh=1]="isBinding",State[State.jh=2]="isBound",State[State.Fh=4]="isAttaching",State[State.Uh=8]="isAttached",State[State.Vh=16]="isMounted",State[State.$h=32]="isDetaching",State[State.Nh=64]="isUnbinding",State[State.qh=128]="isCached",State[State.Hh=256]="isContainerless"})(is||(is={})),(function(Hooks){Hooks[Hooks.ce=1]="none",Hooks[Hooks.zh=2]="hasCreated",Hooks[Hooks.Wh=4]="hasBinding",Hooks[Hooks.Kh=8]="hasBound",Hooks[Hooks.Qh=16]="hasAttaching",Hooks[Hooks.Gh=32]="hasAttached",Hooks[Hooks.Zh=64]="hasDetaching",Hooks[Hooks.Xh=128]="hasDetached",Hooks[Hooks.Jh=256]="hasUnbinding",Hooks[Hooks.Yh=512]="hasUnbound",Hooks[Hooks._h=1024]="hasRender",Hooks[Hooks.xh=2048]="hasCaching"})(Hooks||(Hooks={}));const IRenderable=DI.en("IRenderable").hn(),IViewFactory=DI.en("IViewFactory").hn(),Js=Object.freeze(Object.create(null)),ILifecycle=DI.en("ILifecycle").on(t=>t.singleton(Ys));class Ys{constructor(){this.so=0,this.io=0,this.no=0,this.eo=0,this.ro=this,this.ho=this,this.oo=this,this.co=this,this.lo=this,this.uo=this,this.ao=this,this.fo=this,this.do=this,this.wo=this,this.bo=this,this.po=this,this.mo=this,this.vo=this,this.Co=this,this.To=this,this.yo=this,this.Ao=this,this.Bo=this,this.Oo=this,this.Ro=null,this.Vi=Promise.resolve(),this.ko=0,this.Io=0,this.Eo=0,this.So=0,this.Lo=0,this.Po=0,this.Do=0,this.Mo=0,this.jo=0,this.Fo=0,this.ut=Js,this.flush=PLATFORM.Wi,this.Uo=Js,this.connect=PLATFORM.Wi,this.Vo=Js,this.dt=PLATFORM.Wi,this.$o=Js,this.bound=PLATFORM.Wi,this.No=Js,this.qo=PLATFORM.Wi,this.Ho=Js,this.zo=PLATFORM.Wi,this.Wo=Js,this.Ko=PLATFORM.Wi,this.Qo=Js,this.Go=PLATFORM.Wi,this.Zo=Js,this.ls=PLATFORM.Wi,this.Xo=Js,this.Jo=PLATFORM.Wi,this.Yo=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}_o(t){null===this.Yo&&(this.Yo=new AggregateLifecycleTask),this.Yo.xo(t)}tc(t){null!==this.Yo&&(this.Yo===t?this.Yo=null:this.Yo.sc(t))}B(t){return this.ro===this&&(this.Ro=this.Vi.then(()=>{this.ic(LifecycleFlags.ge)})),null===t.ut&&(t.ut=Js,this.ho.ut=t,this.ho=t,++this.ko),this.Ro}ic(t){for(t|=LifecycleFlags.we;this.ko>0;){let s,i=this.ro.ut;this.ro=this.ho=this,this.ko=0;do{s=i.ut,i.ut=null,i.flush(t),i=s}while(i!==Js);if(t&LifecycleFlags.ot)break}}us(){++this.so}as(t){null===t.$o&&(t.$o=Js,this.fo.$o=t,this.fo=t,++this.So)}nc(t){null===t.Uo&&(t.Uo=Js,this.co.Uo=t,this.co=t,++this.Io),null===t.Vo&&(t.Vo=Js,this.uo.Vo=t,this.uo=t,++this.Eo)}ec(t){if(this.Io>0){this.Io=0;let s,i=this.oo.Uo;this.oo=this.co=this;do{i.connect(t),s=i.Uo,i.Uo=null,i=s}while(i!==Js)}}rc(t){for(t&LifecycleFlags.pe&&this.ic(t|LifecycleFlags.we);this.Eo>0;){this.Eo=0;let s,i=this.lo.Vo;this.lo=this.uo=this;do{i.dt(t),s=i.Vo,i.Vo=null,i=s}while(i!==Js)}}ds(t){if(0==--this.so)return null===this.Yo||this.Yo.done?(this.hc(t),LifecycleTask.done):(this.Yo.oc=this,this.Yo)}hc(t){for(t&LifecycleFlags.pe&&this.ic(t|LifecycleFlags.we);this.So>0;){this.So=0;let s,i=this.ao.$o;this.ao=this.fo=this;do{i.bound(t),s=i.$o,i.$o=null,i=s}while(i!==Js)}}ms(){++this.eo}Cs(t){null===t.Xo&&(t.Xo=Js,this.Oo.Xo=t,this.Oo=t,++this.Fo)}ys(t){if(0==--this.eo)return null===this.Yo||this.Yo.done?(this.cc(t),LifecycleTask.done):(this.Yo.oc=this,this.Yo)}cc(t){for(;this.Fo>0;){this.Fo=0;let s,i=this.Bo.Xo;this.Bo=this.Oo=this;do{i.Jo(t),s=i.Xo,i.Xo=null,i=s}while(i!==Js)}}Mt(){++this.io}Ht(t){null===t.No&&(t.No=Js,this.wo.No=t,this.wo=t,++this.Lo)}Ut(t){null===t.Ho&&(t.Ho=Js,this.po.Ho=t,this.po=t,++this.Po)}Vt(t){if(0==--this.io)return null===this.Yo||this.Yo.done?(this.lc(t),LifecycleTask.done):(this.Yo.oc=this,this.Yo)}lc(t){if(this.ic(t|LifecycleFlags.we),this.Lo>0){this.Lo=0;let s,i=this.do.No;this.do=this.wo=this;do{i.qo(t),s=i.No,i.No=null,i=s}while(i!==Js)}if(this.ec(LifecycleFlags.Y),this.Po>0){this.Po=0;let s,i=this.bo.Ho;this.bo=this.po=this;do{i.zo(t),s=i.Ho,i.Ho=null,i=s}while(i!==Js)}}zt(){++this.no}Jt(t){if(null===t.Wo&&(t.Wo=Js,this.vo.Wo=t,this.vo=t,++this.Do),null!==t.No){let s=this.do,i=s.No;for(;i!==t;)i=(s=i).No;s.No=i.No,i.No=null,this.wo===i&&(this.wo=this),--this.Lo}}Qt(t){null===t.Qo&&(t.Qo=Js,this.To.Qo=t,this.To=t,++this.Mo)}uc(t){null===t.Zo&&(t.Zo=Js,this.Ao.Zo=t,this.Ao=t,++this.jo)}Gt(t){if(0==--this.no)return null===this.Yo||this.Yo.done?(this.ac(t),LifecycleTask.done):(this.Yo.oc=this,this.Yo)}ac(t){if(this.ic(t|LifecycleFlags.et|LifecycleFlags.ot),this.Do>0){this.Do=0;let s,i=this.mo.Wo;this.mo=this.vo=this;do{i.Ko(t),s=i.Wo,i.Wo=null,i=s}while(i!==Js)}if(this.Mo>0){this.Mo=0;let s,i=this.Co.Qo;this.Co=this.To=this;do{i.Go(t),s=i.Qo,i.Qo=null,i=s}while(i!==Js)}if(this.jo>0){this.ms(),this.jo=0;let s,i=this.yo.Zo;this.yo=this.Ao=this;do{i.ls(t),s=i.Zo,i.Zo=null,i=s}while(i!==Js);this.ys(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.fc=PLATFORM.Wi,this.currentView=null,this.Uh=0,this.jh=0,this.dc=null,this.gc=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}wc(value,t){this.gc.done?value instanceof Promise?(this.bc(new _s(this,value)),this.pc()):this.mc(value,t):(value instanceof Promise?this.bc(new _s(this,value)):this.bc(value),this.gc.vc()&&this.gc.cancel())}fs(t,s){this.scope=s,this.jh=1,null!==this.currentView&&this.currentView.bs(t,s)}Ft(t){this.Uh=1,null!==this.currentView&&this.currentView.Nt(t)}Kt(t){this.Uh=0,null!==this.currentView&&this.currentView._t(t)}Ts(t){this.jh=0,null!==this.currentView&&this.currentView.ls(t)}ts(t){this.currentView=null}bc(t){null===this.dc&&(this.dc=[]),this.dc.push(t)}mc(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let n,e=this.currentView;null===e?n=LifecycleTask.done:($lifecycle.uc(e),$lifecycle.zt(),e._t(s),n=$lifecycle.Gt(s)),i.xo(n),null===(e=this.currentView=t)?n=LifecycleTask.done:(this.jh&&($lifecycle.us(),e.bs(s,this.scope),$lifecycle.ds(s)),this.Uh?($lifecycle.Mt(),e.Nt(s),n=$lifecycle.Vt(s)):n=LifecycleTask.done),i.xo(n),i.done?(this.gc=LifecycleTask.done,this.fc()):(this.gc=i,this.gc.Cc().then(()=>{this.fc(),this.pc()}).catch(t=>{throw t}))}pc(){if(null!==this.dc&&this.dc.length>0){const t=this.dc.pop();this.dc.length=0,_s.is(t)?this.gc=t.start():this.mc(t,LifecycleFlags.Te)}else this.gc=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,vc:()=>0,cancel(){},Cc:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.oc=null,this.resolve=null,this.Tc=[],this.yc=null}xo(t){t.done||(this.done=0,this.Tc.push(t),t.Cc().then(()=>{this.Ac()}).catch(t=>{throw t}))}sc(t){if(t.done){const s=this.Tc.indexOf(t);-1!==s&&this.Tc.splice(s,1)}0===this.Tc.length&&null!==this.oc&&(this.oc.tc(this),this.oc=null)}vc(){return this.done?0:this.Tc.every(t=>t.vc())}cancel(){this.vc()&&(this.Tc.forEach(t=>{t.cancel()}),this.done=0)}Cc(){return null===this.yc&&(this.yc=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.yc}Ac(){this.done||this.Tc.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.oc&&(this.oc.ac(LifecycleFlags.Te),this.oc.cc(LifecycleFlags.Te),this.oc.hc(LifecycleFlags.Te),this.oc.lc(LifecycleFlags.Te)),this.oc.tc(this),null!==this.resolve&&this.resolve()}}class _s{constructor(t,s){this.Bc=t,this.done=0,this.Oc=0,this.Vi=s}static is(t){return"start"in t}start(){return this.Oc?LifecycleTask.done:(this.Vi=this.Vi.then(t=>(this.Rc(t),t)),this)}vc(){return!this.done}cancel(){this.vc()&&(this.Oc=1)}Cc(){return this.Vi}Rc(value){this.Oc||(this.done=1,this.Bc.wc(value,LifecycleFlags.Te))}}const xs=[],ti=[];let si=-1;k(-1);const{oneTime,Fs:ii,mr:ni}=BindingMode,ei=ii|oneTime;let Binding=class{constructor(t,s,i,mode,n,e){this.ps=null,this.Bs=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.Uo=null,this.Vo=null,this.$scope=null,this.gr=e,this.mode=mode,this.st=n,this.kc=t,this.target=s,this.Ic=i}Ec(value,t){this.targetObserver.W(value,(t|=this.Sc)|LifecycleFlags.K)}Lc(value,t){this.kc.assign((t|=this.Sc)|LifecycleFlags.de,this.$scope,this.gr,value)}A(t,s,i){if(!(2&this.$state))return;const n=this.kc,$scope=this.$scope,e=this.gr;if(i|=this.Sc,this.mode===BindingMode.mr&&(i&=~LifecycleFlags.K,i|=LifecycleFlags.de),i&LifecycleFlags.K){const mode=this.mode,s=this.targetObserver.H();return(10082!==n.X||this._>1)&&(t=n.evaluate(i,$scope,e)),t!==s&&this.Ec(t,i),void(0==(mode&oneTime)&&(this.version++,n.connect(i,$scope,this),this.unobserve(0)))}if(!(i&LifecycleFlags.de))throw Reporter.error(15,LifecycleFlags[i]);t!==n.evaluate(i,$scope,e)&&this.Lc(t,i)}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.rt)}this.$state|=1,this.Sc=t&LifecycleFlags.Ae,this.$scope=s;let i=this.kc;hasBind(i)&&i.bind(t,s,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&ni?this.st.tt(this.target,this.Ic):this.st.Pc(this.target,this.Ic)),targetObserver.bind&&targetObserver.bind(t),i=this.kc,mode&ei&&this.Ec(i.evaluate(t,s,this.gr),t),mode&ii&&this.$lifecycle.nc(this),mode&ni&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64,this.Sc=LifecycleFlags.ce;const s=this.kc;hasUnbind(s)&&s.wr(t,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.wr&&targetObserver.wr(t),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(t){2&this.$state&&this.kc.connect((t|=this.Sc)|LifecycleFlags.Y,this.$scope,this)}dt(t){2&this.$state&&this.Ec(this.kc.evaluate((t|=this.Sc)|LifecycleFlags.Y,this.$scope,this.gr),t)}};Binding=l([connectable()],Binding);class Call{constructor(t,s,i,n,e){this.ps=null,this.Bs=null,this.$state=0,this.gr=e,this.kc=t,this.targetObserver=n.tt(s,i)}Dc(t){const s=this.$scope.He;Object.assign(s,t);const i=this.kc.evaluate(LifecycleFlags.Y,this.$scope,this.gr);for(const i in t)delete s[i];return i}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.rt)}this.$state|=1,this.$scope=s;const i=this.kc;hasBind(i)&&i.bind(t,s,this),this.targetObserver.W(t=>this.Dc(t),t),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64;const s=this.kc;hasUnbind(s)&&s.wr(t,this.$scope,this),this.$scope=null,this.targetObserver.W(null,t),this.$state&=-67}nt(t,s){}A(t,s,i){}}const IExpressionParser=DI.en("IExpressionParser").on(t=>t.singleton(ri));class ri{constructor(){this.Mc=Object.create(null),this.jc=Object.create(null),this.Fc=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.Fc[t];return void 0===i&&(i=this.Fc[t]=this.Uc(t,s)),i}case 539:{let i=this.jc[t];return void 0===i&&(i=this.jc[t]=this.Uc(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.uh;let i=this.Mc[t];return void 0===i&&(i=this.Mc[t]=this.Uc(t,s)),i}}}cache(t){const{jc:s,Mc:i,Fc:n}=this;for(const e in t){const r=t[e];switch(r.X){case 24:n[e]=r;break;case 55:s[e]=r;break;default:i[e]=r}}}Uc(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),PLATFORM.zi):new AccessScope(parts[0]);let n=1;for(;parts.length>n;){const t=parts[n];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),PLATFORM.zi):new AccessMember(i,parts[n]),n++}return i}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Oe=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Vc=1280]="IsRef",BindingType[BindingType.$c=512]="IsIterator",BindingType[BindingType.Nc=256]="IsCustom",BindingType[BindingType.qc=128]="IsFunction",BindingType[BindingType.Hc=64]="IsEvent",BindingType[BindingType.zc=32]="IsProperty",BindingType[BindingType.Wc=16]="IsCommand",BindingType[BindingType.Kc=48]="IsPropertyCommand",BindingType[BindingType.Qc=80]="IsEventCommand",BindingType[BindingType.Gc=6]="DelegationStrategyDelta",BindingType[BindingType.Zc=15]="Command",BindingType[BindingType.Xc=49]="OneTimeCommand",BindingType[BindingType.Jc=50]="ToViewCommand",BindingType[BindingType.Yc=51]="FromViewCommand",BindingType[BindingType._c=52]="TwoWayCommand",BindingType[BindingType.xc=53]="BindCommand",BindingType[BindingType.tl=86]="TriggerCommand",BindingType[BindingType.sl=87]="CaptureCommand",BindingType[BindingType.il=88]="DelegateCommand",BindingType[BindingType.nl=153]="CallCommand",BindingType[BindingType.el=26]="OptionsCommand",BindingType[BindingType.rl=539]="ForCommand",BindingType[BindingType.hl=284]="CustomCommand"})(BindingType||(BindingType={}));const{Fs:hi,oneTime:oi}=BindingMode;class MultiInterpolationBinding{constructor(t,s,i,n,mode,e){this.ps=null,this.Bs=null,this.$state=0,this.$scope=null,this.ol=s,this.gr=e,this.mode=mode,this.st=t,this.target=i,this.Ic=n;const r=s.J,parts=this.parts=Array(r.length);for(let h=0,o=r.length;o>h;++h)parts[h]=new InterpolationBinding(r[h],s,i,n,mode,t,e,0===h)}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,n=parts.length;n>i;++i)parts[i].bs(t,s)}ls(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].ls(t)}}let InterpolationBinding=class{constructor(t,s,i,n,mode,e,r,h){this.$state=0,this.ol=s,this.cl=h,this.mode=mode,this.gr=r,this.st=e,this.kc=t,this.target=i,this.Ic=n,this.targetObserver=e.Pc(i,n)}Ec(value,t){this.targetObserver.W(value,t|LifecycleFlags.K)}A(t,s,i){if(!(2&this.$state))return;const n=this.targetObserver.H(),e=this.ol.evaluate(i,this.$scope,this.gr);e!==n&&this.Ec(e,i),0==(this.mode&oi)&&(this.version++,this.kc.connect(i,this.$scope,this),this.unobserve(0))}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t)}this.$state|=2,this.$scope=s;const i=this.kc;i.bind&&i.bind(t,s,this),this.cl&&this.Ec(this.ol.evaluate(t,s,this.gr),t),this.mode&hi&&i.connect(t,s,this)}ls(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.kc;s.wr&&s.wr(t,this.$scope,this),this.$scope=null,this.unobserve(1)}};InterpolationBinding=l([connectable()],InterpolationBinding);let LetBinding=class{constructor(t,s,i,n,toViewModel=0){this.ps=null,this.Bs=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=null,this.gr=n,this.st=i,this.kc=t,this.target=null,this.Ic=s,this.toViewModel=toViewModel}A(t,s,i){if(2&this.$state){if(!(i&LifecycleFlags.K))throw Reporter.error(15,i);{const{target:t,Ic:s}=this,n=t[s],e=this.kc.evaluate(i,this.$scope,this.gr);e!==n&&(t[s]=e)}}}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.rt)}this.$state|=1,this.$scope=s,this.target=this.toViewModel?s.We:s.He;const i=this.kc;i.bind&&i.bind(t,s,this),this.target[this.Ic]=this.kc.evaluate(LifecycleFlags.rt,s,this.gr),this.kc.connect(t,s,this),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64;const s=this.kc;s.wr&&s.wr(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}};LetBinding=l([connectable()],LetBinding);class Ref{constructor(t,s,i){this.ps=null,this.Bs=null,this.$state=0,this.gr=i,this.kc=t,this.target=s}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.rt)}this.$state|=1,this.$scope=s;const i=this.kc;hasBind(i)&&i.bind(t,s,this),this.kc.assign(t,this.$scope,this.gr,this.target),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64,this.kc.evaluate(t,this.$scope,this.gr)===this.target&&this.kc.assign(t,this.$scope,this.gr,null);const s=this.kc;hasUnbind(s)&&s.wr(t,this.$scope,this),this.$scope=null,this.$state&=-67}nt(t,s){}A(t,s,i){}}let CollectionLengthObserver=class{constructor(t,s){this.$=t,this.N=s,this.q=t[s]}H(){return this.$[this.N]}lt(t){this.$[this.N]=t}dt(t){this.C(this.$[this.N],this.q,t),this.q=this.$[this.N]}subscribe(t){this.g(t)}unsubscribe(t){this.p(t)}};CollectionLengthObserver=l([targetObserver()],CollectionLengthObserver);const ci=Array.prototype,li=ci.push,ui=ci.unshift,ai=ci.pop,fi=ci.shift,di=ci.splice,gi=ci.reverse,wi=ci.sort,bi={push:li,unshift:ui,pop:ai,shift:fi,splice:di,reverse:gi,sort:wi},pi=["push","unshift","pop","shift","splice","reverse","sort"],mi={push(){const t=this.wt;if(void 0===t)return li.apply(this,arguments);const s=this.length,i=arguments.length;if(0===i)return s;this.length=t.at.length=s+i;let n=s;for(;this.length>n;)this[n]=arguments[n-s],t.at[n]=-2,n++;return t.C("push",arguments,LifecycleFlags.ue),this.length},unshift(){const t=this.wt;if(void 0===t)return ui.apply(this,arguments);const s=arguments.length,i=Array(s);let n=0;for(;s>n;)i[n++]=-2;ui.apply(t.at,i);const e=ui.apply(this,arguments);return t.C("unshift",arguments,LifecycleFlags.ue),e},pop(){const t=this.wt;if(void 0===t)return ai.call(this);const s=t.at,i=ai.call(this);return s[s.length-1]>-1&&ai.call(s.pt,i),ai.call(s),t.C("pop",arguments,LifecycleFlags.ue),i},shift(){const t=this.wt;if(void 0===t)return fi.call(this);const s=t.at,i=fi.call(this);return s[0]>-1&&fi.call(s.pt,i),fi.call(s),t.C("shift",arguments,LifecycleFlags.ue),i},splice(t,s){const i=this.wt;if(void 0===i)return di.apply(this,arguments);const n=i.at;if(s>0){let i=isNaN(t)?0:t;const to=i+s;for(;to>i;)n[i]>-1&&di.call(n.pt,this[i]),i++}const e=arguments.length;if(e>2){const i=e-2,r=Array(i);let h=0;for(;i>h;)r[h++]=-2;di.call(n,t,s,...r)}else 2===e&&di.call(n,t,s);const r=di.apply(this,arguments);return i.C("splice",arguments,LifecycleFlags.ue),r},reverse(){const t=this.wt;if(void 0===t)return gi.call(this);const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const i=s-n-1,e=this[n],r=t.at[n],h=t.at[i];this[n]=this[i],t.at[n]=h,this[i]=e,t.at[i]=r,n++}return t.C("reverse",arguments,LifecycleFlags.ue),this},sort(t){const s=this.wt;if(void 0===s)return wi.call(this,t);const i=this.length;if(2>i)return this;z(this,s.at,0,i,q);let n=0;for(;i>n&&void 0!==this[n];)n++;return void 0!==t&&"function"==typeof t||(t=N),z(this,s.at,0,n,t),s.C("sort",arguments,LifecycleFlags.ue),this}},vi={ll:1,zs:0,je:1},def=Object.defineProperty;for(const t of pi)def(mi[t],"observing",{value:1,ll:0,je:0,zs:0});enableArrayObservation();let ArrayObserver=class{constructor(t,s){this.O=t,s.wt=this,this.bt=s,this.gt()}};ArrayObserver=l([collectionObserver(9)],ArrayObserver);const Ci=Map.prototype,Ti=Ci.set,yi=Ci.clear,Ai=Ci.delete,Bi={set:Ti,clear:yi,delete:Ai},Oi=["set","clear","delete"],Ri={set(t,value){const s=this.wt;if(void 0===s)return Ti.call(this,t,value);const i=this.size;if(Ti.call(this,t,value),this.size===i){let i=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==value&&(s.at[i]=-2),this;i++}return this}return s.at[i]=-2,s.C("set",arguments,LifecycleFlags.ue),this},clear(){const t=this.wt;if(void 0===t)return yi.call(this);if(this.size>0){const s=t.at;let i=0;for(const t of this.keys())s[i]>-1&&s.pt.push(t),i++;yi.call(this),s.length=0,t.C("clear",arguments,LifecycleFlags.ue)}},delete(value){const t=this.wt;if(void 0===t)return Ai.call(this,value);if(0===this.size)return 0;let s=0;const i=t.at;for(const t of this.keys()){if(t===value)return i[s]>-1&&i.pt.push(t),i.splice(s,1),Ai.call(this,value);s++}return t.C("delete",arguments,LifecycleFlags.ue),0}},ki={ll:1,zs:0,je:1},Ii=Object.defineProperty;for(const t of Oi)Ii(Ri[t],"observing",{value:1,ll:0,je:0,zs:0});enableMapObservation();let MapObserver=class{constructor(t,s){this.O=t,s.wt=this,this.bt=s,this.gt()}};MapObserver=l([collectionObserver(6)],MapObserver);const Ei=Set.prototype,Si=Ei.add,Li=Ei.clear,Pi=Ei.delete,Di={add:Si,clear:Li,delete:Pi},Mi=["add","clear","delete"],ji={add(value){const t=this.wt;if(void 0===t)return Si.call(this,value);const s=this.size;return Si.call(this,value),this.size===s?this:(t.at[s]=-2,t.C("add",arguments,LifecycleFlags.ue),this)},clear(){const t=this.wt;if(void 0===t)return Li.call(this);if(this.size>0){const s=t.at;let i=0;for(const t of this.keys())s[i]>-1&&s.pt.push(t),i++;Li.call(this),s.length=0,t.C("clear",arguments,LifecycleFlags.ue)}},delete(value){const t=this.wt;if(void 0===t)return Pi.call(this,value);if(0===this.size)return 0;let s=0;const i=t.at;for(const t of this.keys()){if(t===value)return i[s]>-1&&i.pt.push(t),i.splice(s,1),Pi.call(this,value);s++}return t.C("delete",arguments,LifecycleFlags.ue),0}},Fi={ll:1,zs:0,je:1},Ui=Object.defineProperty;for(const t of Mi)Ui(ji[t],"observing",{value:1,ll:0,je:0,zs:0});enableSetObservation();let SetObserver=class{constructor(t,s){this.O=t,s.wt=this,this.bt=s,this.gt()}};SetObserver=l([collectionObserver(7)],SetObserver);const Vi={ul:0,al:0};let CustomSetterObserver=class{constructor(t,s,i){this.$=t,this.N=s,this.q=this.oldValue=void 0,this.fl=i,this.V=0}W(t){this.fl.set.call(this.$,t),this.q!==t&&(this.oldValue=this.q,this.q=t,this.C(t,this.oldValue,LifecycleFlags.K))}subscribe(t){this.V||this.dl(),this.g(t)}unsubscribe(t){this.p(t)}dl(){this.V=1,this.q=this.$[this.N],Reflect.defineProperty(this.$,this.N,{set:t=>{this.W(t)}})}};CustomSetterObserver=l([subscriberCollection(MutationKind.T)],CustomSetterObserver);let GetterObserver=class{constructor(t,s,i,n,e,r){this.$=s,this.N=i,this.gl=0,this.q=this.oldValue=void 0,this.wl=[],this.bl=[],this.pl=t,this.ml=0,this.fl=n,this.vl=new Proxy(s,(function t(s,i){return{get(n,e,r){if(i.Cl(e))return Reflect.get(n,e,r);switch($i.call(n)){case"[object Array]":if(i.Tl(s.yl(n)),"length"===e)return Reflect.get(n,e,n);case"[object Map]":if(i.Tl(s.Al(n)),"size"===e)return Reflect.get(n,e,n);case"[object Set]":if(i.Tl(s.Bl(n)),"size"===e)return Reflect.get(n,e,n);default:i.Ol(s.tt(n,e))}return(function(s,i,n,e){const value=Reflect.get(s,i,s);return"function"==typeof value?s[i].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(n,e))})(n,e,s,i)}}})(e,this)),Reflect.defineProperty(s,i,{get:()=>this.H()})}Ol(t){-1===this.wl.indexOf(t)&&this.wl.push(t)}Tl(t){-1===this.bl.indexOf(t)&&this.bl.push(t)}H(){return this.q=0===this.ml||this.gl?Reflect.apply(this.fl.get,this.vl,PLATFORM.zi):Reflect.apply(this.fl.get,this.$,PLATFORM.zi),this.q}subscribe(t){this.g(t),1==++this.ml&&this.Rl(1)}unsubscribe(t){this.p(t),0==--this.ml&&this.kl()}A(){const t=this.q,s=this.Rl(0);t!==s&&this.C(s,t,LifecycleFlags.K)}U(){const t=this.q,s=this.Rl(0);t!==s&&this.C(s,t,LifecycleFlags.et|LifecycleFlags.K)}Rl(t){const s=!this.pl.ul||t;return s&&(this.kl(),this.gl=1),this.q=this.H(),s&&(this.wl.forEach(t=>{t.subscribe(this)}),this.bl.forEach(t=>{t.At(this)}),this.gl=0),this.q}Cl(t){return!this.gl||"$observers"===t}kl(){this.wl.forEach(t=>{t.unsubscribe(this)}),this.wl.length=0,this.bl.forEach(t=>{t.Bt(this)}),this.bl.length=0}};GetterObserver=l([subscriberCollection(MutationKind.T)],GetterObserver);const $i={}.toString,IDirtyChecker=DI.en("IDirtyChecker").on(t=>t.singleton(Ni)),DirtyCheckSettings={Il:6,disabled:0,warn:1,El:0,Sl(){this.Il=6,this.disabled=0,this.warn=1,this.El=0}};class Ni{constructor(){this.Ll=0,this.Pl=[]}Dl(t,s){if(DirtyCheckSettings.El)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,s)}Ml(t){this.Pl.push(t),1===this.Pl.length&&PLATFORM.Di.add(this.jl,this)}removeProperty(t){this.Pl.splice(this.Pl.indexOf(t),1),0===this.Pl.length&&PLATFORM.Di.remove(this.jl,this)}jl(t){if(DirtyCheckSettings.disabled)return;if(++this.Ll<DirtyCheckSettings.Il)return;this.Ll=0;const s=this.Pl,i=s.length;let n,e=0;for(;i>e;++e)(n=s[e]).Fl()&&n.flush(LifecycleFlags.be)}}let DirtyCheckProperty=class{constructor(t,s,i){this.$=s,this.N=i,this.Ul=t}Fl(){return this.oldValue!==this.$[this.N]}flush(t){const s=this.$[this.N];this.C(s,this.oldValue,t|LifecycleFlags.K),this.oldValue=s}subscribe(t){this.v()||(this.oldValue=this.$[this.N],this.Ul.Ml(this)),this.g(t)}unsubscribe(t){this.p(t)&&!this.v()&&this.Ul.removeProperty(this)}};DirtyCheckProperty=l([propertyObserver()],DirtyCheckProperty);const qi=PLATFORM.Wi;class PrimitiveObserver{constructor(t,s){this.Vl=1,"length"===s?(this.$=t,this.H=this.$l):this.H=this.Nl}$l(){return this.$.length}Nl(){}}PrimitiveObserver.prototype.W=qi,PrimitiveObserver.prototype.subscribe=qi,PrimitiveObserver.prototype.unsubscribe=qi,PrimitiveObserver.prototype.G=qi;class PropertyAccessor{constructor(t,s){this.$=t,this.N=s}H(){return this.$[this.N]}W(value){this.$[this.N]=value}}const Hi={}.toString,IObserverLocator=DI.en("IObserverLocator").hn(),ITargetObserverLocator=DI.en("ITargetObserverLocator").hn(),ITargetAccessorLocator=DI.en("ITargetAccessorLocator").hn();class zi{constructor(t,s,i,n){this.ql=[],this.Ul=s,this.O=t,this.Hl=i,this.zl=n}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}tt(t,s){if((function(t){return 1==t.qe})(t))return t.Ke().Ne(t,s);let i,n=t.Ws;return n&&s in n?n[s]:((i=this.Wl(t,s)).Vl||(void 0===n&&(n=this.Kl(t)),n[s]=i),i)}Ql(t){this.ql.push(t)}Pc(t,s){return this.zl.Gl(t)?this.Hl.Zl(t,s)?this.tt(t,s):this.zl.Pc(this.O,t,s):new PropertyAccessor(t,s)}yl(t){return W(this.O,t)}Al(t){return K(this.O,t)}Bl(t){return Q(this.O,t)}Kl(t){return t.Ws||this.Xl(t)}Xl(t){const value={};return Reflect.defineProperty(t,"$observers",{zs:0,je:0,ll:0,value})||Reporter.write(0,t),value}Jl(t,s,i){for(let n=0,e=this.ql.length;e>n;n++){const e=this.ql[n].tt(t,s,i);if(e)return e}return null}Wl(t,s){if(!(t instanceof Object))return new PrimitiveObserver(t,s);let i=0;if(this.Hl.Gl(t)){const n=this.Hl.tt(this.O,this,t,s);if(null!==n)return n;if(null!==n)return n;i=1}switch(Hi.call(t)){case"[object Array]":return"length"===s?this.yl(t).yt():this.Ul.Dl(t,s);case"[object Map]":return"size"===s?this.Al(t).yt():this.Ul.Dl(t,s);case"[object Set]":return"size"===s?this.Bl(t).yt():this.Ul.Dl(t,s)}const n=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(t,s);if(n&&(n.get||n.set)){if(n.get&&n.get.tt)return n.get.tt(t);return this.Jl(t,s,n)||(i?this.Ul.Dl(t,s):(function(t,s,i,n,e,r){if(0==r.je)return s.Dl(n,e);if(r.get){const s=n.constructor.computed&&n.constructor.computed[e]||Vi;return r.set?s.al?new GetterObserver(s,n,e,r,t,i):new CustomSetterObserver(n,e,r):new GetterObserver(s,n,e,r,t,i)}throw Reporter.error(18,e)})(this,this.Ul,this.O,t,s,n))}return new SetterObserver(t,s)}}zi.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Wi=PLATFORM.Wi;let SelfObserver=class{constructor(t,s,i){this.$=t,this.N=s,this.q=t[s],this.js=i in t?t[i].bind(t):Wi}H(){return this.q}W(t,s){const i=this.q;if(i!==t&&(this.q=t,!(s&LifecycleFlags.rt))){const n=this.js(t,i);void 0!==n&&(this.q=t=n),this.C(t,i,s)}}};SelfObserver=l([propertyObserver()],SelfObserver);const{oneTime:Ki,Fs:Qi,mr:Gi,Dh:Zi}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.Yl=i.mode,i.mode=this.mode}wr(t,s,i){i.mode=i.Yl,i.Yl=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Ki)}}BindingBehaviorResource.xe("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Qi)}}BindingBehaviorResource.xe("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Gi)}}BindingBehaviorResource.xe("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Zi)}}BindingBehaviorResource.xe("twoWay",TwoWayBindingBehavior);const Xi={},Ji=BindingMode.mr;class DebounceBindingBehavior{bind(t,s,i,n=200){let e,r,h;i instanceof Binding?(e="handleChange",h=Z,r=i.mode&Ji?LifecycleFlags.de:LifecycleFlags.K):(e="callSource",h=G,r=LifecycleFlags.K),i.kt=i[e],i.kt._l=e,i[e]=h,i.Ot={Et:r,It:n,Rt:0,oldValue:Xi}}wr(t,s,i){i[i.kt._l]=i.kt,i.kt=null,PLATFORM.global.clearTimeout(i.Ot.Rt),i.Ot=null}}BindingBehaviorResource.xe("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.xl=t}bind(t,s,i,...n){if(!i.Ec)throw Reporter.error(11);if(4===arguments.length){const name=n[0];this.xl.Je(name,i),i.tu=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.xl.Je(t[s],i);i.tu=t}}}wr(t,s,i){const name=i.tu;if(i.tu=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.xl.Ye(t[s],i)}else this.xl.Ye(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.xe("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,s,i,n=200){let e;i.Pt=i[e=i instanceof Binding?i.mode===BindingMode.Dh?"updateSource":"updateTarget":"callSource"],i.Pt._l=e,i[e]=X,i.St={It:n,Lt:0,Rt:-1}}wr(t,s,i){i[i.Pt._l]=i.Pt,i.Pt=null,PLATFORM.global.clearTimeout(i.St.Rt),i.St=null}}BindingBehaviorResource.xe("throttle",ThrottleBindingBehavior);const Yi="custom-element",_i="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.su="ra",TargetedInstructionType.iu="rb",TargetedInstructionType.nu="rc",TargetedInstructionType.eu="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.ol="rf",TargetedInstructionType.ru="rg",TargetedInstructionType.hu="rh",TargetedInstructionType.ou="ri",TargetedInstructionType.cu="rj",TargetedInstructionType.lu="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.en("createInterface").hn(),xi=Object.freeze({required:1,compiler:"default"}),tn=Object.freeze({required:0,compiler:"default"});class sn{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=tn,this.bindables=PLATFORM.Dt,this.instructions=PLATFORM.zi,this.dependencies=PLATFORM.zi,this.surrogates=PLATFORM.zi,this.containerless=0,this.shadowOptions=null,this.hasSlots=0}}const nn=["name","template","cache","build","containerless","shadowOptions","hasSlots"],en=["instructions","dependencies","surrogates"],CustomAttributeResource=(Profiler.Bn("AttachLifecycle"),Profiler.Bn("BindLifecycle"),Profiler.Bn("RenderLifecycle"),{name:_i,Z:_,_e(t){return t.kind===this},xe(t,s){const i=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.zi:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Fs:defaultBindingMode,Ps:void 0===def.Ps?0:def.Ps,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},t.bindables,def.bindables)}})("string"==typeof t?{name:t}:t,i),e=i.prototype;return i.kind=CustomAttributeResource,i.description=n,i.register=Ct,e.uu=mt,e.bs=ft,e.Nt=x,e._t=it,e.ls=wt,e.ns=rt,e.Bs=null,e.ps=null,e.xt=null,e.qt=null,e.Zo=null,e.$scope=null,e.$hooks=0,e.$state=0,"flush"in e&&(e.ut=null),"binding"in e&&(e.$hooks|=4),"bound"in e&&(e.$hooks|=8,e.$o=null),"unbinding"in e&&(e.$hooks|=256),"unbound"in e&&(e.$hooks|=512,e.Xo=null),"created"in e&&(e.$hooks|=2),"attaching"in e&&(e.$hooks|=16),"attached"in e&&(e.$hooks|=32,e.Ho=null),"detaching"in e&&(e.$hooks|=64),"caching"in e&&(e.$hooks|=2048),"detached"in e&&(e.$hooks|=128,e.Qo=null),i}}),INode=DI.en("INode").hn(),IRenderLocation=DI.en("IRenderLocation").hn(),IDOM=DI.en("IDOM").hn(),NodeSequence={empty:{childNodes:PLATFORM.zi,firstChild:null,lastChild:null,fu:()=>PLATFORM.zi,insertBefore(t){},du(t){},remove(){}}};class If{constructor(t,s,i){this.value=0,this.Bc=i,this.gu=null,this.wu=null,this.bu=t,this.pu=null,this.location=s}fs(t){const s=this.mu(t);this.Bc.wc(s,t),this.Bc.fs(t,this.$scope)}Ft(t){this.Bc.Ft(t)}Kt(t){this.Bc.Kt(t)}Ts(t){this.Bc.Ts(t)}ts(t){null!==this.pu&&this.pu.release(t)&&(this.pu=null),null!==this.wu&&this.wu.release(t)&&(this.wu=null),this.Bc.ts(t)}vu(t,s,i){if(i&LifecycleFlags.et){const t=this.mu(i);this.Bc.wc(t,i)}else this.$lifecycle.B(this).catch(t=>{throw t})}flush(t){const s=this.mu(t);this.Bc.wc(s,t)}mu(t){return this.value?this.pu=this.Cu(this.pu,this.bu,t):null!==this.gu?this.wu=this.Cu(this.wu,this.gu,t):null}Cu(t,s,i){return null===t&&(t=s.create()),t.Tu(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],l([bindable],If.prototype,"value",void 0),CustomAttributeResource.xe({name:"if",isTemplateController:1},If);class Else{constructor(t){this.yu=t}link(t){t.gu=this.yu}}Else.inject=[IViewFactory],CustomAttributeResource.xe({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.yu=i,this.Au=0,this.location=t,this.Bu=null,this.Ou=s,this.Ru=[]}fs(t){this.ku()}bound(t){let s=this.Ou.ws;for(;null!==s;){if(s.target===this&&"items"===s.Ic){this.Iu=s.kc;break}s=s.ps}this.Eu=this.Iu.Ch.evaluate(t,this.$scope,null),this.Su(null,t)}Ft(t){const{Ru:s,location:i}=this;for(let n=0,e=s.length;e>n;++n){const e=s[n];e.Tu(i),e.Nt(t)}}Kt(t){const{Ru:s}=this;for(let i=0,n=s.length;n>i;++i){const n=s[i];n._t(t),n.release(t)}}Jo(t){this.ku();const{Ru:s}=this;for(let i=0,n=s.length;n>i;++i)s[i].ls(t)}Lu(t,s,i){this.ku(),this.Su(null,i|LifecycleFlags.K)}U(t){this.Su(t,LifecycleFlags.et|LifecycleFlags.K)}Su(t,s){const{Ru:i,$lifecycle}=this;if(2&this.$state){const{Eu:n,$scope,yu:e,Iu:r,Pu:h}=this,o=i.length,c=r.count(h);if(c>o){i.length=c;for(let t=o;c>t;++t)i[t]=e.create()}else if(o>c){$lifecycle.zt();for(let t=c,n=i[t];o>t;n=i[++t])n.release(s),n._t(s);$lifecycle.Gt(s),$lifecycle.ms();for(let t=c,n=i[t];o>t;n=i[++t])n.ls(s);if($lifecycle.ys(s),i.length=c,0===c)return}else if(0===c)return;$lifecycle.us(),r.yh(h,null===t?(t,e,r)=>{const h=i[e];h.bs(s,Scope.Ge($scope,h.$scope&&h.$scope.We[n]===r?h.$scope.We:BindingContext.create(n,r)))}:(e,r,h)=>{const o=i[r];o.bs(s,Scope.Ge($scope,!o.$scope||t[r]!==r&&o.$scope.We[n]!==h?BindingContext.create(n,h):o.$scope.We))}),$lifecycle.ds(s)}if(8&this.$state){const{location:n}=this;if($lifecycle.Mt(),null===t)for(let t=0,e=i.length;e>t;++t){const e=i[t];e.Tu(n),e.Nt(s)}else for(let e=0,r=i.length;r>e;++e)if(t[e]!==e){const t=i[e];t.Tu(n),t.Nt(s)}$lifecycle.Vt(s)}}ku(){const t=this.Bu;if(3&this.$state){const s=this.Bu=getCollectionObserver(this.$lifecycle,this.Pu);t!==s&&t&&t.Bt(this),s&&s.At(this)}else t&&t.Bt(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],l([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.xe({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,s){this.yu=t,this.currentView=this.yu.create(),this.currentView.Tu(s)}fs(t){this.currentView.bs(t|LifecycleFlags.Be,this.$scope)}Ft(t){this.currentView.Nt(t)}Kt(t){this.currentView._t(t)}Ts(t){this.currentView.ls(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.xe({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.yu=t,this.currentView=this.yu.create(),this.currentView.Tu(s)}vu(){2&this.$state&&this.Du(LifecycleFlags.Ce)}fs(t){this.Du(t)}Ft(t){this.currentView.Nt(t)}Kt(t){this.currentView._t(t)}Ts(t){this.currentView.ls(t)}Du(t){const s=Scope.Ge(this.$scope,this.value);this.currentView.bs(t,s)}}With.inject=[IViewFactory,IRenderLocation],l([bindable],With.prototype,"value",void 0),CustomAttributeResource.xe({name:"with",isTemplateController:1},With);const IProjectorLocator=DI.en("IProjectorLocator").hn(),CustomElementResource={name:Yi,Z:J,_e(t){return t.kind===this},Mu:Y,xe(t,s=null){if(!t)throw Reporter.error(70);const i=null===s?class{}:s,n=buildTemplateDefinition(i,t),e=i.prototype;return i.kind=CustomElementResource,i.description=n,i.register=yt,e.uu=vt,e.bs=dt,e.Nt=tt,e._t=nt,e.ls=bt,e.ns=ht,e.Bs=null,e.ps=null,e.xt=null,e.qt=null,e.Zo=null,e.$scope=null,e.$hooks=0,e.ws=null,e.As=null,e.$t=null,e.Yt=null,e.qo=ct,e.Ko=lt,e.No=null,e.Wo=null,e.rs=null,"flush"in e&&(e.ut=null),"binding"in e&&(e.$hooks|=4),"bound"in e&&(e.$hooks|=8,e.$o=null),"unbinding"in e&&(e.$hooks|=256),"unbound"in e&&(e.$hooks|=512,e.Xo=null),"render"in e&&(e.$hooks|=1024),"created"in e&&(e.$hooks|=2),"attaching"in e&&(e.$hooks|=16),"attached"in e&&(e.$hooks|=32,e.Ho=null),"detaching"in e&&(e.$hooks|=64),"caching"in e&&(e.$hooks|=2048),"detached"in e&&(e.$hooks|=128,e.Qo=null),i}},rn={mode:"open"},ISanitizer=DI.en("ISanitizer").on(t=>t.singleton(class{ju(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.Fu=t}Fs(t){return null==t?null:this.Fu.ju(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.xe("sanitize",SanitizeValueConverter);class hn{constructor($lifecycle,cache){this.ws=null,this.As=null,this.ps=null,this.Bs=null,this.$t=null,this.Yt=null,this.qt=null,this.xt=null,this.No=null,this.Wo=null,this.Zo=null,this.$state=0,this.$scope=null,this.os=0,this.$lifecycle=$lifecycle,this.cache=cache}Tu(t){this.os=0,this.location=t}release(t){return this.os=1,8&this.$state?this.cache.Uu(this):!!this.Ko(t)}Vu(t){this.$scope=t,this.bs=Bt,this.ls=Ot}}class on{constructor(name,template,t){this.$u=0,this.Nu=-1,this.cache=null,this.O=t,this.name=name,this.template=template}qu(t,s){t&&("*"===t?t=on.Hu:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Nu&&s||(this.Nu=t)),this.cache=this.Nu>0?[]:null,this.$u=this.Nu>0}Uu(t){return null!==this.cache&&this.Nu>this.cache.length}cs(t){return this.Uu(t)?(t.ns(LifecycleFlags.ce),this.cache.push(t),1):0}create(){const cache=this.cache;let t;if(null!==cache&&cache.length>0)return(t=cache.pop()).$state&=-129,t;if(t=new hn(this.O,this),this.template.Es(t),!t.$nodes)throw Reporter.error(90);return t}}on.Hu=65535,(t=>{t.bs=gt,t.ls=pt,t.Nt=st,t._t=et,t.ns=ot,t.qo=ut,t.Ko=at})(hn.prototype);const ITemplateCompiler=DI.en("ITemplateCompiler").hn();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.ce=1]="none",ViewCompileFlags[ViewCompileFlags.zu=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Wu=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.en("ITemplateFactory").hn();class CompiledTemplate{constructor(dom,t,s,i){this.dom=dom,this.Ku=t,this.yu=s,this.Qu=i}Es(t,host,parts){const s=t.$nodes=this.yu.Gu();t.$context=this.Qu,this.Qu.Es(t,s.fu(),this.Ku,host,parts)}}const cn={Qu:null,dom:null,Es(t){t.$nodes=NodeSequence.empty,t.$context=null}},ln="default",IInstructionRenderer=DI.en("IInstructionRenderer").hn(),IRenderer=DI.en("IRenderer").hn(),IRenderingEngine=DI.en("IRenderingEngine").on(t=>t.singleton(un));class un{constructor(t,s,i,n){this.Zu=new Map,this.Xu=t,this.Ju=s,this.Yu=new Map,this.O=i,this._u=new Map,this.xu=n.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}Ss(dom,t,s,i){if(!t)return null;let n=this._u.get(t);return n||(n=this.ta(dom,t,s,i),this._u.set(t,n)),n}sa(dom,t,s){if(!t)return null;let i=this.Yu.get(t);if(!i){const n=buildTemplateDefinition(null,t),template=this.ta(dom,n,s,null);(i=new on(n.name,template,this.O)).qu(n.cache,1),this.Yu.set(t,i)}return i}Os(t,s){let i=this.Zu.get(t);i||(i=gn.create(t),this.Zu.set(t,i)),i.ia(s,this.O)}ta(dom,t,s,i){if(null===s&&(s=this.Xu),null!==t.template){const n=createRenderContext(dom,s,t.dependencies,i);if(t.build.required){const s=t.build.compiler||ln,compiler=this.xu[s];if(void 0===compiler)throw Reporter.error(20,s);t=compiler.compile(dom,t,new RuntimeCompilationResources(n),ViewCompileFlags.zu)}return this.Ju.create(n,t)}return cn}}un.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class an{constructor(){this.T=null}Hs(t){this.T=t}resolve(t,s){if(void 0===this.T)throw Reporter.error(50);return this.T}G(){this.T=null}}class fn{Hs(t,parts){this.yu=t,this.na=parts||PLATFORM.Dt}resolve(t,s){const i=this.yu;if(null==i)throw Reporter.error(50);if(!i.name||!i.name.length)throw Reporter.error(51);const n=this.na[i.name];if(n){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.sa(dom,n,s)}return i}G(){this.yu=null,this.na=PLATFORM.Dt}}let dn=class{constructor(t,customElement){this.Ct=0,this.children=null,this.customElement=customElement,this.O=t,this.V=0}H(){return this.V||(this.V=1,this.customElement.rs.ea(()=>{this.ra()}),this.children=Rt(this.customElement.rs.children)),this.children}W(t){}flush(t){this.C(this.children,void 0,t|LifecycleFlags.K),this.Ct=0}subscribe(t){this.g(t)}unsubscribe(t){this.p(t)}ra(){this.children=Rt(this.customElement.rs.children),"$childrenChanged"in this.customElement&&this.customElement.ha(),this.O.B(this).catch(t=>{throw t}),this.Ct=1}};dn=l([subscriberCollection(MutationKind.T)],dn);class gn{constructor(){}static create(t){const s=new gn;return s.bindables=t.description.bindables,s}ia(t,s){t.$lifecycle=s,"$projector"in t?this.oa(s,t):this.ca(t)}oa(t,s){this.ca(s).la=new dn(t,s),Reflect.defineProperty(s,"$children",{zs:0,get(){return this.Ws.la.H()}})}ca(t){const s={},bindables=this.bindables,i=Object.getOwnPropertyNames(bindables);for(let n=0,e=i.length;e>n;++n){const name=i[n];s[name]=new SelfObserver(t,name,bindables[name].js),kt(t,name)}return Reflect.defineProperty(t,"$observers",{zs:0,value:s}),s}}Profiler.Bn("Aurelia.start"),Profiler.Bn("Aurelia.stop");class Aurelia{constructor(t=DI.sn()){this.Xu=t,this.ua=[],this.aa=[],this.fa=[],this.da=0,this.ga=null,Registration.T(Aurelia,this).register(t,Aurelia)}register(...t){return this.Xu.register(...t),this}app(t){const host=t.host;let dom,component;if(this.Xu.has(IDOM,0))dom=this.Xu.get(IDOM);else{const s=this.Xu.get(IDOMInitializer);dom=s.initialize(t)}const s=t.component;CustomElementResource._e(s)?(this.Xu.register(s),component=this.Xu.get(CustomElementResource.Z(s.description.name))):component=s;const i=()=>{if(host.$au=this,!this.ua.includes(component)){this.ga=component,this.ua.push(component);const t=this.Xu.get(IRenderingEngine),s=this.Xu.get(IProjectorLocator);component.uu(dom,s,t,host,this.Xu)}component.bs(LifecycleFlags.pe|LifecycleFlags.rt,null),component.Nt(LifecycleFlags.pe|LifecycleFlags.jt)};return this.aa.push(i),this.fa.push(()=>{component._t(LifecycleFlags.Xt|LifecycleFlags.Wt),component.ls(LifecycleFlags.Xt|LifecycleFlags.vs),host.$au=null}),this.da&&i(),this}root(){return this.ga}start(){for(const t of this.aa)t();return this.da=1,this}stop(){this.da=0;for(const t of this.fa)t();return this}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.en("IDOMInitializer").hn();class wn{constructor(t){const s=this.wa={};t.forEach(t=>{s[t.Ks]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Es(dom,t,s,targets,i,host,parts){const n=i.instructions,e=this.wa;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);for(let i=0,r=targets.length;r>i;++i){const instructions=n[i],r=targets[i];for(let i=0,n=instructions.length;n>i;++i){const n=instructions[i];e[n.type].Es(dom,t,s,r,n,parts)}}if(host){const n=i.surrogates;for(let i=0,r=n.length;r>i;++i){const r=n[i];e[r.type].Es(dom,t,s,host,r,parts)}}}}wn.inject=[all(IInstructionRenderer)];let bn=class{Es(dom,t,s,i,n){i[n.to]=n.value}};bn=l([instructionRenderer("re")],bn);let pn=class{constructor(t){this.ba=t}Es(dom,t,s,i,n){const e=t.qs(s,i,n,null,null,i,1),component=t.get(J(n.res)),r=t.get(IRenderer).wa,h=t.get(IProjectorLocator),o=n.instructions;component.uu(dom,h,this.ba,i,t,n);for(let i=0,n=o.length;n>i;++i){const n=o[i];r[n.type].Es(dom,t,s,component,n)}addBindable(s,component),addAttachable(s,component),e.G()}};pn.inject=[IRenderingEngine],pn=l([instructionRenderer("ra")],pn);let mn=class{constructor(t){this.ba=t}Es(dom,t,s,i,n){const e=t.qs(s,i,n),component=t.get(_(n.res)),r=t.get(IRenderer).wa,h=n.instructions;component.uu(this.ba);for(let i=0,n=h.length;n>i;++i){const n=h[i];r[n.type].Es(dom,t,s,component,n)}addBindable(s,component),addAttachable(s,component),e.G()}};mn.inject=[IRenderingEngine],mn=l([instructionRenderer("rb")],mn);let vn=class{constructor(t){this.ba=t}Es(dom,t,s,i,n,parts){const e=this.ba.sa(dom,n.def,t),r=t.qs(s,i,n,e,parts,dom.pa(i),0),component=t.get(_(n.res)),h=t.get(IRenderer).wa,o=n.instructions;component.uu(this.ba),n.link&&component.link(s.Yt);for(let i=0,n=o.length;n>i;++i){const n=o[i];h[n.type].Es(dom,t,s,component,n)}addBindable(s,component),addAttachable(s,component),r.G()}};vn.inject=[IRenderingEngine],vn=l([instructionRenderer("rc")],vn);let Cn=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){dom.remove(i);const e=n.instructions,toViewModel=n.toViewModel;for(let i=0,n=e.length;n>i;++i){const n=e[i],r=ensureExpression(this.ma,n.from,48);addBindable(s,new LetBinding(r,n.to,this.st,t,toViewModel))}}};Cn.inject=[IExpressionParser,IObserverLocator],Cn=l([instructionRenderer("rd")],Cn);let Tn=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){const e=ensureExpression(this.ma,n.from,153);addBindable(s,new Call(e,i,n.to,this.st,t))}};Tn.inject=[IExpressionParser,IObserverLocator],Tn=l([instructionRenderer("rh")],Tn);let yn=class{constructor(t){this.ma=t}Es(dom,t,s,i,n){const e=ensureExpression(this.ma,n.from,1280);addBindable(s,new Ref(e,i,t))}};yn.inject=[IExpressionParser],yn=l([instructionRenderer("rj")],yn);let An=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){let bindable;const e=ensureExpression(this.ma,n.from,2048);addBindable(s,bindable=e.Bh?new MultiInterpolationBinding(this.st,e,i,n.to,BindingMode.Fs,t):new InterpolationBinding(e.Oh,e,i,n.to,BindingMode.Fs,this.st,t,1))}};An.inject=[IExpressionParser,IObserverLocator],An=l([instructionRenderer("rf")],An);let Bn=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){const e=ensureExpression(this.ma,n.from,48|n.mode);addBindable(s,new Binding(e,i,n.to,n.mode,this.st,t))}};Bn.inject=[IExpressionParser,IObserverLocator],Bn=l([instructionRenderer("rg")],Bn);let On=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){const e=ensureExpression(this.ma,n.from,539);addBindable(s,new Binding(e,i,n.to,BindingMode.Fs,this.st,t))}};On.inject=[IExpressionParser,IObserverLocator],On=l([instructionRenderer("rk")],On);const DefaultComponents=[zi,Ys,wn],DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],DefaultRenderers=[Bn,On,Tn,yn,An,bn,pn,mn,vn,Cn],Rn={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),sn(){return this.register(DI.sn())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Fs,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.mr,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.Dh,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}ns=Object.freeze({CallFunction,get ExpressionKind(){return ExpressionKind},connects:t=>32==(32&t.X),observes:t=>64==(64&t.X),callsFunction:t=>128==(128&t.X),hasAncestor:t=>256==(256&t.X),isAssignable:t=>8192==(8192&t.X),isLeftHandSide:t=>1024==(1024&t.X),isPrimary:t=>512==(512&t.X),isResource:t=>32768==(32768&t.X),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral,ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,get BindingMode(){return BindingMode},get Binding(){return Binding},Call,connectable,IExpressionParser,get BindingType(){return BindingType},MultiInterpolationBinding,get InterpolationBinding(){return InterpolationBinding},get LetBinding(){return LetBinding},Ref,get ArrayObserver(){return ArrayObserver},enableArrayObservation,disableArrayObservation(){for(const t of pi)1==ci[t].V&&def(ci,t,Object.assign({},vi,{value:bi[t]}))},get MapObserver(){return MapObserver},enableMapObservation,disableMapObservation(){for(const t of Oi)1==Ci[t].V&&Ii(Ci,t,Object.assign({},ki,{value:Bi[t]}))},get SetObserver(){return SetObserver},enableSetObservation,disableSetObservation(){for(const t of Mi)1==Ei[t].V&&Ui(Ei,t,Object.assign({},Fi,{value:Di[t]}))},BindingContext,Scope,OverrideContext,collectionObserver,get CollectionLengthObserver(){return CollectionLengthObserver},computed:t=>(function(s,i){(s.computed||(s.computed={}))[i]=t}),get CustomSetterObserver(){return CustomSetterObserver},get GetterObserver(){return GetterObserver},IDirtyChecker,get DirtyCheckProperty(){return DirtyCheckProperty},DirtyCheckSettings,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,PrimitiveObserver,PropertyAccessor,propertyObserver,get SelfObserver(){return SelfObserver},get SetterObserver(){return SetterObserver},ISignaler,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior:t=>s=>BindingBehaviorResource.xe(t,s),BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute:t=>s=>CustomAttributeResource.xe(t,s),CustomAttributeResource,dynamicOptions:t=>void 0===t?Tt:Tt(t),templateController:t=>s=>CustomAttributeResource.xe("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s),If,Else,Repeat,Replaceable,With,containerless:t=>void 0===t?At:At(t),customElement:t=>s=>CustomElementResource.xe(t,s),CustomElementResource,IProjectorLocator,useShadowDOM(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:rn;return"function"==typeof t?s(t):s},valueConverter:t=>s=>ValueConverterResource.xe(t,s),ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable,Aurelia,IDOMInitializer,IfRegistration:If,ElseRegistration:Else,RepeatRegistration:Repeat,ReplaceableRegistration:Replaceable,WithRegistration:With,SanitizeValueConverterRegistration:SanitizeValueConverter,DebounceBindingBehaviorRegistration:DebounceBindingBehavior,OneTimeBindingBehaviorRegistration:OneTimeBindingBehavior,ToViewBindingBehaviorRegistration:ToViewBindingBehavior,FromViewBindingBehaviorRegistration:FromViewBindingBehavior,SignalBindingBehaviorRegistration:SignalBindingBehavior,ThrottleBindingBehaviorRegistration:ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration:TwoWayBindingBehavior,BasicResources:DefaultResources,ObserverLocatorRegistration:zi,LifecycleRegistration:Ys,RendererRegistration:wn,BasicConfiguration:Rn,buildTemplateDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},ITargetedInstruction,get TargetedInstructionType(){return TargetedInstructionType},INode,IRenderLocation,IDOM,NodeSequence,CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,AggregateLifecycleTask,CompositionCoordinator,get Hooks(){return Hooks},ILifecycle,IRenderable,IViewFactory,LifecycleTask,PromiseTask:class{constructor(t,s){this.done=0,this.Oc=0,this.js=s,this.Vi=t.then(value=>{if(1!=this.Oc)return this.done=1,this.js(value),value})}vc(){return!this.done}cancel(){this.vc()&&(this.Oc=1)}Cc(){return this.Vi}},get State(){return is},get CollectionKind(){return CollectionKind},get DelegationStrategy(){return DelegationStrategy},get LifecycleFlags(){return LifecycleFlags},get MutationKind(){return MutationKind},stringifyLifecycleFlags(t){const s=[];return t&LifecycleFlags.Y&&s.push("mustEvaluate"),t&LifecycleFlags.ue&&s.push("isCollectionMutation"),t&LifecycleFlags.ae&&s.push("isInstanceMutation"),t&LifecycleFlags.fe&&s.push("updateTargetObserver"),t&LifecycleFlags.K&&s.push("updateTargetInstance"),t&LifecycleFlags.de&&s.push("updateSourceExpression"),t&LifecycleFlags.ge&&s.push("fromAsyncFlush"),t&LifecycleFlags.we&&s.push("fromSyncFlush"),t&LifecycleFlags.pe&&s.push("fromStartTask"),t&LifecycleFlags.Xt&&s.push("fromStopTask"),t&LifecycleFlags.rt&&s.push("fromBind"),t&LifecycleFlags.vs&&s.push("fromUnbind"),t&LifecycleFlags.jt&&s.push("fromAttach"),t&LifecycleFlags.Wt&&s.push("fromDetach"),t&LifecycleFlags.ss&&s.push("fromCache"),t&LifecycleFlags.me&&s.push("fromDOMEvent"),t&LifecycleFlags.ve&&s.push("fromObserverSetter"),t&LifecycleFlags.Ce&&s.push("fromBindableHandler"),t&LifecycleFlags.Te&&s.push("fromLifecycleTask"),t&LifecycleFlags.Zt&&s.push("parentUnmountQueued"),t&LifecycleFlags.ot&&s.push("doNotUpdateDOM"),t&LifecycleFlags.ye&&s.push("isTraversingParentScope"),t&LifecycleFlags.Be&&s.push("allowParentScopeTraversal"),s.join("|")},instructionRenderer,ensureExpression,addAttachable,addBindable,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,get ViewCompileFlags(){return ViewCompileFlags}});const BindingCommandResource={name:"binding-command",Z(name){return`${this.name}:${name}`},_e(t){return t.kind===this},xe(t,s){const i=s,n="string"==typeof t?{name:t,target:null}:t;return i.kind=BindingCommandResource,i.description=n,i.register=It,i}};class OneTimeBindingCommand{constructor(){this.va=49}compile(t){return new OneTimeBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("one-time",OneTimeBindingCommand);class ToViewBindingCommand{constructor(){this.va=50}compile(t){return new ToViewBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("to-view",ToViewBindingCommand);class FromViewBindingCommand{constructor(){this.va=51}compile(t){return new FromViewBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("from-view",FromViewBindingCommand);class TwoWayBindingCommand{constructor(){this.va=52}compile(t){return new TwoWayBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("two-way",TwoWayBindingCommand);const kn=["","$1","$2","","$4","","$6"],In={bind:BindingMode.Fs,Ca:BindingMode.oneTime,Ta:BindingMode.Fs,ya:BindingMode.mr,Aa:BindingMode.Dh};class DefaultBindingCommand{constructor(){this.va=53,this.$1=OneTimeBindingCommand.prototype.compile,this.$2=ToViewBindingCommand.prototype.compile,this.$4=FromViewBindingCommand.prototype.compile,this.$6=TwoWayBindingCommand.prototype.compile}compile(t){return this[kn[getMode(t)]](t)}}BindingCommandResource.xe("bind",DefaultBindingCommand);class CallBindingCommand{constructor(){this.va=153}compile(t){return new CallBindingInstruction(t.cr,getTarget(t,1))}}BindingCommandResource.xe("call",CallBindingCommand);class ForBindingCommand{constructor(){this.va=539}compile(t){return new IteratorBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("for",ForBindingCommand),(function(t){t[t.Ba=0]="Reset",t[t.Oa=511]="Ancestor",t[t.Ra=512]="This",t[t.Scope=1024]="Scope",t[t.ka=2048]="Member",t[t.Ia=4096]="Keyed"})(es||(es={})),(function(t){t[t.Ea=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.Sa=64]="LogicalOR",t[t.La=128]="LogicalAND",t[t.Pa=192]="Equality",t[t.Da=256]="Relational",t[t.Ma=320]="Additive",t[t.ja=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.Fa=449]="LeftHandSide",t[t.Ua=450]="Primary",t[t.Unary=451]="Unary"})(rs||(rs={})),(function(t){t[t.Va=1572864]="EOF",t[t.$a=1048576]="ExpressionTerminal",t[t.Na=524288]="AccessScopeTerminal",t[t.qa=262144]="ClosingToken",t[t.Ha=131072]="OpeningToken",t[t.za=65536]="BinaryOp",t[t.Wa=32768]="UnaryOp",t[t.Fa=16384]="LeftHandSide",t[t.Ka=12288]="StringOrNumericLiteral",t[t.Qa=8192]="NumericLiteral",t[t.Ga=4096]="StringLiteral",t[t.Za=3072]="IdentifierName",t[t.Xa=2048]="Keyword",t[t.Ja=1024]="Identifier",t[t.Ya=512]="Contextual",t[t._a=448]="Precedence",t[t.an=63]="Type",t[t.xa=2048]="FalseKeyword",t[t.tf=2049]="TrueKeyword",t[t.sf=2050]="NullKeyword",t[t.if=2051]="UndefinedKeyword",t[t.nf=3076]="ThisScope",t[t.ef=3077]="ParentScope",t[t.rf=671750]="OpenParen",t[t.hf=131079]="OpenBrace",t[t.cf=16392]="Dot",t[t.lf=1835017]="CloseBrace",t[t.uf=1835018]="CloseParen",t[t.af=1572875]="Comma",t[t.ff=671756]="OpenBracket",t[t.df=1835021]="CloseBracket",t[t.gf=1572878]="Colon",t[t.wf=1572879]="Question",t[t.bf=1572880]="Ampersand",t[t.pf=1572883]="Bar",t[t.mf=1638548]="BarBar",t[t.vf=1638613]="AmpersandAmpersand",t[t.Cf=1638678]="EqualsEquals",t[t.Tf=1638679]="ExclamationEquals",t[t.yf=1638680]="EqualsEqualsEquals",t[t.Af=1638681]="ExclamationEqualsEquals",t[t.Bf=1638746]="LessThan",t[t.Of=1638747]="GreaterThan",t[t.Rf=1638748]="LessThanEquals",t[t.kf=1638749]="GreaterThanEquals",t[t.Ef=1640798]="InKeyword",t[t.Sf=1640799]="InstanceOfKeyword",t[t.Lf=623008]="Plus",t[t.Pf=623009]="Minus",t[t.Df=34850]="TypeofKeyword",t[t.Mf=34851]="VoidKeyword",t[t.jf=1638884]="Asterisk",t[t.Ff=1638885]="Percent",t[t.Uf=1638886]="Slash",t[t.Vf=1048615]="Equals",t[t.$f=32808]="Exclamation",t[t.Nf=540713]="TemplateTail",t[t.qf=540714]="TemplateContinuation",t[t.Hf=1051179]="OfKeyword"})(hs||(hs={})),(function(t){t[t.zf=0]="Null",t[t.Wf=8]="Backspace",t[t.Kf=9]="Tab",t[t.Qf=10]="LineFeed",t[t.Gf=11]="VerticalTab",t[t.Zf=12]="FormFeed",t[t.Xf=13]="CarriageReturn",t[t.Jf=32]="Space",t[t.$f=33]="Exclamation",t[t.Yf=34]="DoubleQuote",t[t._f=36]="Dollar",t[t.Ff=37]="Percent",t[t.bf=38]="Ampersand",t[t.xf=39]="SingleQuote",t[t.rf=40]="OpenParen",t[t.uf=41]="CloseParen",t[t.jf=42]="Asterisk",t[t.Lf=43]="Plus",t[t.af=44]="Comma",t[t.Pf=45]="Minus",t[t.cf=46]="Dot",t[t.Uf=47]="Slash",t[t.td=59]="Semicolon",t[t.sd=96]="Backtick",t[t.ff=91]="OpenBracket",t[t.nd=92]="Backslash",t[t.df=93]="CloseBracket",t[t.ed=94]="Caret",t[t.rd=95]="Underscore",t[t.hf=123]="OpenBrace",t[t.pf=124]="Bar",t[t.lf=125]="CloseBrace",t[t.gf=58]="Colon",t[t.Bf=60]="LessThan",t[t.Vf=61]="Equals",t[t.Of=62]="GreaterThan",t[t.wf=63]="Question",t[t.hd=48]="Zero",t[t.od=49]="One",t[t.ld=50]="Two",t[t.ud=51]="Three",t[t.ad=52]="Four",t[t.fd=53]="Five",t[t.dd=54]="Six",t[t.gd=55]="Seven",t[t.wd=56]="Eight",t[t.bd=57]="Nine",t[t.pd=65]="UpperA",t[t.md=66]="UpperB",t[t.vd=67]="UpperC",t[t.Cd=68]="UpperD",t[t.Td=69]="UpperE",t[t.yd=70]="UpperF",t[t.Ad=71]="UpperG",t[t.Bd=72]="UpperH",t[t.Od=73]="UpperI",t[t.Rd=74]="UpperJ",t[t.kd=75]="UpperK",t[t.Id=76]="UpperL",t[t.Ed=77]="UpperM",t[t.Sd=78]="UpperN",t[t.Ld=79]="UpperO",t[t.Pd=80]="UpperP",t[t.Dd=81]="UpperQ",t[t.Md=82]="UpperR",t[t.jd=83]="UpperS",t[t.Fd=84]="UpperT",t[t.Ud=85]="UpperU",t[t.Vd=86]="UpperV",t[t.$d=87]="UpperW",t[t.Nd=88]="UpperX",t[t.qd=89]="UpperY",t[t.Hd=90]="UpperZ",t[t.zd=97]="LowerA",t[t.Wd=98]="LowerB",t[t.Kd=99]="LowerC",t[t.Qd=100]="LowerD",t[t.Gd=101]="LowerE",t[t.Zd=102]="LowerF",t[t.Xd=103]="LowerG",t[t.Jd=104]="LowerH",t[t.Yd=105]="LowerI",t[t._d=106]="LowerJ",t[t.xd=107]="LowerK",t[t.tg=108]="LowerL",t[t.sg=109]="LowerM",t[t.ig=110]="LowerN",t[t.ng=111]="LowerO",t[t.eg=112]="LowerP",t[t.rg=113]="LowerQ",t[t.hg=114]="LowerR",t[t.og=115]="LowerS",t[t.cg=116]="LowerT",t[t.lg=117]="LowerU",t[t.ug=118]="LowerV",t[t.ag=119]="LowerW",t[t.fg=120]="LowerX",t[t.dg=121]="LowerY",t[t.gg=122]="LowerZ"})(os||(os={})),Profiler.Bn("ExpressionParser");const En=PrimitiveLiteral.lh,Sn=PrimitiveLiteral.oh,Ln=PrimitiveLiteral.hh,Pn=PrimitiveLiteral.rh,Dn=AccessThis.Rr,Mn=AccessThis.kr,$state=new class{get ti(){return this.input.slice(this.si,this.index)}constructor(t){this.index=0,this.si=0,this.lastIndex=0,this.input=t,this.length=t.length,this.Js=1572864,this._s="",this.Xs=t.charCodeAt(0),this.Ys=1}}("");(function(t){t[t.wg=100]="InvalidExpressionStart",t[t.bg=101]="UnconsumedToken",t[t.pg=102]="DoubleDot",t[t.mg=103]="InvalidMemberExpression",t[t.vg=104]="UnexpectedEndOfExpression",t[t.Cg=105]="ExpectedIdentifier",t[t.Tg=106]="InvalidForDeclaration",t[t.yg=107]="InvalidObjectLiteralPropertyDefinition",t[t.Ag=108]="UnterminatedQuote",t[t.Bg=109]="UnterminatedTemplate",t[t.Og=110]="MissingExpectedToken",t[t.Rg=111]="UnexpectedCharacter",t[t.kg=112]="MissingValueConverter",t[t.Ig=113]="MissingBindingBehavior"})(cs||(cs={})),(function(t){t[t.Eg=150]="NotAssignable",t[t.Sg=151]="UnexpectedForOf"})(ls||(ls={}));const jn=[En,Sn,Ln,Pn,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],Fn=Object.create(null);Fn.true=2049,Fn.null=2050,Fn.false=2048,Fn.undefined=2051,Fn.Rr=3076,Fn.kr=3077,Fn.zr=1640798,Fn.Hr=1640799,Fn.sh=34850,Fn.th=34851,Fn.of=1051179;const Un=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Vn=[48,58],$n=t=>{throw Reporter.error(111,{state:t})};$n.Lg=1,$t(null,new Set,[36,0,48,58,65,91,95,0,97,123],1);const Nn=new Uint8Array(65535);$t(Nn,null,Un,1),$t(Nn,null,Vn,1);const qn=Array(65535);qn.fill($n,0,65535),$t(qn,null,[0,33,127,161],t=>(Dt(t),null)),$t(qn,null,Un,function(t){for(;Nn[Dt(t)];);const s=Fn[t._s=t.ti];return void 0===s?1024:s}),$t(qn,null,Vn,t=>Mt(t,0)),qn[34]=qn[39]=(t=>(function(t){const s=t.Xs;Dt(t);let i=0;const n=[];let e=t.index;for(;t.Xs!==s;)if(92===t.Xs)n.push(t.input.slice(e,t.index)),Dt(t),i=Et(t.Xs),Dt(t),n.push(String.fromCharCode(i)),e=t.index;else{if(t.index>=t.length)throw Reporter.error(108,{state:t});Dt(t)}const r=t.input.slice(e,t.index);Dt(t),n.push(r);const h=n.join("");return t._s=h,4096})(t)),qn[96]=(t=>jt(t)),qn[33]=(t=>61!==Dt(t)?32808:61!==Dt(t)?1638679:(Dt(t),1638681)),qn[61]=(t=>61!==Dt(t)?1048615:61!==Dt(t)?1638678:(Dt(t),1638680)),qn[38]=(t=>38!==Dt(t)?1572880:(Dt(t),1638613)),qn[124]=(t=>124!==Dt(t)?1572883:(Dt(t),1638548)),qn[46]=(t=>Dt(t)>57||48>t.Xs?16392:Mt(t,1)),qn[60]=(t=>61!==Dt(t)?1638746:(Dt(t),1638748)),qn[62]=(t=>61!==Dt(t)?1638747:(Dt(t),1638749)),qn[37]=Nt(1638885),qn[40]=Nt(671750),qn[41]=Nt(1835018),qn[42]=Nt(1638884),qn[43]=Nt(623008),qn[44]=Nt(1572875),qn[45]=Nt(623009),qn[47]=Nt(1638886),qn[58]=Nt(1572878),qn[63]=Nt(1572879),qn[91]=Nt(671756),qn[93]=Nt(1835021),qn[123]=Nt(131079),qn[125]=Nt(1835017);const IExpressionParserRegistration={register(t){t.bn(IExpressionParser,t=>(t.Uc=parseExpression,t))}},Hn=[IExpressionParserRegistration],AtPrefixedTriggerAttributePatternRegistration=AtPrefixedTriggerAttributePattern,ColonPrefixedBindAttributePatternRegistration=ColonPrefixedBindAttributePattern,RefAttributePatternRegistration=RefAttributePattern,DotSeparatedAttributePatternRegistration=DotSeparatedAttributePattern,DefaultBindingSyntax=[RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration],ShortHandBindingSyntax=[AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration],CallBindingCommandRegistration=CallBindingCommand,DefaultBindingCommandRegistration=DefaultBindingCommand,ForBindingCommandRegistration=ForBindingCommand,FromViewBindingCommandRegistration=FromViewBindingCommand,OneTimeBindingCommandRegistration=OneTimeBindingCommand,ToViewBindingCommandRegistration=ToViewBindingCommand,TwoWayBindingCommandRegistration=TwoWayBindingCommand,DefaultBindingLanguage=[DefaultBindingCommandRegistration,OneTimeBindingCommandRegistration,FromViewBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,CallBindingCommandRegistration,ForBindingCommandRegistration],zn={register:t=>Rn.register(t).register(...Hn,...DefaultBindingSyntax,...DefaultBindingLanguage),sn(){return this.register(DI.sn())}};class ResourceModel{constructor(t){this.Pg=t,this.Dg={},this.Mg={},this.jg={}}Fg(name){let t=this.Dg[name];if(void 0===t){const def=this.Pg.find(CustomElementResource,name);t=null===def?null:(function(def){const t=new ElementInfo(def.name,def.containerless),bindables=def.bindables,defaultBindingMode=BindingMode.Fs;let s,i,n,mode;for(i in bindables)void 0!==(s=bindables[i]).Us&&(i=s.Us),n=void 0!==s.Ds?s.Ds:PLATFORM.Ms(i),t.bindables[n]=new BindableInfo(i,mode=void 0!==s.mode&&s.mode!==BindingMode.default?s.mode:defaultBindingMode);return t})(def),this.Dg[name]=t}return t}Ug(t){const name=PLATFORM.Gs(t.target);let s=this.Mg[name];if(void 0===s){const def=this.Pg.find(CustomAttributeResource,name);s=null===def?null:(function(def){const t=new AttrInfo(def.name,def.isTemplateController),bindables=def.bindables,defaultBindingMode=void 0!==def.defaultBindingMode&&def.defaultBindingMode!==BindingMode.default?def.defaultBindingMode:BindingMode.Fs;let s,i,mode,n=0;for(i in bindables)++n,void 0!==(s=bindables[i]).Us&&(i=s.Us),t.bindables[i]=new BindableInfo(i,mode=void 0!==s.mode&&s.mode!==BindingMode.default?s.mode:defaultBindingMode),null===t.bindable&&(t.bindable=t.bindables[i]);return null===t.bindable&&(t.bindable=new BindableInfo("value",defaultBindingMode)),(def.Ps||n>1)&&(t.Ps=1),t})(def),this.Mg[name]=s}return s}Vg(t){const name=t.command;if(null===name)return null;let s=this.jg[name];if(void 0===s){if(null===(s=this.Pg.create(BindingCommandResource,name)))throw Reporter.error(0);this.jg[name]=s}return s}}class BindableInfo{constructor(t,mode){this.Qs=t,this.mode=mode}}class ElementInfo{constructor(name,t){this.name=name,this.containerless=t,this.bindables={}}}class AttrInfo{constructor(name,isTemplateController){this.name=name,this.bindables={},this.bindable=null,this.isTemplateController=isTemplateController,this.Ps=0}}(function(SymbolFlags){SymbolFlags[SymbolFlags.type=511]="type",SymbolFlags[SymbolFlags.isTemplateController=1]="isTemplateController",SymbolFlags[SymbolFlags.$g=2]="isReplacePart",SymbolFlags[SymbolFlags.Ng=4]="isCustomAttribute",SymbolFlags[SymbolFlags.qg=8]="isPlainAttribute",SymbolFlags[SymbolFlags.Hg=16]="isCustomElement",SymbolFlags[SymbolFlags.zg=32]="isLetElement",SymbolFlags[SymbolFlags.Wg=64]="isPlainElement",SymbolFlags[SymbolFlags.Kg=128]="isText",SymbolFlags[SymbolFlags.Mh=256]="isBinding",SymbolFlags[SymbolFlags.Qg=512]="hasMarker",SymbolFlags[SymbolFlags.Gg=1024]="hasTemplate",SymbolFlags[SymbolFlags.hasAttributes=2048]="hasAttributes",SymbolFlags[SymbolFlags.Zg=4096]="hasBindings",SymbolFlags[SymbolFlags.hasChildNodes=8192]="hasChildNodes",SymbolFlags[SymbolFlags.Xg=16384]="hasParts"})(SymbolFlags||(SymbolFlags={}));class TemplateControllerSymbol{get Jg(){return null===this.Yg&&(this.Yg=[],this.flags|=4096),this.Yg}constructor(dom,t,s,i){this.flags=513,this.res=s.name,this._g=i,this.xg=null,this.Zs=t,this.template=null,this.templateController=null,this.marker=qt(dom),this.Yg=null}}class ReplacePartSymbol{constructor(name){this.flags=2,this.name=name,this.xg=null,this.parent=null,this.template=null}}class CustomAttributeSymbol{get Jg(){return null===this.Yg&&(this.Yg=[],this.flags|=4096),this.Yg}constructor(t,s){this.flags=4,this.res=s.name,this.Zs=t,this.Yg=null}}class PlainAttributeSymbol{constructor(t,s,i){this.flags=8,this.Zs=t,this.command=s,this.cr=i}}class BindingSymbol{constructor(t,bindable,s,i,n){this.flags=256,this.command=t,this.bindable=bindable,this.cr=s,this.wi=i,this.target=n}}class CustomElementSymbol{get attributes(){return null===this.tw&&(this.tw=[],this.flags|=2048),this.tw}get Jg(){return null===this.Yg&&(this.Yg=[],this.flags|=4096),this.Yg}get childNodes(){return null===this.sw&&(this.sw=[],this.flags|=8192),this.sw}get parts(){return null===this.iw&&(this.iw=[],this.flags|=16384),this.iw}constructor(dom,t,s){this.flags=16,this.res=s.name,this.xg=t,this.bindables=s.bindables,this.nw=1,this.templateController=null,s.containerless?(this.Hh=1,this.marker=qt(dom),this.flags|=512):(this.Hh=0,this.marker=null),this.tw=null,this.Yg=null,this.sw=null,this.iw=null}}class LetElementSymbol{get Jg(){return null===this.Yg&&(this.Yg=[],this.flags|=4096),this.Yg}constructor(dom,t){this.flags=544,this.xg=t,this.toViewModel=0,this.marker=qt(dom),this.Yg=null}}class PlainElementSymbol{get attributes(){return null===this.tw&&(this.tw=[],this.flags|=2048),this.tw}get childNodes(){return null===this.sw&&(this.sw=[],this.flags|=8192),this.sw}constructor(t){this.flags=64,this.xg=t,this.nw=0,this.templateController=null,this.tw=null,this.sw=null}}class TextSymbol{constructor(dom,t,s){this.flags=640,this.xg=t,this.ol=s,this.marker=qt(dom)}}us=Object.freeze({AttrSyntax,IAttributeParser,AtPrefixedTriggerAttributePattern,attributePattern,ColonPrefixedBindAttributePattern,DotSeparatedAttributePattern,IAttributePattern,Interpretation,ISyntaxInterpreter,RefAttributePattern,bindingCommand:t=>s=>BindingCommandResource.xe(t,s),BindingCommandResource,CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,getMode,getTarget,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand,IExpressionParserRegistration,DefaultComponents:Hn,RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration,DefaultBindingSyntax,AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration,ShortHandBindingSyntax,CallBindingCommandRegistration,DefaultBindingCommandRegistration,ForBindingCommandRegistration,FromViewBindingCommandRegistration,OneTimeBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,DefaultBindingLanguage,BasicConfiguration:zn,parseExpression,ResourceModel,BindableInfo,ElementInfo,AttrInfo,BindingSymbol,CustomAttributeSymbol,CustomElementSymbol,LetElementSymbol,PlainAttributeSymbol,PlainElementSymbol,ReplacePartSymbol,get SymbolFlags(){return SymbolFlags},TemplateControllerSymbol,TextSymbol});class Listener{constructor(dom,t,s,i,n,preventDefault,e,r){this.dom=dom,this.ps=null,this.Bs=null,this.$state=0,this.ew=s,this.gr=r,this.preventDefault=preventDefault,this.kc=i,this.target=n,this.rw=t,this.hw=e}Dc(t){const s=this.$scope.He;s.ow=t;const i=this.kc.evaluate(LifecycleFlags.Y,this.$scope,this.gr);return delete s.ow,1!=i&&this.preventDefault&&t.preventDefault(),i}li(t){this.Dc(t)}bs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.rt)}this.$state|=1,this.$scope=s;const i=this.kc;hasBind(i)&&i.bind(t,s,this),this.cw=this.hw.addEventListener(this.dom,this.target,this.rw,this,this.ew),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64;const s=this.kc;hasUnbind(s)&&s.wr(t,this.$scope,this),this.$scope=null,this.cw.G(),this.cw=null,this.$state&=-67}nt(t,s){}A(t,s,i){}}let AttributeNSAccessor=class{constructor(t,s,i,n,e){this.ht=1,this.attributeName=n,this.O=t,this.$=s,this.oldValue=this.q=this.H(),this.N=i,this.lw=e}H(){return this.$.getAttributeNS(this.lw,this.attributeName)}lt(t){this.$.setAttributeNS(this.lw,this.attributeName,t)}};AttributeNSAccessor=l([targetObserver("")],AttributeNSAccessor);const Wn=LifecycleFlags.me|LifecycleFlags.de,Kn=LifecycleFlags.et|LifecycleFlags.K,Qn=(t,s)=>t===s;let CheckedObserver=class{constructor(t,s,i,n){this.ht=1,this.cw=i,this.O=t,this.$=s,this.st=n}H(){return this.q}lt(t,s){this.uw||(this.uw=this.$.Ws&&(this.$.Ws.aw||this.$.Ws.value),this.uw&&this.uw.subscribe(this)),this.fw&&(this.fw.Bt(this),this.fw=null),"checkbox"===this.$.type&&Array.isArray(t)&&(this.fw=this.st.yl(t),this.fw.At(this)),this.dw()}U(){this.dw(),this.Pi(Kn)}A(t,s,i){this.dw(),this.Pi(i)}dw(){const value=this.q,t=this.$,s=t.hasOwnProperty("model")?t.aw:t.value,i=t.gw||Qn;t.checked="radio"===t.type?!!i(value,s):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!i(t,s)):0}Pi(t){t&LifecycleFlags.rt||this.q!==this.oldValue&&this.C(this.q,this.oldValue,t)}li(){let value=this.q;const t=this.$,s=t.hasOwnProperty("model")?t.aw:t.value;let i;const n=t.gw||Qn;if("checkbox"===t.type){if(Array.isArray(value))return i=value.findIndex(t=>!!n(t,s)),void(t.checked&&-1===i?value.push(s):t.checked||-1===i||value.splice(i,1));value=t.checked}else{if(!t.checked)return;value=s}this.oldValue=this.q,this.q=value,this.Pi(Wn)}subscribe(t){this.v()||this.cw.subscribe(this.$,this),this.g(t)}unsubscribe(t){this.p(t)&&!this.v()&&this.cw.G()}wr(){this.fw&&(this.fw.Bt(this),this.fw=null),this.uw&&this.uw.unsubscribe(this)}};CheckedObserver=l([targetObserver()],CheckedObserver);let ClassAttributeAccessor=class{constructor(t,s){this.ht=1,this.Vl=1,this.O=t,this.ww=null,this.$=s,this.version=0}H(){return this.q}lt(t){const s=this.ww||{};let i,name,n=this.version;if(t.length){const e=this.$;for(let r=0,h=(i=t.split(/\s+/)).length;h>r;r++)(name=i[r]).length&&(s[name]=n,e.classList.add(name))}if(this.ww=s,this.version+=1,0!==n)for(name in n-=1,s)s.hasOwnProperty(name)&&s[name]===n&&this.$.classList.remove(name)}};ClassAttributeAccessor=l([targetObserver("")],ClassAttributeAccessor);let DataAttributeAccessor=class{constructor(t,s,i){this.ht=1,this.O=t,this.$=s,this.oldValue=this.q=this.H(),this.N=i}H(){return this.$.getAttribute(this.N)}lt(t){null===t?this.$.removeAttribute(this.N):this.$.setAttribute(this.N,t)}};DataAttributeAccessor=l([targetObserver()],DataAttributeAccessor);let ElementPropertyAccessor=class{constructor(t,s,i){this.ht=1,this.O=t,this.$=s,this.N=i}H(){return this.$[this.N]}lt(value){this.$[this.N]=value}};ElementPropertyAccessor=l([targetObserver("")],ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,s,i){this.dom=dom,this.bw=i,this.count=0,this.pw=t,this.listener=s}mw(){this.count++,1===this.count&&this.dom.addEventListener(this.pw,this.listener,null,this.bw)}vw(){this.count--,0===this.count&&this.dom.removeEventListener(this.pw,this.listener,null,this.bw)}G(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.pw,this.listener,null,this.bw))}}class DelegateOrCaptureSubscription{constructor(t,s,i,n){this.Cw=t,this.Tw=s,this.rw=i,s[i]=n}G(){this.Cw.vw(),this.Tw[this.rw]=null}}class TriggerSubscription{constructor(dom,t,s,i){this.dom=dom,this.target=t,this.rw=s,this.js=i,dom.addEventListener(s,i,t)}G(){this.dom.removeEventListener(this.rw,this.js,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.yw=t,this.target=null,this.cw=null}subscribe(t,s){this.target=t,this.cw=s;const i=this.dom.addEventListener,n=this.yw;for(let e=0,r=n.length;r>e;++e)i(n[e],s,t)}G(){const t=this.target,s=this.cw,i=this.yw,n=this.dom.removeEventListener;for(let e=0,r=i.length;r>e;++e)n(i[e],s,t);this.target=this.cw=null}}const IEventManager=DI.en("IEventManager").on(t=>t.singleton(Gn));class Gn{constructor(){this.Aw={},this.Bw={},this.Aw={},this.Bw={}}addEventListener(dom,t,s,i,strategy){let n,e,r;if(strategy===DelegationStrategy.Pe){(r=(n=this.Aw)[s]||(n[s]=new ListenerTracker(dom,s,Kt,0))).mw();const e=t.ui||(t.ui={});return new DelegateOrCaptureSubscription(r,e,s,i)}if(strategy===DelegationStrategy.Le){(r=(e=this.Bw)[s]||(e[s]=new ListenerTracker(dom,s,Wt,1))).mw();const n=t.ci||(t.ci={});return new DelegateOrCaptureSubscription(r,n,s,i)}return new TriggerSubscription(dom,t,s,i)}G(){let t;const{Aw:s,Bw:i}=this;for(t in s)s[t].G();for(t in i)i[t].G()}}const Zn=LifecycleFlags.me|LifecycleFlags.de,Xn={Ow:1,Rw:1,kw:1};let SelectValueObserver=class{constructor(t,s,i,n,dom){this.ht=1,this.O=t,this.$=s,this.cw=i,this.st=n,this.dom=dom}H(){return this.q}lt(t,s){const i=Array.isArray(t);if(!i&&null!=t&&this.$.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.fw&&(this.fw.Bt(this),this.fw=null),i&&(this.fw=this.st.yl(t),this.fw.At(this)),this.Iw(),this.Pi(s)}U(t){this.Iw(t)}A(t,s,i){this.W(t,i)}Pi(t){if(t&LifecycleFlags.rt)return;const s=this.oldValue,i=this.q;i!==s&&this.C(i,s,t)}li(){this.Ew()&&this.Pi(Zn)}Iw(t){const s=this.q,i=Array.isArray(s),n=this.$,e=n.gw||Qt,r=n.options;let h=r.length;for(;h--;){const t=r[h],n=t.hasOwnProperty("model")?t.aw:t.value;t.selected=i?-1!==s.findIndex(t=>!!e(n,t)):!!e(n,s)}}Ew(){const t=this.$,s=t.options,i=s.length,n=this.q;let e=0;if(t.multiple){if(!Array.isArray(n))return 1;let r;const h=t.gw||Qt,o=[];for(;i>e;)(r=s[e]).selected&&o.push(r.hasOwnProperty("model")?r.aw:r.value),++e;for(e=0;n.length>e;){const t=n[e];-1===o.findIndex(s=>!!h(t,s))?n.splice(e,1):++e}for(e=0;o.length>e;){const t=o[e];-1===n.findIndex(s=>!!h(t,s))&&n.push(t),++e}return 0}let value=null;for(;i>e;){const t=s[e];if(t.selected){value=t.hasOwnProperty("model")?t.aw:t.value;break}++e}return this.oldValue=this.q,this.q=value,1}subscribe(t){this.v()||this.cw.subscribe(this.$,this),this.g(t)}unsubscribe(t){this.p(t)&&!this.v()&&this.cw.G()}bind(){this.Sw=this.dom.Lw(this.$,this.Pw.bind(this),Xn)}wr(){this.Sw.disconnect(),this.Sw=null,this.fw&&(this.fw.Bt(this),this.fw=null)}Pw(){this.Iw(),this.Ew()&&this.Pi(Zn)}};SelectValueObserver=l([targetObserver()],SelectValueObserver);let StyleAttributeAccessor=class{constructor(t,s){this.ht=1,this.oldValue=this.q=s.style.cssText,this.O=t,this.$=s,this.Dw=null,this.version=0}H(){return this.$.style.cssText}Mw(t,value){let s="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(s="important",value=value.replace("!important","")),this.$.style.setProperty(t,value,s)}lt(t){const s=this.Dw||{};let i,n=this.version;if(null!==t)if(t instanceof Object){let value;for(i in t)t.hasOwnProperty(i)&&(value=t[i],s[i=i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=n,this.Mw(i,value))}else if(t.length){const e=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let r;for(;null!==(r=e.exec(t));)(i=r[1])&&(s[i]=n,this.Mw(i,r[2]))}if(this.Dw=s,this.version+=1,0!==n)for(i in n-=1,s)s.hasOwnProperty(i)&&s[i]===n&&this.$.style.removeProperty(i)}};StyleAttributeAccessor=l([targetObserver()],StyleAttributeAccessor);const Jn={button:"",jw:"on",color:"#000000",Fw:"",Uw:"",email:"",Vw:"",hidden:"",$w:"",Nw:"",number:"",password:"",qw:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",Hw:""},Yn=LifecycleFlags.me|LifecycleFlags.de;let ValueAttributeObserver=class{constructor(t,s,i,n){if(this.ht=1,this.cw=n,this.O=t,this.$=s,this.N=i,"value"===i){const t=s.type;this.defaultValue=Jn[t||"text"],"file"===t&&(this.flush=this.zw)}else this.defaultValue="";this.oldValue=this.q=s[i]}H(){return this.$[this.N]}lt(t,s){this.$[this.N]=t,s&LifecycleFlags.rt||this.C(this.q,this.oldValue,s)}li(){const t=this.oldValue=this.q,s=this.q=this.H();t!==s&&(this.C(s,t,Yn),this.oldValue=s)}subscribe(t){this.v()||(this.oldValue=this.H(),this.cw.subscribe(this.$,this)),this.g(t)}unsubscribe(t){this.p(t)&&!this.v()&&this.cw.G()}zw(){const t=this.q;this.oldValue!==t&&""===t&&(this.lt(t,this.ct),this.oldValue=this.q)}};ValueAttributeObserver=l([targetObserver("")],ValueAttributeObserver);const _n="http://www.w3.org/1999/xlink",xn="http://www.w3.org/XML/1998/namespace",te="http://www.w3.org/2000/xmlns/",se=((bs=Object.create(null))["Ww"]=["actuate",_n],bs["Kw"]=["arcrole",_n],bs["Qw"]=["href",_n],bs["Gw"]=["role",_n],bs["Zw"]=["show",_n],bs["Xw"]=["title",_n],bs["Jw"]=["type",_n],bs["Yw"]=["lang",xn],bs["_w"]=["space",xn],bs.xw=["xmlns",te],bs["tb"]=["xlink",te],bs),ie=["change","input"],ne=["change"],ee=["change","input","blur","keyup","paste"],re=["scroll"],he=(function(t){return t.sb=1,t.style=1,t.ib=1,t.checked=1,t.value=1,t.aw=1,t["Ww"]=1,t["Kw"]=1,t["Qw"]=1,t["Gw"]=1,t["Zw"]=1,t["Xw"]=1,t["Jw"]=1,t["Yw"]=1,t["_w"]=1,t.xw=1,t["tb"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}tt(t,s,i,n){switch(n){case"checked":return new CheckedObserver(t,i,new EventSubscriber(this.dom,ie),s);case"value":return"SELECT"===i.tagName?new SelectValueObserver(t,i,new EventSubscriber(this.dom,ne),s,this.dom):new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,ie));case"files":return new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,ie));case"textContent":case"innerHTML":return new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,ee));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,re));case"class":return new ClassAttributeAccessor(t,i);case"style":case"css":return new StyleAttributeAccessor(t,i);case"model":return new SetterObserver(i,n);case"role":return new DataAttributeAccessor(t,i,n);default:if(void 0!==se[n]){const s=se[n];return new AttributeNSAccessor(t,i,n,s[0],s[1])}const e=n.slice(0,5);if("aria-"===e||"data-"===e)return new DataAttributeAccessor(t,i,n)}return null}Zl(t,s){return 1==he[s]}Gl(t){return this.dom.fi(t)}}TargetObserverLocator.inject=[IDOM];class TargetAccessorLocator{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}Pc(t,s,i){switch(i){case"textContent":return new ElementPropertyAccessor(t,s,i);case"class":return new ClassAttributeAccessor(t,s);case"style":case"css":return new StyleAttributeAccessor(t,s);case"src":case"href":case"role":return new DataAttributeAccessor(t,s,i);default:if(void 0!==se[i]){const n=se[i];return new AttributeNSAccessor(t,s,i,n[0],n[1])}const n=i.slice(0,5);return"aria-"===n||"data-"===n?new DataAttributeAccessor(t,s,i):new ElementPropertyAccessor(t,s,i)}}Gl(t){return this.dom.fi(t)}}TargetAccessorLocator.inject=[IDOM];const ISVGAnalyzer=DI.en("ISVGAnalyzer").on(t=>t.singleton(class{nb(t,s){return 0}}));class AttrBindingBehavior{bind(t,s,i){i.targetObserver=new DataAttributeAccessor(i.gr.get(ILifecycle),i.target,i.Ic)}wr(t,s,i){}}BindingBehaviorResource.xe("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,s,i){if(!i.Dc||!i.rw)throw Reporter.error(8);i.ai=i.Dc,i.Dc=Gt}wr(t,s,i){i.Dc=i.ai,i.ai=null}}BindingBehaviorResource.xe("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.st=t}bind(t,s,i,...n){if(0===n.length)throw Reporter.error(9);if(i.mode!==BindingMode.Dh&&i.mode!==BindingMode.mr)throw Reporter.error(10);const e=this.st.tt(i.target,i.Ic);if(!e.cw)throw Reporter.error(10);i.targetObserver=e,e.eb=i.targetObserver.cw,e.cw=new EventSubscriber(i.gr.get(IDOM),n)}wr(t,s,i){i.targetObserver.cw.G(),i.targetObserver.cw=i.targetObserver.eb,i.targetObserver.eb=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.xe("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.rb="ha",HTMLTargetedInstructionType.hb="hb",HTMLTargetedInstructionType.ob="hc",HTMLTargetedInstructionType.setAttribute="hd"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.ce,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Pe,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Le,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.cb=t}get Ku(){return this.lb||(this.lb=buildTemplateDefinition(null,null,this.cb,null,"string"==typeof this.cb,null,this.instructions,this.dependencies))}Ss(t,s){return t.Ss(this.dom,this.Ku,null,s)}ub(t,s){return this.sa(t,s).create()}sa(t,s){return t.sa(this.dom,this.Ku,s)}di(t,instructions,dependencies){this.dom.appendChild(t,this.cb),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const oe=["subject","composing"];class Compose{constructor(dom,t,s,i,n){this.dom=dom,this.subject=null,this.ab=0,this.Bc=n,this.fb=null,this.Ou=t,this.ba=i,this.Bc.fc=(()=>{this.ab=0}),this.properties=s.instructions.filter(t=>!oe.includes(t.to)).reduce((t,s)=>(s.to&&(t[s.to]=s),t),{})}fs(t){this.gb(this.subject,null,t),this.Bc.fs(t,this.$scope)}Ft(t){this.Bc.Ft(t)}Kt(t){this.Bc.Kt(t)}Ts(t){this.fb=null,this.Bc.Ts(t)}ts(t){this.Bc.ts(t)}wb(t,s,i){this.gb(t,s,i)}gb(t,s,i){this.fb!==t&&(this.fb=t,t=t instanceof Promise?t.then(t=>this.bb(t,i)):this.bb(t,i),this.ab=1,this.Bc.wc(t,i))}bb(t,s){const i=this.pb(t);return i?(i.Tu(this.rs.host),i.Vu(this.Ou.$scope),i):null}pb(t){return t?"lockScope"in t?t:"createView"in t?t.ub(this.ba,this.Ou.$context):"create"in t?t.create():"template"in t?this.ba.sa(this.dom,t,this.Ou.$context).create():createElement(this.dom,t,this.properties,this.rs.children).ub(this.ba,this.Ou.$context):null}}Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],l([bindable],Compose.prototype,"subject",void 0),l([bindable],Compose.prototype,"composing",void 0),CustomElementResource.xe({name:"au-compose",containerless:1},Compose),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,s,i,n,e){this.mb=t,this.vb=s,this.Node=i,this.Element=n,this.HTMLElement=e}addEventListener(t,s,i,n){(i||this.vb).addEventListener(t,s,n)}appendChild(t,s){t.appendChild(s)}cloneNode(t,s){return t.cloneNode(0!=s)}pa(t){if(this.Cb(t))return t;if(null===t.parentNode)throw Reporter.error(52);const s=this.vb.createComment("au-end"),i=this.vb.createComment("au-start");return t.parentNode.replaceChild(s,t),s.parentNode.insertBefore(i,s),s.Tb=i,i.$nodes=null,s}createDocumentFragment(t){if(null==t)return this.vb.createDocumentFragment();if(this.fi(t)){if(void 0!==t.content)return t.content;const s=this.vb.createDocumentFragment();return s.appendChild(t),s}return this.yb(t).content}createElement(name){return this.vb.createElement(name)}Lw(t,s,i){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.zi};const n=new MutationObserver(s);return n.observe(t,i),n}yb(t){if(null==t)return this.vb.createElement("template");const template=this.vb.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.vb.createTextNode(t)}insertBefore(t,s){s.parentNode.insertBefore(t,s)}Ab(t){return"AU-M"===t.nodeName}fi(t){return null!=t&&t.nodeType>0}Cb(t){return"au-end"===t.textContent}ni(t){t.className="au"}$s(t,s){t.Ns(INode,s),t.Ns(this.Node,s),t.Ns(this.Element,s),t.Ns(this.HTMLElement,s)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,s,i,n){(i||this.vb).removeEventListener(t,s,n)}setAttribute(t,name,value){t.setAttribute(name,value)}}class ce{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new ae(t)]}fu(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}du(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class le{constructor(dom,t){this.dom=dom,this.Bb=t;const s=t.querySelectorAll(".au");let i=0,n=s.length;const targets=this.targets=Array(n);for(;n>i;){const t=s[i];targets[i]="AU-M"===t.nodeName?this.dom.pa(t):t,++i}const e=t.childNodes;i=0;const childNodes=this.childNodes=Array(n=e.length);for(;n>i;)childNodes[i]=e[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}fu(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.Bb,t),"au-end"===t.textContent){this.end=t;const s=this.start=t.Tb;s.$nodes=null===s.$nodes?this:PLATFORM.Dt}}du(t){t.appendChild(this.Bb),this.start=this.end=null}remove(){const t=this.Bb;if(null!==this.start&&this.start.$nodes===this){const s=this.end;let i,n=this.start.nextSibling;for(;n!==s;)i=n.nextSibling,t.appendChild(n),n=i;this.start.$nodes=null,this.start=this.end=null}else{let s=this.firstChild;if(s.parentNode!==t){const i=this.lastChild;let n;for(;null!==s&&(n=s.nextSibling,t.appendChild(s),s!==i);)s=n}}}}class ue{constructor(dom,t){this.dom=dom;const s=dom.createDocumentFragment(t),childNodes=s.childNodes;switch(childNodes.length){case 0:return void(this.Gu=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.Ob=0,this.cb=t,void(this.an=ce)}default:this.Ob=1,this.cb=s,this.an=le}}Gu(){return new this.an(this.dom,this.cb.cloneNode(this.Ob))}}class ae{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.zi,t.nodeName="AU-M",t.nodeType=1})(ae.prototype);class fe{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,s){return new CompiledTemplate(this.dom,s,new ue(this.dom,s.template),t)}}fe.inject=[IDOM];let de=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){const e=i.nextSibling;let r;dom.Ab(i)&&dom.remove(i);const h=ensureExpression(this.ma,n.from,2048);addBindable(s,r=h.Bh?new MultiInterpolationBinding(this.st,h,e,"textContent",BindingMode.Fs,t):new InterpolationBinding(h.Oh,h,e,"textContent",BindingMode.Fs,this.st,t,1))}};de.inject=[IExpressionParser,IObserverLocator],de=l([instructionRenderer("ha")],de);let ge=class{constructor(t,s){this.ma=t,this.hw=s}Es(dom,t,s,i,n){const e=ensureExpression(this.ma,n.from,80|n.strategy+6);addBindable(s,new Listener(dom,n.to,n.strategy,e,i,n.preventDefault,this.hw,t))}};ge.inject=[IExpressionParser,IEventManager],ge=l([instructionRenderer("hb")],ge);let we=class{Es(dom,t,s,i,n){i.setAttribute(n.to,n.value)}};we=l([instructionRenderer("hd")],we);let be=class{constructor(t,s){this.ma=t,this.st=s}Es(dom,t,s,i,n){const e=ensureExpression(this.ma,n.from,48|BindingMode.Fs);addBindable(s,new Binding(e,i.style,n.to,BindingMode.Fs,this.st,t))}};be.inject=[IExpressionParser,IObserverLocator],be=l([instructionRenderer("hc")],be);const pe={mode:"open"},me={Ow:1};class ve{constructor(dom,$customElement,host,t){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.Rb(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:pe),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}ea(t){this.dom.Lw(this.shadowRoot,t,me)}kb(){return this.shadowRoot}es(t){t.du(this.shadowRoot)}hs(t){t.remove()}}class Ce{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.zi,this.host=dom.pa(host),this.host.$customElement=$customElement}get children(){return this.childNodes}ea(t){new MutationObserver(t).observe(this.host,me)}kb(){return this.host.Ib()}es(t){t.insertBefore(this.host)}hs(t){t.remove()}}class Te{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}ea(t){}kb(){return this.host.Ib()}es(t){t.du(this.host)}hs(t){t.remove()}}const IProjectorLocatorRegistration=class{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}Is(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new ve(dom,t,host,def)}return def.containerless?new Ce(dom,t,host):new Te(t,host)}},ye=[IProjectorLocatorRegistration,TargetAccessorLocator,TargetObserverLocator,fe],Ae=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],Be=[ge,we,be,de],Oe={register:t=>Rn.register(t).register(...ye,...Ae,...Be),sn(){return this.register(DI.sn())}};as=Object.freeze({Listener,get AttributeNSAccessor(){return AttributeNSAccessor},get CheckedObserver(){return CheckedObserver},get ClassAttributeAccessor(){return ClassAttributeAccessor},get DataAttributeAccessor(){return DataAttributeAccessor},get ElementPropertyAccessor(){return ElementPropertyAccessor},ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,TargetAccessorLocator,TargetObserverLocator,get SelectValueObserver(){return SelectValueObserver},get StyleAttributeAccessor(){return StyleAttributeAccessor},ISVGAnalyzer,get ValueAttributeObserver(){return ValueAttributeObserver},AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,IProjectorLocatorRegistration,ITargetAccessorLocatorRegistration:TargetAccessorLocator,ITargetObserverLocatorRegistration:TargetObserverLocator,ITemplateFactoryRegistration:fe,DefaultComponents:ye,AttrBindingBehaviorRegistration:AttrBindingBehavior,SelfBindingBehaviorRegistration:SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration:UpdateTriggerBindingBehavior,ComposeRegistration:Compose,DefaultResources:Ae,ListenerBindingRendererRegistration:ge,SetAttributeRendererRegistration:we,StylePropertyBindingRendererRegistration:be,TextBindingRendererRegistration:de,DefaultRenderers:Be,BasicConfiguration:Oe,createElement,RenderPlan,get HTMLTargetedInstructionType(){return HTMLTargetedInstructionType},isHTMLTargetedInstruction,get NodeType(){return NodeType},HTMLDOM,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction:class{constructor(from,to){this.type="hc",this.from=from,this.to=to}},TextBindingInstruction,TriggerBindingInstruction});class TriggerBindingCommand{constructor(){this.va=86}compile(t){return new TriggerBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.va=88}compile(t){return new DelegateBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.va=87}compile(t){return new CaptureBindingInstruction(t.cr,getTarget(t,0))}}BindingCommandResource.xe("capture",CaptureBindingCommand),Profiler.Bn("TemplateBinder");const Re={id:1,Eb:1,Sb:1},ke={Lb:1,Eb:1,Sb:1};class TemplateBinder{constructor(dom,t,s,i){this.dom=dom,this.Pg=t,this.Pb=s,this.Db=i,this.zu=null,this.manifest=null,this.Mb=null,this.jb=null,this._g=null}bind(t){const s=this.zu,i=this.jb,n=this.Mb,e=this.manifest,r=this.zu=this.manifest=new PlainElementSymbol(t),h=t.attributes;let o=0;for(;h.length>o;){const t=h[o],s=this.Pb.parse(t.name,t.value);if(1==Re[s.target])throw Error(`Invalid surrogate attribute: ${s.target}`);const i=this.Pg.Ug(s);if(null===i)this.Fb(s);else{if(i.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.Ub(s,i)}++o}return this.Vb(t),this.zu=s,this.jb=i,this.Mb=n,this.manifest=e,r}$b(t,s){switch(s.nodeName){case"LET":return void this.Nb(t,s);case"SLOT":return void(this.zu.hasSlots=1)}const i=this.jb,n=this.Mb,e=this.manifest;let r;this._g=s.getAttribute("part");let name=s.getAttribute("as-element");null===name&&(name=s.nodeName.toLowerCase());const h=this.Pg.Fg(name);null===h?this.manifest=new PlainElementSymbol(s):(this.jb=this.Mb,r=this.Mb=this.manifest=new CustomElementSymbol(this.dom,s,h)),this.Vb(s),this.qb(s,t),void 0!==r&&r.Hh?s.parentNode.replaceChild(r.marker,s):this.manifest.nw&&s.classList.add("au"),this.jb=i,this.Mb=n,this.manifest=e}Nb(t,s){const i=new LetElementSymbol(this.dom,s);t.childNodes.push(i);const n=s.attributes;let e=0;for(;n.length>e;){const t=n[e];if("to-view-model"===t.name){s.removeAttribute("to-view-model"),i.toViewModel=1;continue}const r=this.Pb.parse(t.name,t.value),h=this.Pg.Vg(r),o=this.Db.parse(r.wi,null===h?2048:h.va),to=PLATFORM.Gs(r.target),c=new BindableInfo(to,BindingMode.Fs);i.Jg.push(new BindingSymbol(h,c,o,r.wi,to)),++e}s.parentNode.replaceChild(i.marker,s)}qb(t,s){const{jb:i,Mb:n,manifest:e}=this;let r=e;const h=this.Hb(t);let o,c;const l=t.attributes;let u=0;for(;l.length>u;){const t=l[u];if(++u,1==ke[t.name])continue;const s=this.Pb.parse(t.name,t.value),i=this.Pg.Ug(s);null===i?this.Fb(s):i.isTemplateController?(c=e.templateController=this.zb(s,i),r===e?(c.template=e,r=c):(c.templateController=o,c.template=o.template,o.template=c),o=c):this.Ub(s,i)}(function(dom,t,s){const i=s.xg;let n,e=t;for(;e!==s;)e.template===s?(i.parentNode.replaceChild(e.marker,i),"TEMPLATE"===i.nodeName?(e.xg=i,i.remove()):(n=e.xg=dom.yb()).content.appendChild(i)):(n=e.xg=dom.yb()).content.appendChild(e.marker),i.removeAttribute(e.Zs.gi),e=e.template})(this.dom,r,e),null===h?s.childNodes.push(r):(h.parent=s,h.template=r,(e===n?i:n).parts.push(h),(function(dom,t,s){let i,n;"TEMPLATE"===(i=512&s.flags?s.marker:s.xg).nodeName?t.xg=i:(n=t.xg=dom.yb()).content.appendChild(i)})(this.dom,h,r))}Vb(t){let s,i;for(s="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==s;)switch(s.nodeType){case 1:i=s.nextSibling,this.$b(this.manifest,s),s=i;break;case 3:s=this.Wb(s).nextSibling;break;case 4:case 7:case 8:case 10:s=s.nextSibling;break;case 9:case 11:s=s.firstChild}}Wb(t){const s=this.Db.parse(t.wholeText,2048);if(null!==s){const i=new TextSymbol(this.dom,t,s);this.manifest.childNodes.push(i),(function(t){const s=t.xg,i=s.parentNode;for(;null!==s.nextSibling&&3===s.nextSibling.nodeType;)i.removeChild(s.nextSibling);s.textContent="",i.insertBefore(t.marker,s)})(i)}for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t}zb(t,s){let i;const n=this.Pg.Vg(t);if(null===n&&s.Ps)i=new TemplateControllerSymbol(this.dom,t,s,this._g),this._g=null,this.Kb(i,s,t.wi);else{i=new TemplateControllerSymbol(this.dom,t,s,this._g);const e=this.Db.parse(t.wi,null===n?2048:n.va);i.Jg.push(new BindingSymbol(n,s.bindable,e,t.wi,t.target)),this._g=null}return i}Ub(t,s){const i=this.Pg.Vg(t);let n;if(null===i&&s.Ps)n=new CustomAttributeSymbol(t,s),this.Kb(n,s,t.wi);else{n=new CustomAttributeSymbol(t,s);const e=this.Db.parse(t.wi,null===i?2048:i.va);n.Jg.push(new BindingSymbol(i,s.bindable,e,t.wi,t.target))}this.manifest.attributes.push(n),this.manifest.nw=1}Kb(t,s,value){const i=(function(t){const s=[],i=new Ie(t),n=i.length;let name,value;for(;n>i.index;){if(0===(name=Xt(i)).length)return s;value=Jt(i),s.push({name,value})}return s})(value);let n;for(let e=0,r=i.length;r>e;++e){const r=this.Pb.parse((n=i[e]).name,n.value),h=this.Pg.Vg(r),o=this.Db.parse(r.wi,null===h?2048:h.va);let c=s.bindables[r.target];void 0===c&&(c=s.bindables[r.target]=new BindableInfo(r.target,BindingMode.Fs)),t.Jg.push(new BindingSymbol(h,c,o,r.wi,r.target))}}Fb(t){if(0===t.wi.length)return;const s=this.Pg.Vg(t),i=this.manifest,n=this.Db.parse(t.wi,null===s?2048:s.va);if(16&i.flags){const e=i.bindables[t.target];void 0!==e?(i.Jg.push(new BindingSymbol(s,e,n,t.wi,t.target)),i.nw=1):null===n&&"ref"!==t.target||(i.attributes.push(new PlainAttributeSymbol(t,s,n)),i.nw=1)}else null!==n||"ref"===t.target?(i.attributes.push(new PlainAttributeSymbol(t,s,n)),i.nw=1):i===this.zu&&i.attributes.push(new PlainAttributeSymbol(t,s,n))}Hb(t){const name=t.getAttribute("replace-part");return null===name?null:(t.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}class Ie{constructor(t){this.input=t,this.index=0,this.length=t.length}}const Ee=String.fromCharCode;(function(t){t[t.Yf=34]="DoubleQuote",t[t.xf=39]="SingleQuote",t[t.Uf=47]="Slash",t[t.td=59]="Semicolon",t[t.gf=58]="Colon"})(fs||(fs={}));const ITemplateElementFactory=DI.en("ITemplateElementFactory").hn();Profiler.Bn("TemplateElementFactory");class Se{constructor(dom){this.dom=dom,this.template=dom.yb()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}yb(t){if("string"==typeof t){const template=this.template;template.innerHTML=t;const s=template.content.firstElementChild;return null===s||"TEMPLATE"!==s.nodeName||null!==s.nextElementSibling?(this.template=this.dom.yb(),template):(template.content.removeChild(s),s)}if("TEMPLATE"!==t.nodeName){const template=this.dom.yb();return template.content.appendChild(t),template}return null!==t.parentNode&&t.parentNode.removeChild(t),t}}Se.inject=[IDOM];const Le=Object.freeze({required:0,compiler:"default"});Profiler.Bn("TemplateCompiler");class Pe{constructor(t,s,i){this.yu=t,this.Pb=s,this.Db=i,this.Qb=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,s){const i=new TemplateBinder(dom,new ResourceModel(s),this.Pb,this.Db),template=t.template=this.yu.yb(t.template),n=i.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.zi||(t.instructions=[]),1==n.hasSlots&&(t.hasSlots=1),this.Qb=t.instructions;const e=n.attributes,r=e.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.zi||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.Gb(e[t])}return this.Zb(n),this.Qb=null,t}Zb(t){if(8192&t.flags){const{childNodes}=t;let s;const i=childNodes.length;for(let t=0;i>t;++t)if(128&(s=childNodes[t]).flags)this.Qb.push([new TextBindingInstruction(s.ol)]);else if(32&s.flags){const t=s.Jg,instructions=[];let i;const n=t.length;for(let s=0;n>s;++s)instructions[s]=new LetBindingInstruction((i=t[s]).cr,i.target);this.Qb.push([new LetElementInstruction(instructions,s.toViewModel)])}else this.Xb(s)}}Jb(t){const s=this.Yb(t,1);s[0]=new HydrateElementInstruction(t.res,this._b(t),this.xb(t)),this.Qb.push(s)}tp(t){const s=this.Yb(t,0);s.length>0&&this.Qb.push(s),this.Zb(t)}Xb(t){switch(511&t.flags){case 16:this.Jb(t);break;case 64:this.tp(t);break;case 1:this.sp(t)}}sp(t){const s=this._b(t),i=this.Qb,n=this.Qb=[];this.Xb(t.template),this.Qb=i,this.Qb.push([new HydrateTemplateController({name:null===t._g?t.res:t._g,template:t.xg,instructions:n,build:Le},t.res,s,"else"===t.res)])}_b(t){let s;if(4096&t.flags){const{Jg:i}=t,n=i.length;s=Array(n);let e=0;for(;n>e;++e)s[e]=this.ip(i[e])}else s=PLATFORM.zi;return s}ip(t){return null===t.command?null===t.cr?new SetPropertyInstruction(t.wi,t.bindable.Qs):new InterpolationInstruction(t.cr,t.bindable.Qs):t.command.compile(t)}Yb(t,s){let i;if(2048&t.flags){const{attributes:n}=t,e=n.length;i=Array(s+e);for(let t=0;e>t;++t)i[t+s]=this.Gb(n[t])}else i=s>0?Array(s):PLATFORM.zi;return i}np(t){const s=this._b(t);return new HydrateAttributeInstruction(t.res,s)}ep(t){return null===t.command?null===t.cr?new SetAttributeInstruction(t.Zs.wi,t.Zs.target):new InterpolationInstruction(t.cr,t.Zs.target):t.command.compile(t)}Gb(t){return"ref"===t.Zs.target?new RefBindingInstruction(t.Zs.wi):4&t.flags?this.np(t):this.ep(t)}xb(t){let parts;if(16384&t.flags){parts={};const s=t.parts,i=s.length;let n,e,r;for(let t=0;i>t;++t)r=s[t],n=this.Qb,e=this.Qb=[],this.Xb(r.template),parts[r.name]={name:r.name,template:r.xg,instructions:e,build:Le},this.Qb=n}else parts=PLATFORM.Dt;return parts}}Pe.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const De=[Pe,Se],Me=[TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand];ds=Object.freeze({TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,ITemplateCompilerRegistration:Pe,ITemplateElementFactoryRegistration:Se,DefaultComponents:De,TriggerBindingCommandRegistration:TriggerBindingCommand,DelegateBindingCommandRegistration:DelegateBindingCommand,CaptureBindingCommandRegistration:CaptureBindingCommand,DefaultBindingLanguage:Me,BasicConfiguration:{register:t=>Oe.register(t).register(...Hn,...DefaultBindingSyntax,...DefaultBindingLanguage,...De,...Me),sn(){return this.register(DI.sn())}},stringifyDOM,stringifyInstructions,stringifyTemplateDefinition,TemplateBinder,ITemplateElementFactory});class je{constructor(t){this.Xu=t}static register(t){return Registration.singleton(IDOMInitializer,this).register(t)}initialize(t){if(this.Xu.has(IDOM,0))return this.Xu.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(window,null!==t.host.ownerDocument?t.host.ownerDocument:document,Node,Element,HTMLElement):new HTMLDOM(window,document,Node,Element,HTMLElement),Registration.T(IDOM,dom).register(this.Xu),dom}}je.inject=[IContainer];const Fe=[je],Ue={register:t=>Oe.register(t).register(...Fe),sn(){return this.register(DI.sn())}};return gs=Object.freeze({rp:je,DefaultComponents:Fe,BasicConfiguration:Ue}),Profiler.Bn("BasicConfiguration"),ws=Object.freeze({BasicConfiguration:{register:t=>(Ue.register(t).register(...DefaultBindingLanguage,...DefaultBindingSyntax,...Hn,...Me,...De),t),sn(){return this.register(DI.sn())}}}),t.kernel=_t,t.runtime=ns,t.runtimeHtml=as,t.runtimeHtmlBrowser=gs,t.jit=us,t.jitHtml=ds,t.jitHtmlBrowser=ws,t})({});
