function $noop(){}function createContainer(...e){return 0===arguments.length?new Container:(new Container).register(...e)}function createResolver(e){return function(t){const n=function(e,t,r){DI.inject(n)(e,t,r)};return n.resolve=function(n,r){return e(t,n,r)},n}}function transientDecorator(e){return DI.transient(e)}function transient(e){return void 0===e?transientDecorator:transientDecorator(e)}function singletonDecorator(e){return DI.singleton(e)}function singleton(e){return void 0===e?singletonDecorator:singletonDecorator(e)}function isRegistry(e){return"function"==typeof e.register}function isClass(e){return void 0!==e.prototype}function validateKey(e){if(null==e||e===Object)throw Reporter.error(5)}function buildAllResponse(e,t,n){if(e instanceof Resolver&&4===e.strategy){const r=e.state;let i=r.length;const s=Array(i);for(;i--;)s[i]=r[i].resolve(t,n);return s}return[e.resolve(t,n)]}function invokeWithDynamicDependencies(e,t,n,r){let i,s=n.length,o=Array(s);for(;s--;){if(null==(i=n[s]))throw Reporter.error(7,`Index ${s}.`);o[s]=e.get(i)}return void 0!==r&&(o=o.concat(r)),Reflect.construct(t,o)}function invokeCallback(e,t,n){try{e(t,n)}catch(e){Reporter.error(0,e)}}function invokeHandler(e,t){try{e.t(t)}catch(e){Reporter.error(0,e)}}const $global=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(e){return{}}})(),$now=(function(){let e,t,n,r,i;if(null!=$global.performance&&$global.performance.now){const e=$global.performance;return function(){return e.now()}}if(null!=$global.process&&$global.process.i){const s=function(){return(e()-r)/1e6};return t=$global.process.i,n=(e=function(){let e;return 1e9*(e=t())[0]+e[1]})(),i=1e9*$global.process.s(),r=n-i,s}})(),{o:$mark,l:$measure,u:$getEntriesByName,h:$getEntriesByType,g:$clearMarks,v:$clearMeasures}=(function(){if(null!=$global.performance&&$global.performance.mark&&$global.performance.measure&&$global.performance.getEntriesByName&&$global.performance.getEntriesByType&&$global.performance.clearMarks&&$global.performance.clearMeasures){const e=$global.performance;return{o(name){e.mark(name)},l(name,t,n){e.measure(name,t,n)},u:name=>e.getEntriesByName(name),h:type=>e.getEntriesByType(type),g(name){e.clearMarks(name)},v(name){e.clearMeasures(name)}}}if(null!=$global.process&&$global.process.i){const e=[],t={},n=function(t,value){let n=0;const r=e.length,i=[];for(;r>n;n++)e[n][t]===value&&i.push(e[n]);return i},r=function(type,name){let t,n=e.length;for(;n--;)(t=e[n]).entryType!==type||void 0!==name&&t.name!==name||e.splice(n,1)};return{o(name){const n={name,entryType:"mark",startTime:$now(),duration:0};e.push(n),t[name]=n},l(name,n,r){let i,s;if(void 0!==r&&void 0===t[r])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${r}' does not exist.`);if(void 0!==n&&void 0===t[n])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${n}' does not exist.`);i=t[n]?t[n].startTime:0,s=t[r]?t[r].startTime:$now(),e.push({name,entryType:"measure",startTime:i,duration:s-i})},u:name=>n("name",name),h:type=>n("entryType",type),g(name){r("mark",name)},v(name){r("measure",name)}}}})(),{$:$raf,p:$caf}=(function(){const e=["moz","webkit"],t="AnimationFrame";let n=$global[`request${t}`],r=$global[`cancel${t}`]||$global[`cancelRequest${t}`];for(let i=0;!n&&2>i;++i)n=$global[`${e[i]}Request${t}`],r=$global[`${e[i]}Cancel${t}`]||$global[`${e[i]}CancelRequest${t}`];if(!n||!r){let e=0,t=0;const i=[],s=1e3/60;n=function(n){let r,o;return 0===i.length&&(r=$now(),e=(o=Math.max(0,s-(r-e)))+r,setTimeout(function(){const t=i.slice(0);i.length=0;for(let n=0;t.length>n;++n)if(!t[n].m)try{t[n].k(e)}catch(e){setTimeout(function(){throw e},0)}},Math.round(o))),i.push({t:++t,k:n,m:0}),t},r=function(e){for(let t=0;i.length>t;++t)i[t].t===e&&(i[t].m=1)}}const i=function(e){return n.call($global,e)};return i.cancel=function(){r.apply($global,arguments)},$global.requestAnimationFrame=n,$global.cancelAnimationFrame=r,{$:i,p:r}})();class Notifier{constructor(e,t=null){this.R=e,this.context=t,this.next=null,this.D=null,this.C=0}T(e,t){return this.R===e&&this.context===(void 0===t?null:t)}I(e){null!==this.R&&(null!==this.context?this.R.call(this.context,e):this.R(e));const t=this.next;return this.C&&(this.next=null),t}connect(e){this.D=e,null!==e.next&&(e.next.D=this),this.next=e.next,e.next=this}disconnect(e=0){this.C=1,this.R=null,this.context=null,null!==this.D&&(this.D.next=this.next),null!==this.next&&(this.next.D=this.D);const t=this.next;return this.next=e?null:t,this.D=null,t}}class Ticker{constructor(){this.head=new Notifier(null,null),this.M=-1,this.L=1,this.A=-1,this.F=0,this.O=null,this.resolve=$noop,this.W=(e=>{this.M=-1,this.F&&(this.update(e),this.F&&-1===this.M&&null!==this.head.next&&(this.M=$raf(this.W))),this.resolve(e),this.resolve=$noop,this.O=null})}add(e,t){const n=new Notifier(e,t);let r=this.head.next,i=this.head;if(null===r)n.connect(i);else{for(;null!==r;)i=r,r=r.next;null===n.D&&n.connect(i)}return this.F?this.j():this.start(),this}remove(e,t){let n=this.head.next;for(;null!==n;)n=n.T(e,t)?n.disconnect():n.next;return null===this.head.next&&this.B(),this}start(){this.F||(this.F=1,this.j())}stop(){this.F&&(this.F=0,this.B())}update(e=$now()){let t;if(e>this.A){this.L=~~(60*(t=e-this.A)+.5)/1e3;const n=this.head;let r=n.next;for(;null!==r;)r=r.I(this.L);null===n.next&&this.B()}else this.L=0;this.A=e}P(){return null===this.O&&(this.O=new Promise(e=>{this.resolve=e})),this.O}j(){-1===this.M&&null!==this.head.next&&(this.A=$now(),this.M=$raf(this.W))}B(){-1!==this.M&&($caf(this.M),this.M=-1)}}const camelCaseLookup={},kebabCaseLookup={},PLATFORM={global:$global,N:new Ticker,S:Object.freeze([]),q:Object.freeze({}),K:$noop,now:$now,mark:$mark,measure:$measure,getEntriesByName:$getEntriesByName,getEntriesByType:$getEntriesByType,clearMarks:$clearMarks,clearMeasures:$clearMeasures,H(e){let value=camelCaseLookup[e];if(void 0!==value)return value;value="";let t,n=1,r=0;for(let i=0,s=e.length;s>i;++i)"-"===(t=e.charAt(i))||"."===t||"_"===t?r=1:(value+=n?t.toLowerCase():r?t.toUpperCase():t,r=0),n=0;return camelCaseLookup[e]=value},U(e){let value=kebabCaseLookup[e];if(void 0!==value)return value;value="";let t,n,r=1;for(let i=0,s=e.length;s>i;++i)n=(t=e.charAt(i)).toLowerCase(),value+=r?n:t!==n?`-${n}`:n,r=0;return kebabCaseLookup[e]=value},toArray(e){const t=e.length,n=Array(t);for(let r=0;t>r;++r)n[r]=e[r];return n},requestAnimationFrame:e=>$raf(e),clearInterval(e){$global.clearInterval(e)},clearTimeout(e){$global.clearTimeout(e)},setInterval:(e,t,...n)=>$global.setInterval(e,t,...n),setTimeout:(e,t,...n)=>$global.setTimeout(e,t,...n)},Reporter={write(e,...t){},error:e=>Error(`Code ${e}`)},Tracer={enabled:0,_:0,G:null,J(name,e){},V(){},X(e){},Y(e){},Z(e){},ee(){}};"getOwnMetadata"in Reflect||(Reflect.getOwnMetadata=function(e,t){return t[e]},Reflect.metadata=function(e,t){return function(n){n[e]=t}});const DI={te:createContainer,ne:e=>Reflect.getOwnMetadata("design:paramtypes",e)||PLATFORM.S,re(e){let dependencies;if(void 0===e.inject)dependencies=DI.ne(e);else{dependencies=[];let t=e;for(;"function"==typeof t;)t.hasOwnProperty("inject")&&dependencies.push(...t.inject),t=Object.getPrototypeOf(t)}return dependencies},ie(e){const t=function(e,n,r){if(void 0===e)throw Reporter.error(16,t.se,t);return(e.inject||(e.inject=[]))[r]=t,e};return t.se=e||"Interface",t.oe=function(){return t},t.le=function(e){return t.le=function(){throw Reporter.error(17,t)},t.register=function(n,r){const i=r||t;return e({ae:value=>n.ce(i,new Resolver(i,0,value)),singleton:value=>n.ce(i,new Resolver(i,1,value)),transient:value=>n.ce(i,new Resolver(i,2,value)),k:value=>n.ce(i,new Resolver(i,3,value)),ue:e=>n.ce(i,new Resolver(i,5,e))})},t},t},inject:(...dependencies)=>(function(e,t,n){if("number"==typeof n){if(!e.hasOwnProperty("inject")){const t=DI.ne(e);e.inject=t.slice()}1===dependencies.length&&(e.inject[n]=dependencies[0])}else if(t){const n=e.constructor;(n.inject||(n.inject={}))[t]=dependencies[0]}else if(n)n.value.inject=dependencies;else if(0===dependencies.length){const t=DI.ne(e);e.inject=t.slice()}else e.inject=dependencies}),transient:e=>(e.register=function(t){return Registration.transient(e,e).register(t,e)},e),singleton:e=>(e.register=function(t){return Registration.singleton(e,e).register(t,e)},e)},IContainer=DI.ie("IContainer").oe(),IServiceLocator=IContainer,inject=DI.inject,all=createResolver((e,t,n)=>n.getAll(e)),lazy=createResolver((e,t,n)=>{let r=null;return()=>(null===r&&(r=n.get(e)),r)}),optional=createResolver((e,t,n)=>n.has(e,1)?n.get(e):null);var ResolverStrategy;(function(e){e[e.ae=0]="instance",e[e.singleton=1]="singleton",e[e.transient=2]="transient",e[e.k=3]="callback",e[e.he=4]="array",e[e.fe=5]="alias"})(ResolverStrategy||(ResolverStrategy={}));class Resolver{constructor(e,strategy,t){this.key=e,this.strategy=strategy,this.state=t}register(e,t){return e.ce(t||this.key,this)}resolve(e,t){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const t=e.ge(this.state);return this.state=t.construct(e)}case 2:return e.ge(this.state).construct(t);case 3:return this.state(e,t,this);case 4:return this.state[0].resolve(e,t);case 5:return e.get(this.state);default:throw Reporter.error(6,this.strategy)}}ge(e){switch(this.strategy){case 1:case 2:return e.ge(this.state);default:return null}}}class Factory{constructor(e,t,dependencies){this.ve=e,this.$e=t,this.dependencies=dependencies,this.de=null}static create(e){const dependencies=DI.re(e);return new Factory(e,classInvokers[dependencies.length]||fallbackInvoker,dependencies)}construct(e,t){const n=this.de;let r=void 0!==t?this.$e.ye(e,this.ve,this.dependencies,t):this.$e.pe(e,this.ve,this.dependencies);if(null===n)return r;for(let e=0,t=n.length;t>e;++e)r=n[e](r);return r}be(e){return null===this.de&&(this.de=[]),this.de.push(e),1}}const containerResolver={resolve:(e,t)=>t};class Container{constructor(e={}){this.parent=null,this.me=0,this.ke=new Map,this.Re=e,this.we=e.we||(e.we=new Map),this.De=e.De||(e.De=Object.create(null)),this.ke.set(IContainer,containerResolver)}register(...e){if(100==++this.me)throw Error("Unable to autoregister dependency");let t,n,value,r,i;for(let s=0,o=e.length;o>s;++s)if(isRegistry(t=e[s]))t.register(this);else if(isClass(t))Registration.singleton(t,t).register(this);else for(r=0,i=(n=Object.keys(t)).length;i>r;++r)isRegistry(value=t[n[r]])?value.register(this):this.register(value);return--this.me,this}ce(e,t){validateKey(e);const n=this.ke,r=n.get(e);return void 0===r?(n.set(e,t),"string"==typeof e&&(this.De[e]=t)):r instanceof Resolver&&4===r.strategy?r.state.push(t):n.set(e,new Resolver(e,4,[r,t])),t}be(e,t){const n=this.Ce(e);if(null===n)return 0;if(n.ge){const e=n.ge(this);return null===e?0:e.be(t)}return 0}Ce(e,t=1){if(validateKey(e),e.resolve)return e;let n,r=this;for(;null!==r;){if(void 0!==(n=r.ke.get(e)))return n;if(null===r.parent)return t?this.Te(e,r):null;r=r.parent}return null}has(e,t=0){return this.ke.has(e)?1:t&&null!==this.parent?this.parent.has(e,1):0}get(e){if(validateKey(e),e.resolve)return e.resolve(this,this);let t,n=this;for(;null!==n;){if(void 0!==(t=n.ke.get(e)))return t.resolve(n,this);if(null===n.parent)return(t=this.Te(e,n)).resolve(n,this);n=n.parent}}getAll(e){validateKey(e);let t,n=this;for(;null!==n;){if(void 0!==(t=n.ke.get(e)))return buildAllResponse(t,n,this);if(null===this.parent)return PLATFORM.S;n=n.parent}return PLATFORM.S}ge(e){let t=this.we.get(e);return void 0===t&&(t=Factory.create(e),this.we.set(e,t)),t}Ie(){const e=this.Re,t={we:e.we,De:Object.assign({},e.De)},n=new Container(t);return n.parent=this,n}Te(e,t){if(e.register){const n=e.register(t,e);if(!n||!n.resolve)throw Reporter.error(40);return n}const n=new Resolver(e,1,e);return t.ke.set(e,n),n}}const Registration={ae:(e,value)=>new Resolver(e,0,value),singleton:(e,value)=>new Resolver(e,1,value),transient:(e,value)=>new Resolver(e,2,value),k:(e,t)=>new Resolver(e,3,t),fe:(e,t)=>new Resolver(t,5,e),Me:(e,...t)=>({register(n){const r=n.Ce(e);if(null!==r){let e=null;if(r.ge){const i=r.ge(n);null!==i&&(e=i.construct(n,t))}else e=r.resolve(n,n);null!==e&&e.register(n)}}})},classInvokers=[{pe:(e,t)=>new t,ye:invokeWithDynamicDependencies},{pe:(e,t,n)=>new t(e.get(n[0])),ye:invokeWithDynamicDependencies},{pe:(e,t,n)=>new t(e.get(n[0]),e.get(n[1])),ye:invokeWithDynamicDependencies},{pe:(e,t,n)=>new t(e.get(n[0]),e.get(n[1]),e.get(n[2])),ye:invokeWithDynamicDependencies},{pe:(e,t,n)=>new t(e.get(n[0]),e.get(n[1]),e.get(n[2]),e.get(n[3])),ye:invokeWithDynamicDependencies},{pe:(e,t,n)=>new t(e.get(n[0]),e.get(n[1]),e.get(n[2]),e.get(n[3]),e.get(n[4])),ye:invokeWithDynamicDependencies}],fallbackInvoker={pe:invokeWithDynamicDependencies,ye:invokeWithDynamicDependencies},Profiler=(function(){const e=PLATFORM.now,t=[];let n;const r={Le(name){t.push(name);let r=0,i=0;return{J(){1==++r&&(i=e(),++n[name].Ae),++n[name].Ee},V(){0==--r&&(n[name].duration+=e()-i)}}},enable(){n={};for(const e of t)n[e]={name:e,duration:0,Ae:0,Ee:0};r.enabled=1},disable(){r.enabled=0},Fe(e){Object.keys(n).map(e=>n[e]).sort((e,t)=>t.duration-e.duration).forEach(t=>{e(t.name,t.duration,t.Ae,t.Ee)})},enabled:0};return r})();class RuntimeCompilationResources{constructor(e){this.context=e}find(e,name){const t=e.Oe(name),n=this.context.De;let r=n[t];if(void 0===r&&(r=n[t]=this.context.Ce(t,0)),null!==r&&r.ge){const e=r.ge(this.context);if(null!==e){const t=e.ve.description;return void 0===t?null:t}}return null}create(e,name){const t=e.Oe(name),n=this.context.De;let r=n[t];if(void 0===r&&(r=n[t]=this.context.Ce(t,0)),null!==r){const e=r.resolve(this.context,this.context);return void 0===e?null:e}return null}}class Handler{constructor(e,t){this.We=e,this.k=t}t(e){e instanceof this.We&&this.k.call(null,e)}}class EventAggregator{constructor(){this.je={},this.messageHandlers=[]}Be(e,t){let n,r;if(!e)throw Reporter.error(0);if("string"==typeof e){const i=e;if(n=this.je[i])for(r=(n=n.slice()).length;r--;)invokeCallback(n[r],t,i)}else{const t=e;for(r=(n=this.messageHandlers.slice()).length;r--;)invokeHandler(n[r],t)}}subscribe(e,t){let n,r;if(!e)throw Reporter.error(0);if("string"==typeof e){const i=e;n=t,r=this.je[i]||(this.je[i]=[])}else n=new Handler(e,t),r=this.messageHandlers;return r.push(n),{Pe(){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}}Ne(e,t){const n=this.subscribe(e,(e,r)=>(n.Pe(),t(e,r)));return n}}export{all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton,transient,PLATFORM,Reporter,Tracer,Profiler,RuntimeCompilationResources,EventAggregator};
