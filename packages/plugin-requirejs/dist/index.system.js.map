{"version":3,"file":"index.system.js","sources":["../src/processing.ts","../src/component.ts","../src/view.ts","../src/configuration.ts"],"sourcesContent":["export interface ITemplateImport {\n  plugin: string | null;\n  extension: string | null;\n  basename: string;\n  path: string;\n}\n\nexport interface ITemplateDescription {\n  template: string;\n  imports: ITemplateImport[];\n}\n\nexport function processImports(toProcess: ITemplateImport[], relativeTo: string): string[] {\n  return toProcess.map(x => {\n    if (x.extension === '.html' && !x.plugin) {\n      return `component!${relativeToFile(x.path, relativeTo) + x.extension}`;\n    }\n\n    const relativePath = relativeToFile(x.path, relativeTo);\n    return x.plugin ? `${x.plugin}!${relativePath}` : relativePath;\n  });\n}\n\nconst capitalMatcher = /([A-Z])/g;\n\n/** @internal */\nexport function addHyphenAndLower(char: string): string {\n  return `-${char.toLowerCase()}`;\n}\n\nexport function kebabCase(name: string): string {\n  return (name.charAt(0).toLowerCase() + name.slice(1)).replace(capitalMatcher, addHyphenAndLower);\n}\n\nexport function escape(content: string): string {\n  return content.replace(/(['\\\\])/g, '\\\\$1')\n            .replace(/[\\f]/g, '\\\\f')\n            .replace(/[\\b]/g, '\\\\b')\n            .replace(/[\\n]/g, '\\\\n')\n            .replace(/[\\t]/g, '\\\\t')\n            .replace(/[\\r]/g, '\\\\r')\n            .replace(/[\\u2028]/g, '\\\\u2028')\n            .replace(/[\\u2029]/g, '\\\\u2029');\n}\n\nexport function createTemplateDescription(template: string): ITemplateDescription {\n  const imports: ITemplateImport[] = [];\n  const cleanedTemplate = template.replace(/^@import\\s+\\'([a-zA-z\\/.\\-_!%&\\?=0-9]*)\\'\\s*;/gm, (match: string, url: string) => {\n    imports.push(parseImport(url));\n    return '';\n  });\n\n  return {\n    template: cleanedTemplate.trim(),\n    imports\n  };\n}\n\nexport function parseImport(value: string): ITemplateImport {\n  const result: Partial<ITemplateImport> & Pick<ITemplateImport, 'path'> = {\n    path: value\n  };\n\n  const pluginIndex = result.path.lastIndexOf('!');\n  if (pluginIndex !== -1) {\n    result.plugin = result.path.slice(pluginIndex + 1);\n    result.path = result.path.slice(0, pluginIndex);\n  } else {\n    result.plugin = null;\n  }\n\n  const extensionIndex = result.path.lastIndexOf('.');\n  if (extensionIndex !== -1) {\n    result.extension = result.path.slice(extensionIndex).toLowerCase();\n    result.path = result.path.slice(0, extensionIndex);\n  } else {\n    result.extension = null;\n  }\n\n  const slashIndex = result.path.lastIndexOf('/');\n  if (slashIndex !== -1) {\n    result.basename = result.path.slice(slashIndex + 1);\n  } else {\n    result.basename = result.path;\n  }\n\n  return result as ITemplateImport;\n}\n\nexport function relativeToFile(name: string, file: string): string {\n  const fileParts = file && file.split('/');\n  const nameParts = name.trim().split('/');\n\n  if (nameParts[0].charAt(0) === '.' && fileParts) {\n    //Convert file to array, and lop off the last part,\n    //so that . matches that 'directory' and not name of the file's\n    //module. For instance, file of 'one/two/three', maps to\n    //'one/two/three.js', but we want the directory, 'one/two' for\n    //this normalization.\n    const normalizedBaseParts = fileParts.slice(0, fileParts.length - 1);\n    nameParts.unshift(...normalizedBaseParts);\n  }\n\n  trimDots(nameParts);\n\n  return nameParts.join('/');\n}\n\ninterface Require {\n  nodeRequire(name: string): unknown;\n}\n\ndeclare const require: Require;\n\nexport function loadFromFile(url: string, callback: (content: string) => void, errback: (error: Error) => void): void {\n  const fs = require.nodeRequire('fs') as {readFileSync(path: string, options?: { encoding?: string } | string): string};\n\n  try {\n    // tslint:disable-next-line:non-literal-fs-path\n    let file = fs.readFileSync(url, 'utf8');\n\n    //Remove BOM (Byte Mark Order) from utf8 files if it is there.\n    if (file[0] === '\\uFEFF') {\n        file = file.substring(1);\n    }\n\n    callback(file);\n  } catch (e) {\n    if (errback) {\n      errback(e);\n    }\n  }\n}\n\n/** @internal */\nexport function trimDots(ary: string[]): void {\n  for (let i = 0; i < ary.length; ++i) {\n    const part = ary[i];\n    if (part === '.') {\n      ary.splice(i, 1);\n      i -= 1;\n    } else if (part === '..') {\n      // If at the start, or previous value is still ..,\n      // keep them so that when converted to a path it may\n      // still work when converted to a path, even though\n      // as an ID it is less than ideal. In larger point\n      // releases, may be better to just kick out an error.\n      if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\n        // tslint:disable-next-line:no-redundant-jump\n        continue;\n      } else if (i > 0) {\n        ary.splice(i - 1, 2);\n        i -= 2;\n      }\n    }\n  }\n}\n","import { CustomElementResource } from '@aurelia/runtime';\nimport { createTemplateDescription, escape, kebabCase, loadFromFile, parseImport, processImports } from './processing';\nimport { Require, RequireConfig, RequireOnLoad } from './types';\n\nconst buildMap = {};\n\nfunction finishLoad(name: string, content: string, onLoad: (content: string) => void): void {\n  buildMap[name] = content;\n  onLoad(content);\n}\n\nexport function load(name: string, req: Require, onLoad: RequireOnLoad, config: RequireConfig): void {\n  if (config.isBuild) {\n    loadFromFile(\n      req.toUrl(name),\n      function(content: string): void { finishLoad(name, content, onLoad); },\n      function(err: Error): void { if (onLoad.error) { onLoad.error(err); } }\n    );\n  } else {\n    req([`text!${name}`], function(text: string): void {\n      const description = createTemplateDescription(text);\n      const depsToLoad = processImports(description.imports, name);\n\n      req(depsToLoad, function(): void {\n        const templateImport = parseImport(name);\n        const templateSource = {\n          name: kebabCase(templateImport.basename),\n          template: description.template,\n          build: {\n            required: true,\n            compiler: 'default'\n          },\n          dependencies: Array.prototype.slice.call(arguments, 1)\n        };\n\n        onLoad({default: CustomElementResource.define(templateSource, null)});\n      });\n    });\n  }\n}\n\nexport function write(pluginName: string, moduleName: string, writer: (content: string) => void, _config: RequireConfig): void {\n  if (buildMap.hasOwnProperty(moduleName)) {\n    const templateImport = parseImport(moduleName);\n    const text = buildMap[moduleName];\n    const description = createTemplateDescription(text);\n    const depsToLoad = processImports(description.imports, moduleName);\n    const depsToLoadMapped = depsToLoad.map(x => `\"${x}\"`).join(',');\n\n    depsToLoad.unshift('@aurelia/runtime');\n\n    writer(`define(\"${pluginName}!${moduleName}\", [${depsToLoadMapped}], function() {\n      var Component = arguments[0].Component;\n      var templateSource = {\n        name: '${kebabCase(templateImport.basename)}',\n        template: '${escape(description.template)}',\n        build: {\n          required: true,\n          compiler: 'default'\n        },\n        dependencies: Array.prototype.slice.call(arguments, 1)\n      };\n\n      return { default: Component.element(templateSource) };\n    });\\n`);\n  }\n}\n","import { createTemplateDescription, escape, kebabCase, loadFromFile, parseImport, processImports } from './processing';\nimport { Require, RequireConfig, RequireOnLoad } from './types';\n\nconst buildMap = {};\n\n/** @internal */\nexport function finishLoad(name: string, content: string, onLoad: (content: string) => void): void {\n  buildMap[name] = content;\n  onLoad(content);\n}\n\nexport function load(name: string, req: Require, onLoad: RequireOnLoad, config: RequireConfig): void {\n  if (config.isBuild) {\n    loadFromFile(\n      req.toUrl(name),\n      function(content: string): void { finishLoad(name, content, onLoad); },\n      function(error: Error): void { if (onLoad.error) { onLoad.error(error); } }\n    );\n  } else {\n    req([`text!${name}`], function(text: string): void {\n      const description = createTemplateDescription(text);\n      const depsToLoad = processImports(description.imports, name);\n      const templateImport = parseImport(name);\n\n      req(depsToLoad, function(): void {\n        const templateSource = {\n          name: kebabCase(templateImport.basename),\n          template: description.template,\n          build: {\n            required: true,\n            compiler: 'default'\n          },\n          dependencies: Array.prototype.slice.call(arguments)\n        };\n\n        onLoad({default: templateSource});\n      });\n    });\n  }\n}\n\nexport function write(pluginName: string, moduleName: string, writer: (content: string) => void, _config: RequireConfig): void {\n  if (buildMap.hasOwnProperty(moduleName)) {\n    const text = buildMap[moduleName];\n    const description = createTemplateDescription(text);\n    const depsToLoad = processImports(description.imports, moduleName);\n    const depsToLoadMapped = depsToLoad.map(x => `\"${x}\"`).join(',');\n    const templateImport = parseImport(moduleName);\n\n    writer(`define(\"${pluginName}!${moduleName}\", [${depsToLoadMapped}], function() {\n      var templateSource = {\n        name: '${kebabCase(templateImport.basename)}',\n        template: '${escape(description.template)}',\n        build: {\n          required: true,\n          compiler: 'default'\n        },\n        dependencies: Array.prototype.slice.call(arguments)\n      };\n\n      return { default: templateSource };\n    });\\n`);\n  }\n}\n","import * as componentPlugin from './component';\nimport * as viewPlugin from './view';\n\ndeclare function define(name: string, deps: unknown[], moduleObject: {}): void;\nconst nonAnonDefine = define;\n\nexport function installRequireJSPlugins(): void {\n  nonAnonDefine('view', [], viewPlugin);\n  nonAnonDefine('component', [], componentPlugin);\n}\n"],"names":["buildMap","finishLoad","load","write"],"mappings":"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"}