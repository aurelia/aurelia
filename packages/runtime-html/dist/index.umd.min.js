(function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("@aurelia/kernel"),require("@aurelia/runtime")):"function"==typeof define&&define.amd?define(["exports","@aurelia/kernel","@aurelia/runtime"],s):s((t=t||self).runtimeHtml={},t.kernel,t.runtime)})(this,function(t,kernel,runtime){"use strict";function s(t,s,i,e){var h,n,r=arguments.length,o=3>r?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,i,e);else for(n=t.length-1;n>=0;n--)(h=t[n])&&(o=(3>r?h(o):r>3?h(s,i,o):h(s,i))||o);return r>3&&o&&Object.defineProperty(s,i,o),o}function i(t){return t.t&&t.t()[0]||t.s&&t.s()[0]||t.path&&t.path[0]||t.target}function e(){this.i(),this.h=1}function h(t){t.h=0;let s=i(t);const h=[];for(;s;){if(s.o){const i=s.o[t.type];i&&(t.stopPropagation!==e&&(t.i=t.stopPropagation,t.stopPropagation=e),h.push(i))}s=s.parentNode}for(let s=h.length-1;s>=0&&!t.h;s--){const i=h[s];"handleEvent"in i?i.l(t):i(t)}}function n(t){t.h=0;let s=i(t);for(;s&&!t.h;){if(s.u){const i=s.u[t.type];i&&(t.stopPropagation!==e&&(t.i=t.stopPropagation,t.stopPropagation=e),"handleEvent"in i?i.l(t):i(t))}s=s.parentNode}}function r(t,s){return t===s}function o(t,s,i){if(1==j[s])return 1;const e=s.slice(0,5);return j[s]="aria-"===e||"data-"===e||i.g(t,s)}function c(t){const s=i(t);if(this.target===s)return this.p(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,s,i){return"string"==typeof t?(function(dom,s,i,e){const instructions=[],h=[],dependencies=[],n=dom.createElement(t);let r=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(r=1,instructions.push(value)):dom.setAttribute(n,to,value)}),r&&(dom.m(n),h.push(instructions)),e&&l(dom,n,e,h,dependencies),new RenderPlan(dom,n,h,dependencies)})(dom,0,s,i):(function(dom,t,s,i){const e=t.description.name,instructions=[],h=[instructions],dependencies=[],n=[],bindables=t.description.bindables,r=dom.createElement(e);return dom.m(r),dependencies.includes(t)||dependencies.push(t),instructions.push(new runtime.HydrateElementInstruction(e,n)),s&&Object.keys(s).forEach(to=>{const value=s[to];if(isHTMLTargetedInstruction(value))n.push(value);else{n.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),i&&l(dom,r,i,h,dependencies),new RenderPlan(dom,r,h,dependencies)})(dom,t,s,i)}function l(dom,t,s,i,dependencies){for(let e=0,h=s.length;h>e;++e){const h=s[e];switch(typeof h){case"string":dom.appendChild(t,dom.createTextNode(h));break;case"object":dom.v(h)?dom.appendChild(t,h):"mergeInto"in h&&h.C(t,i,dependencies)}}}var u,HTMLTargetedInstructionType,NodeType,a;class Listener{constructor(dom,t,s,i,e,preventDefault,h,n){this.dom=dom,this.V=null,this.A=null,this.$state=0,this.j=s,this.k=n,this.preventDefault=preventDefault,this.T=i,this.target=e,this.O=t,this.M=h}L(t){const s=this.$scope.S;s.R=t;const i=this.T.evaluate(1048576,this.$scope,this.k);return Reflect.deleteProperty(s,"$event"),1!=i&&this.preventDefault&&t.preventDefault(),i}l(t){this.L(t)}N(t,s){if(2&this.$state){if(this.$scope===s)return;this.D(2048|t)}this.$state|=1,this.$scope=s;const i=this.T;runtime.hasBind(i)&&i.bind(t,s,this),this.I=this.M.addEventListener(this.dom,this.target,this.O,this,this.j),this.$state|=2,this.$state&=-2}D(t){if(!(2&this.$state))return;this.$state|=64;const s=this.T;runtime.hasUnbind(s)&&s.B(t,this.$scope,this),this.$scope=null,this.I.F(),this.I=null,this.$state&=-67}P(t,s,i){}U(t,s,i){}}t.AttributeNSAccessor=class{constructor(t,s,i,e,h){this.$=1,this.attributeName=e,this.q=t,this.H=s,this.oldValue=this._=this.G(),this.X=i,this.Z=h}G(){return this.H.getAttributeNS(this.Z,this.attributeName)}J(t){this.H.setAttributeNS(this.Z,this.attributeName,t)}},t.AttributeNSAccessor=s([runtime.targetObserver("")],t.AttributeNSAccessor);const f=(t,s)=>t===s;t.CheckedObserver=class{constructor(t,s,i,e,h){this.K=67108879&t,this.$=1,this.I=e,this.q=s,this.H=i,this.W=h}G(){return this._}J(t,s){this.Y||(this.Y=this.H.tt&&(this.H.tt.st||this.H.tt.value),this.Y&&this.Y.subscribe(this)),this.it&&(this.it.et(this),this.it=null),"checkbox"===this.H.type&&Array.isArray(t)&&(this.it=this.W.ht(this.K|s,t),this.it.nt(this)),this.rt()}ot(){this.rt(),this.ct(448)}U(t,s,i){this.rt(),this.ct(i)}rt(){const value=this._,t=this.H,s=t.hasOwnProperty("model")?t.st:t.value,i=t.lt||f;t.checked="radio"===t.type?!!i(value,s):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!i(t,s)):0}ct(t){2048&t||this._!==this.oldValue&&this.ut(this._,this.oldValue,this.K|t)}l(){let value=this._;const t=this.H,s=t.hasOwnProperty("model")?t.st:t.value;let i;const e=t.lt||f;if("checkbox"===t.type){if(Array.isArray(value))return i=value.findIndex(t=>!!e(t,s)),void(t.checked&&-1===i?value.push(s):t.checked||-1===i||value.splice(i,1));value=t.checked}else{if(!t.checked)return;value=s}this.oldValue=this._,this._=value,this.ct(327680)}subscribe(t){this.at()||this.I.subscribe(this.H,this),this.ft(t)}unsubscribe(t){this.dt(t)&&!this.at()&&this.I.F()}B(){this.it&&(this.it.et(this),this.it=null),this.Y&&this.Y.unsubscribe(this)}},t.CheckedObserver=s([runtime.targetObserver()],t.CheckedObserver),t.ClassAttributeAccessor=class{constructor(t,s){this.$=1,this.wt=1,this.q=t,this.bt=null,this.H=s,this.version=0}G(){return this._}J(t){const s=this.bt||{};let i,name,e=this.version;if(t.length){const h=this.H;for(let n=0,r=(i=t.split(/\s+/)).length;r>n;n++)(name=i[n]).length&&(s[name]=e,h.classList.add(name))}if(this.bt=s,this.version+=1,0!==e)for(name in e-=1,s)s.hasOwnProperty(name)&&s[name]===e&&this.H.classList.remove(name)}},t.ClassAttributeAccessor=s([runtime.targetObserver("")],t.ClassAttributeAccessor),t.DataAttributeAccessor=class{constructor(t,s,i){this.$=1,this.q=t,this.H=s,this.oldValue=this._=this.G(),this.X=i}G(){return this.H.getAttribute(this.X)}J(t){null===t?this.H.removeAttribute(this.X):this.H.setAttribute(this.X,t)}},t.DataAttributeAccessor=s([runtime.targetObserver()],t.DataAttributeAccessor),t.ElementPropertyAccessor=class{constructor(t,s,i){this.$=1,this.q=t,this.H=s,this.X=i}G(){return this.H[this.X]}J(value){this.H[this.X]=value}},t.ElementPropertyAccessor=s([runtime.targetObserver("")],t.ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,s,i){this.dom=dom,this.gt=i,this.count=0,this.pt=t,this.listener=s}vt(){this.count++,1===this.count&&this.dom.addEventListener(this.pt,this.listener,null,this.gt)}yt(){this.count--,0===this.count&&this.dom.removeEventListener(this.pt,this.listener,null,this.gt)}F(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.pt,this.listener,null,this.gt))}}class DelegateOrCaptureSubscription{constructor(t,s,i,e){this.Ct=t,this.Et=s,this.O=i,s[i]=e}F(){this.Ct.yt(),this.Et[this.O]=null}}class TriggerSubscription{constructor(dom,t,s,i){this.dom=dom,this.target=t,this.O=s,this.Vt=i,dom.addEventListener(s,i,t)}F(){this.dom.removeEventListener(this.O,this.Vt,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.At=t,this.target=null,this.I=null}subscribe(t,s){this.target=t,this.I=s;const i=this.dom.addEventListener,e=this.At;for(let h=0,n=e.length;n>h;++h)i(e[h],s,t)}F(){const t=this.target,s=this.I,i=this.At,e=this.dom.removeEventListener;for(let h=0,n=i.length;n>h;++h)e(i[h],s,t);this.target=this.I=null}}const IEventManager=kernel.DI.kt("IEventManager").jt(t=>t.singleton(d));class d{constructor(){this.Tt={},this.xt={},this.Tt={},this.xt={}}addEventListener(dom,t,s,i,strategy){let e,r,o;if(strategy===runtime.DelegationStrategy.Ot){(o=(e=this.Tt)[s]||(e[s]=new ListenerTracker(dom,s,n,0))).vt();const h=t.u||(t.u={});return new DelegateOrCaptureSubscription(o,h,s,i)}if(strategy===runtime.DelegationStrategy.Mt){(o=(r=this.xt)[s]||(r[s]=new ListenerTracker(dom,s,h,1))).vt();const e=t.o||(t.o={});return new DelegateOrCaptureSubscription(o,e,s,i)}return new TriggerSubscription(dom,t,s,i)}F(){let t;const{Tt:s,xt:i}=this;for(t in s)s[t].F();for(t in i)i[t].F()}}const w={Lt:1,St:1,Rt:1};t.SelectValueObserver=class{constructor(t,s,i,e,h,dom){this.K=67108879&t,this.$=1,this.q=s,this.H=i,this.I=e,this.W=h,this.dom=dom}G(){return this._}J(t,s){const i=Array.isArray(t);if(!i&&null!=t&&this.H.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.it&&(this.it.et(this),this.it=null),i&&(this.it=this.W.ht(this.K|s,t),this.it.nt(this)),this.Nt(),this.ct(s)}ot(t){this.Nt(t)}U(t,s,i){this.Dt(t,this.K|i)}ct(t){if(2048&t)return;const s=this.oldValue,i=this._;i!==s&&this.ut(i,s,this.K|t)}l(){this.It()&&this.ct(327680)}Nt(t){const s=this._,i=Array.isArray(s),e=this.H,h=e.lt||r,n=e.options;let o=n.length;for(;o--;){const t=n[o],e=t.hasOwnProperty("model")?t.st:t.value;t.selected=i?-1!==s.findIndex(t=>!!h(e,t)):!!h(e,s)}}It(){const t=this.H,s=t.options,i=s.length,e=this._;let h=0;if(t.multiple){if(!Array.isArray(e))return 1;let n;const o=t.lt||r,c=[];for(;i>h;)(n=s[h]).selected&&c.push(n.hasOwnProperty("model")?n.st:n.value),++h;for(h=0;e.length>h;){const t=e[h];-1===c.findIndex(s=>!!o(t,s))?e.splice(h,1):++h}for(h=0;c.length>h;){const t=c[h];-1===e.findIndex(s=>!!o(t,s))&&e.push(t),++h}return 0}let value=null;for(;i>h;){const t=s[h];if(t.selected){value=t.hasOwnProperty("model")?t.st:t.value;break}++h}return this.oldValue=this._,this._=value,1}subscribe(t){this.at()||this.I.subscribe(this.H,this),this.ft(t)}unsubscribe(t){this.dt(t)&&!this.at()&&this.I.F()}bind(){this.Bt=this.dom.Ft(this.H,this.Pt.bind(this),w)}B(){this.Bt.disconnect(),this.Bt=null,this.it&&(this.it.et(this),this.it=null)}Pt(){this.Nt(),this.It()&&this.ct(65536)}},t.SelectValueObserver=s([runtime.targetObserver()],t.SelectValueObserver),t.StyleAttributeAccessor=class{constructor(t,s){this.$=1,this.oldValue=this._=s.style.cssText,this.q=t,this.H=s,this.zt=null,this.version=0}G(){return this.H.style.cssText}Ut(t,value){let s="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(s="important",value=value.replace("!important","")),this.H.style.setProperty(t,value,s)}J(t){const s=this.zt||{};let i,e=this.version;if(null!==t)if(t instanceof Object){let value;for(i in t)t.hasOwnProperty(i)&&(value=t[i],s[i=i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=e,this.Ut(i,value))}else if(t.length){const h=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let n;for(;null!==(n=h.exec(t));)(i=n[1])&&(s[i]=e,this.Ut(i,n[2]))}if(this.zt=s,this.version+=1,0!==e)for(i in e-=1,s)s.hasOwnProperty(i)&&s[i]===e&&this.H.style.removeProperty(i)}},t.StyleAttributeAccessor=s([runtime.targetObserver()],t.StyleAttributeAccessor);const ISVGAnalyzer=kernel.DI.kt("ISVGAnalyzer").jt(t=>t.singleton(class{g(t,s){return 0}})),b={button:"",$t:"on",color:"#000000",qt:"",Ht:"",email:"",_t:"",hidden:"",Gt:"",Xt:"",number:"",password:"",Zt:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",Jt:""};t.ValueAttributeObserver=class{constructor(t,s,i,e){if(this.$=1,this.I=e,this.q=t,this.H=s,this.X=i,"value"===i){const t=s.type;this.defaultValue=b[t||"text"],"file"===t&&(this.flush=this.Kt)}else this.defaultValue="";this.oldValue=this._=s[i]}G(){return this.H[this.X]}J(t,s){this.H[this.X]=t,2048&s||this.ut(this._,this.oldValue,s)}l(){const t=this.oldValue=this._,s=this._=this.G();t!==s&&(this.ut(s,t,65536),this.oldValue=s)}subscribe(t){this.at()||(this.oldValue=this.G(),this.I.subscribe(this.H,this)),this.ft(t)}unsubscribe(t){this.dt(t)&&!this.at()&&this.I.F()}Kt(){const t=this._;this.oldValue!==t&&""===t&&(this.J(t,this.Qt),this.oldValue=this._)}},t.ValueAttributeObserver=s([runtime.targetObserver("")],t.ValueAttributeObserver);const g="http://www.w3.org/1999/xlink",p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v=((u=Object.create(null))["Wt"]=["actuate",g],u["Yt"]=["arcrole",g],u["ts"]=["href",g],u["ss"]=["role",g],u["es"]=["show",g],u["hs"]=["title",g],u["ns"]=["type",g],u["rs"]=["lang",p],u["os"]=["space",p],u.cs=["xmlns",m],u["ls"]=["xlink",m],u),y=["change","input"],C=["change"],E=["change","input","blur","keyup","paste"],V=["scroll"],A=(function(t){return t.us=1,t.style=1,t.as=1,t.checked=1,t.value=1,t.st=1,t["Wt"]=1,t["Yt"]=1,t["ts"]=1,t["ss"]=1,t["es"]=1,t["hs"]=1,t["ns"]=1,t["rs"]=1,t["os"]=1,t.cs=1,t["ls"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom,t){this.dom=dom,this.fs=t}static register(t){return kernel.Registration.singleton(runtime.ITargetObserverLocator,this).register(t)}ds(s,i,e,h,n){switch(n){case"checked":return new t.CheckedObserver(s,i,h,new EventSubscriber(this.dom,y),e);case"value":return"SELECT"===h.tagName?new t.SelectValueObserver(s,i,h,new EventSubscriber(this.dom,C),e,this.dom):new t.ValueAttributeObserver(i,h,n,new EventSubscriber(this.dom,y));case"files":return new t.ValueAttributeObserver(i,h,n,new EventSubscriber(this.dom,y));case"textContent":case"innerHTML":return new t.ValueAttributeObserver(i,h,n,new EventSubscriber(this.dom,E));case"scrollTop":case"scrollLeft":return new t.ValueAttributeObserver(i,h,n,new EventSubscriber(this.dom,V));case"class":return new t.ClassAttributeAccessor(i,h);case"style":case"css":return new t.StyleAttributeAccessor(i,h);case"model":return new runtime.SetterObserver(s,h,n);case"role":return new t.DataAttributeAccessor(i,h,n);default:if(void 0!==v[n]){const s=v[n];return new t.AttributeNSAccessor(i,h,n,s[0],s[1])}if(o(h,n,this.fs))return new t.DataAttributeAccessor(i,h,n)}return null}ws(t,s,i){return 1==A[i]}bs(t,s){return this.dom.v(s)}}TargetObserverLocator.inject=[runtime.IDOM,ISVGAnalyzer];class TargetAccessorLocator{constructor(dom,t){this.dom=dom,this.fs=t}static register(t){return kernel.Registration.singleton(runtime.ITargetAccessorLocator,this).register(t)}gs(s,i,e,h){switch(h){case"textContent":return new t.ElementPropertyAccessor(i,e,h);case"class":return new t.ClassAttributeAccessor(i,e);case"style":case"css":return new t.StyleAttributeAccessor(i,e);case"src":case"href":case"role":return new t.DataAttributeAccessor(i,e,h);default:if(void 0!==v[h]){const s=v[h];return new t.AttributeNSAccessor(i,e,h,s[0],s[1])}return o(e,h,this.fs)?new t.DataAttributeAccessor(i,e,h):new t.ElementPropertyAccessor(i,e,h)}}bs(t,s){return this.dom.v(s)}}TargetAccessorLocator.inject=[runtime.IDOM,ISVGAnalyzer];const j={};class AttrBindingBehavior{bind(s,i,e){e.targetObserver=new t.DataAttributeAccessor(e.k.get(runtime.ILifecycle),e.target,e.ps)}B(t,s,i){}}runtime.BindingBehaviorResource.ms("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,s,i){if(!i.L||!i.O)throw kernel.Reporter.error(8);i.p=i.L,i.L=c}B(t,s,i){i.L=i.p,i.p=null}}runtime.BindingBehaviorResource.ms("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.W=t}bind(t,s,i,...e){if(0===e.length)throw kernel.Reporter.error(9);if(i.mode!==runtime.BindingMode.vs&&i.mode!==runtime.BindingMode.ys)throw kernel.Reporter.error(10);this.K=67108879&t;const targetObserver=this.W.ds(this.K|t,i.target,i.ps);if(!targetObserver.I)throw kernel.Reporter.error(10);i.targetObserver=targetObserver,targetObserver.Cs=i.targetObserver.I,targetObserver.I=new EventSubscriber(i.k.get(runtime.IDOM),e)}B(t,s,i){i.targetObserver.I.F(),i.targetObserver.I=i.targetObserver.Cs,i.targetObserver.Cs=null}}UpdateTriggerBindingBehavior.inject=[runtime.IObserverLocator],runtime.BindingBehaviorResource.ms("updateTrigger",UpdateTriggerBindingBehavior),(HTMLTargetedInstructionType=t.HTMLTargetedInstructionType||(t.HTMLTargetedInstructionType={})).Es="ha",HTMLTargetedInstructionType.Vs="hb",HTMLTargetedInstructionType.As="hc",HTMLTargetedInstructionType.setAttribute="hd";class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.js=t}get ks(){return this.Ts||(this.Ts=runtime.buildTemplateDefinition(null,null,this.js,null,"string"==typeof this.js,null,this.instructions,this.dependencies))}xs(t,s){return t.xs(this.dom,this.ks,null,s)}Os(t,s,i){return this.Ms(s,i).create()}Ms(t,s){return t.Ms(this.dom,this.ks,s)}C(t,instructions,dependencies){this.dom.appendChild(t,this.js),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const k=["subject","composing"];class Compose{constructor(dom,t,s,i,e){this.dom=dom,this.subject=null,this.Ls=0,this.Ss=e,this.Rs=null,this.Ns=t,this.Ds=i,this.Ss.Is=(()=>{this.Ls=0}),this.properties=s.instructions.filter(t=>!k.includes(t.to)).reduce((t,s)=>(s.to&&(t[s.to]=s),t),{})}Bs(t){this.Fs(this.subject,null,t),this.Ss.Bs(t,this.$scope)}Ps(t){this.Ss.Ps(t)}zs(t){this.Ss.zs(t)}Us(t){this.Rs=null,this.Ss.Us(t)}$s(t){this.Ss.$s(t)}qs(t,s,i){this.Fs(t,s,i)}Fs(t,s,i){this.Rs!==t&&(this.Rs=t,t=t instanceof Promise?t.then(t=>this.Hs(t,i)):this.Hs(t,i),this.Ls=1,this.Ss._s(t,i))}Hs(t,s){const i=this.Gs(t,s);return i?(i.Xs(this.Zs.host),i.Js(this.Ns.$scope),i):null}Gs(t,s){return t?"lockScope"in t?t:"createView"in t?t.Os(s,this.Ds,this.Ns.$context):"create"in t?t.create():"template"in t?this.Ds.Ms(this.dom,t,this.Ns.$context).create():createElement(this.dom,t,this.properties,this.Zs.children).Os(s,this.Ds,this.Ns.$context):null}}Compose.inject=[runtime.IDOM,runtime.IRenderable,runtime.ITargetedInstruction,runtime.IRenderingEngine,runtime.CompositionCoordinator],s([runtime.bindable],Compose.prototype,"subject",void 0),s([runtime.bindable],Compose.prototype,"composing",void 0),runtime.CustomElementResource.ms({name:"au-compose",containerless:1},Compose),(NodeType=t.NodeType||(t.NodeType={}))[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation";const T=runtime.DOM;class x{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new L(t)]}Ks(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}Qs(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class O{constructor(dom,t){this.dom=dom,this.Ws=t;const s=t.querySelectorAll(".au");let i=0,e=s.length;const targets=this.targets=Array(e);for(;e>i;){const t=s[i];targets[i]="AU-M"===t.nodeName?this.dom.Ys(t):t,++i}const h=t.childNodes;i=0;const childNodes=this.childNodes=Array(e=h.length);for(;e>i;)childNodes[i]=h[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}Ks(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.Ws,t),"au-end"===t.textContent){this.end=t;const s=this.start=t.ti;s.$nodes=null===s.$nodes?this:kernel.PLATFORM.si}}Qs(t){t.appendChild(this.Ws),this.start=this.end=null}remove(){const t=this.Ws;if(null!==this.start&&this.start.$nodes===this){const s=this.end;let i,e=this.start.nextSibling;for(;e!==s;)i=e.nextSibling,t.appendChild(e),e=i;this.start.$nodes=null,this.start=this.end=null}else{let s=this.firstChild;if(s.parentNode!==t){const i=this.lastChild;let e;for(;null!==s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}}}}class M{constructor(dom,t){this.dom=dom;const s=dom.createDocumentFragment(t),childNodes=s.childNodes;switch(childNodes.length){case 0:return void(this.ii=(()=>runtime.NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.ei=0,this.js=t,void(this.hi=x)}default:this.ei=1,this.js=s,this.hi=O}}ii(){return new this.hi(this.dom,this.js.cloneNode(this.ei))}}class L{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(a=L.prototype).previousSibling=null,a.childNodes=kernel.PLATFORM.ni,a.nodeName="AU-M",a.nodeType=1;class S{constructor(dom){this.dom=dom}static register(t){return kernel.Registration.singleton(runtime.ITemplateFactory,this).register(t)}create(t,s){return new runtime.CompiledTemplate(this.dom,s,new M(this.dom,s.template),t)}}S.inject=[runtime.IDOM];let R=class{constructor(t,s){this.ri=t,this.W=s}oi(t,dom,s,i,e,h){const n=e.nextSibling;let r;dom.ci(e)&&dom.remove(e);const o=runtime.ensureExpression(this.ri,h.from,2048);r=o.li?new runtime.MultiInterpolationBinding(this.W,o,n,"textContent",runtime.BindingMode.ui,s):new runtime.InterpolationBinding(o.ai,o,n,"textContent",runtime.BindingMode.ui,this.W,s,1),runtime.addBinding(i,r)}};R.inject=[runtime.IExpressionParser,runtime.IObserverLocator],R=s([runtime.instructionRenderer("ha")],R);let N=class{constructor(t,s){this.ri=t,this.M=s}oi(t,dom,s,i,e,h){const n=runtime.ensureExpression(this.ri,h.from,80|h.strategy+6),r=new Listener(dom,h.to,h.strategy,n,e,h.preventDefault,this.M,s);runtime.addBinding(i,r)}};N.inject=[runtime.IExpressionParser,IEventManager],N=s([runtime.instructionRenderer("hb")],N);let D=class{oi(t,dom,s,i,e,h){e.setAttribute(h.to,h.value)}};D=s([runtime.instructionRenderer("hd")],D);let I=class{constructor(t,s){this.ri=t,this.W=s}oi(t,dom,s,i,e,h){const n=runtime.ensureExpression(this.ri,h.from,48|runtime.BindingMode.ui),r=new runtime.Binding(n,e.style,h.to,runtime.BindingMode.ui,this.W,s);runtime.addBinding(i,r)}};I.inject=[runtime.IExpressionParser,runtime.IObserverLocator],I=s([runtime.instructionRenderer("hc")],I);const B={mode:"open"},F={Lt:1};class P{constructor(dom,$customElement,host,t){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.fi(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:B),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}di(t){this.dom.Ft(this.shadowRoot,t,F)}wi(){return this.shadowRoot}bi(t){t.Qs(this.shadowRoot)}gi(t){t.remove()}}class z{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?kernel.PLATFORM.toArray(host.childNodes):kernel.PLATFORM.ni,this.host=dom.Ys(host),this.host.$customElement=$customElement}get children(){return this.childNodes}di(t){new MutationObserver(t).observe(this.host,F)}wi(){return this.host.pi()}bi(t){t.insertBefore(this.host)}gi(t){t.remove()}}class U{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}di(t){}wi(){return this.host.pi()}bi(t){t.Qs(this.host)}gi(t){t.remove()}}const IProjectorLocatorRegistration=class{static register(t){return kernel.Registration.singleton(runtime.IProjectorLocator,this).register(t)}mi(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw kernel.Reporter.error(21);return new P(dom,t,host,def)}return def.containerless?new z(dom,t,host):new U(t,host)}},ITargetAccessorLocatorRegistration=TargetAccessorLocator,ITargetObserverLocatorRegistration=TargetObserverLocator,ITemplateFactoryRegistration=S,DefaultComponents=[IProjectorLocatorRegistration,ITargetAccessorLocatorRegistration,ITargetObserverLocatorRegistration,ITemplateFactoryRegistration],AttrBindingBehaviorRegistration=AttrBindingBehavior,SelfBindingBehaviorRegistration=SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration=UpdateTriggerBindingBehavior,ComposeRegistration=Compose,DefaultResources=[AttrBindingBehaviorRegistration,SelfBindingBehaviorRegistration,UpdateTriggerBindingBehaviorRegistration,ComposeRegistration],ListenerBindingRendererRegistration=N,SetAttributeRendererRegistration=D,StylePropertyBindingRendererRegistration=I,TextBindingRendererRegistration=R,DefaultRenderers=[ListenerBindingRendererRegistration,SetAttributeRendererRegistration,StylePropertyBindingRendererRegistration,TextBindingRendererRegistration],BasicConfiguration={register:t=>runtime.RuntimeBasicConfiguration.register(t).register(...DefaultComponents,...DefaultResources,...DefaultRenderers),vi(){return this.register(kernel.DI.vi())}};t.Listener=Listener,t.ListenerTracker=ListenerTracker,t.DelegateOrCaptureSubscription=DelegateOrCaptureSubscription,t.TriggerSubscription=TriggerSubscription,t.IEventManager=IEventManager,t.EventSubscriber=EventSubscriber,t.TargetAccessorLocator=TargetAccessorLocator,t.TargetObserverLocator=TargetObserverLocator,t.ISVGAnalyzer=ISVGAnalyzer,t.AttrBindingBehavior=AttrBindingBehavior,t.SelfBindingBehavior=SelfBindingBehavior,t.UpdateTriggerBindingBehavior=UpdateTriggerBindingBehavior,t.Compose=Compose,t.IProjectorLocatorRegistration=IProjectorLocatorRegistration,t.ITargetAccessorLocatorRegistration=ITargetAccessorLocatorRegistration,t.ITargetObserverLocatorRegistration=ITargetObserverLocatorRegistration,t.ITemplateFactoryRegistration=ITemplateFactoryRegistration,t.DefaultComponents=DefaultComponents,t.AttrBindingBehaviorRegistration=AttrBindingBehaviorRegistration,t.SelfBindingBehaviorRegistration=SelfBindingBehaviorRegistration,t.UpdateTriggerBindingBehaviorRegistration=UpdateTriggerBindingBehaviorRegistration,t.ComposeRegistration=ComposeRegistration,t.DefaultResources=DefaultResources,t.ListenerBindingRendererRegistration=ListenerBindingRendererRegistration,t.SetAttributeRendererRegistration=SetAttributeRendererRegistration,t.StylePropertyBindingRendererRegistration=StylePropertyBindingRendererRegistration,t.TextBindingRendererRegistration=TextBindingRendererRegistration,t.DefaultRenderers=DefaultRenderers,t.BasicConfiguration=BasicConfiguration,t.createElement=createElement,t.RenderPlan=RenderPlan,t.isHTMLTargetedInstruction=isHTMLTargetedInstruction,t.HTMLDOM=class{constructor(t,s,i,e,h,n){this.window=t,this.document=s,this.Node=i,this.Element=e,this.HTMLElement=h,this.CustomEvent=n,runtime.DOM.yi&&(kernel.Reporter.write(1001),runtime.DOM.Ci()),runtime.DOM.initialize(this)}static register(t){return kernel.Registration.Ei(runtime.IDOM,this).register(t)}addEventListener(t,s,i,e){(i||this.document).addEventListener(t,s,e)}appendChild(t,s){t.appendChild(s)}cloneNode(t,s){return t.cloneNode(0!=s)}Ys(t){if(this.Vi(t))return t;if(null===t.parentNode)throw kernel.Reporter.error(52);const s=this.document.createComment("au-end"),i=this.document.createComment("au-start");return t.parentNode.replaceChild(s,t),s.parentNode.insertBefore(i,s),s.ti=i,i.$nodes=null,s}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.v(t)){if(void 0!==t.content)return t.content;const s=this.document.createDocumentFragment();return s.appendChild(t),s}return this.Ai(t).content}createElement(name){return this.document.createElement(name)}fetch(t,s){return this.window.fetch(t,s)}ji(t,s){return new this.CustomEvent(t,s)}dispatchEvent(t){this.document.dispatchEvent(t)}Ft(t,s,i){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>kernel.PLATFORM.ni};const e=new MutationObserver(s);return e.observe(t,i),e}Ai(t){if(null==t)return this.document.createElement("template");const template=this.document.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.document.createTextNode(t)}insertBefore(t,s){s.parentNode.insertBefore(t,s)}ci(t){return"AU-M"===t.nodeName}v(t){return null!=t&&t.nodeType>0}Vi(t){return"au-end"===t.textContent}m(t){t.className="au"}ki(t,s){t.Ti(runtime.INode,s),t.Ti(this.Node,s),t.Ti(this.Element,s),t.Ti(this.HTMLElement,s)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,s,i,e){(i||this.document).removeEventListener(t,s,e)}setAttribute(t,name,value){t.setAttribute(name,value)}},t.DOM=T,t.CaptureBindingInstruction=class{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=runtime.DelegationStrategy.Mt,this.to=to}},t.DelegateBindingInstruction=class{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=runtime.DelegationStrategy.Ot,this.to=to}},t.SetAttributeInstruction=SetAttributeInstruction,t.StylePropertyBindingInstruction=class{constructor(from,to){this.type="hc",this.from=from,this.to=to}},t.TextBindingInstruction=class{constructor(from){this.type="ha",this.from=from}},t.TriggerBindingInstruction=class{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=runtime.DelegationStrategy.xi,this.to=to}},Object.defineProperty(t,"Oi",{value:1})});
