(function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("@aurelia/kernel")):"function"==typeof define&&define.t?define(["exports","@aurelia/kernel"],s):s((t=t||self).runtime={},t.kernel)})(this,function(t,kernel){"use strict";function s(t,s,i,h){var n,r,e=arguments.length,o=3>e?s:null===h?h=Object.getOwnPropertyDescriptor(s,i):h;if("object"==typeof Reflect&&"function"==typeof Reflect.s)o=Reflect.s(t,s,i,h);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(o=(3>e?n(o):e>3?n(s,i,o):n(s,i))||o);return e>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(s){return function(u){const c=u.prototype;c.i=0,c.h=null,c.o=null,c.u=null,c.l=null,c.p=i,c.m=h,c.v=o,c.g=e,c.C=s===t.MutationKind.j?n:r}}function i(t){if(this.v(t))return 0;const s=this.i;return 1&s?2&s?4&s?8&s?(this.l.push(t),1):(this.l=[t],this.i|=8,1):(this.u=t,this.i|=4,1):(this.o=t,this.i|=2,1):(this.h=t,this.i|=1,1)}function h(t){const s=this.i;if(1&s&&this.h===t)return this.h=null,this.i&=-2,1;if(2&s&&this.o===t)return this.o=null,this.i&=-3,1;if(4&s&&this.u===t)return this.u=null,this.i&=-5,1;if(8&s){const s=this.l;for(let i=0,h=s.length;h>i;++i)if(s[i]===t)return s.splice(i,1),1===h&&(this.i&=-9),1}return 0}function n(t,s,i){const h=this.h,n=this.o,r=this.u;let e=this.l;null!==e&&(e=e.slice()),null!==h&&h.T(t,s,i),null!==n&&n.T(t,s,i),null!==r&&r.T(t,s,i);const o=e&&e.length;if(void 0!==o&&o>0)for(let h=0;o>h;++h){const n=e[h];null!==n&&n.T(t,s,i)}}function r(t,s,i){const h=this.h,n=this.o,r=this.u;let e=this.l;null!==e&&(e=e.slice()),null!==h&&h.T(t,s,i),null!==n&&n.T(t,s,i),null!==r&&r.T(t,s,i);const o=e&&e.length;if(void 0!==o&&o>0)for(let h=0;o>h;++h){const n=e[h];null!==n&&n.T(t,s,i)}this.I.A(this).catch(t=>{throw t})}function e(){return 0!==this.i}function o(t){const s=this.i;if(1&s&&this.h===t)return 1;if(2&s&&this.o===t)return 1;if(4&s&&this.u===t)return 1;if(8&s){const s=this.l;for(let i=0,h=s.length;h>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.S=0,s.O=null,s.V=null,s.P=null,s.F=null,s.R=u,s.B=c,s.k=a,s.U=f,s.D=l}}function u(t){if(this.k(t))return 0;const s=this.S;return 1&s?2&s?4&s?8&s?(this.F.push(t),1):(this.F=[t],this.S|=8,1):(this.P=t,this.S|=4,1):(this.V=t,this.S|=2,1):(this.O=t,this.S|=1,1)}function c(t){const s=this.S;if(1&s&&this.O===t)return this.O=null,this.S&=-2,1;if(2&s&&this.V===t)return this.V=null,this.S&=-3,1;if(4&s&&this.P===t)return this.P=null,this.S&=-5,1;if(8&s){const s=this.F;for(let i=0,h=s.length;h>i;++i)if(s[i]===t)return s.splice(i,1),1===h&&(this.S&=-9),1}return 0}function l(t){const s=this.O,i=this.V,h=this.P;let n=this.F;null!==n&&(n=n.slice()),null!==s&&s.N(t),null!==i&&i.N(t),null!==h&&h.N(t);const r=n&&n.length;if(void 0!==r&&r>0)for(let s=0;r>s;++s){const i=n[s];null!==i&&i.N(t)}}function f(){return 0!==this.S}function a(t){const s=this.S;if(1&s&&this.O===t)return 1;if(2&s&&this.V===t)return 1;if(4&s&&this.P===t)return 1;if(8&s){const s=this.F;for(let i=0,h=s.length;h>i;++i)if(s[i]===t)return 1}return 0}function d(s){if(0==this.M){this.M=1;const{$:s,q:i}=this;this.H=s[i],At.get=(()=>this.W()),At.set=(value=>{this._(value,t.LifecycleFlags.K)}),Tt(s,i,At)||kernel.Reporter.write(1,i,s)}this.p(s)}function p(){delete this.$[this.q],this.$=null,this.q=null,this.H=null}function propertyObserver(){return function(s){subscriberCollection(t.MutationKind.j)(s);const i=s.prototype;i.M=0,i.$=null,i.q=null,i.H=Symbol(),i.subscribe=i.subscribe||d,i.unsubscribe=i.unsubscribe||i.m,i.G=i.G||p}}function b(t){const s=BindingBehaviorResource.J(this.description.name);t.register(kernel.Registration.singleton(s,this))}function m(t){const s=this.kind.J(this.description.name);t.register(kernel.Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t.X)}function hasUnbind(t){return 4096==(4096&t.X)}function isLiteral(t){return 16384==(16384&t.X)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.X){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.Y);case 17925:return 1}return 0}function w(t,s,i,h){const n=h.length,r=Array(n);for(let e=0;n>e;++e)r[e]=h[e].evaluate(t,s,i);return r}function v(s,i,name){const h=null==i?null:i[name];if("function"==typeof h)return h;if(!(s&t.LifecycleFlags.Z)&&null==h)return null;throw kernel.Reporter.error(207,i,name,h)}function y(t){if(t===Dt){const s=kt.length=Ut.length=(Dt+=5)+1;for(let i=t+1;s>i;++i)kt[i]=`_observer${i}`,Ut[i]=`_observerVersion${i}`}}function g(t){const s=void 0===this.L?0:this.L;let i=s;for(;i--&&this[kt[i]]!==t;);if(-1===i){for(i=0;this[kt[i]];)i++;this[kt[i]]=t,t.subscribe(this),i===s&&(this.L=i+1)}void 0===this.version&&(this.version=0),this[Ut[i]]=this.version,y(i)}function C(t,s){const i=this.st.tt(t,s);this.it(i)}function j(all){const t=this.L;let s,i;if(1==all)for(let h=0;t>h;++h)null!=(i=this[s=kt[h]])&&(this[s]=null,i.unsubscribe(this));else{const h=this.version;for(let n=0;t>n;++n)this[Ut[n]]!==h&&null!=(i=this[s=kt[n]])&&(this[s]=null,i.unsubscribe(this))}}function T(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.ht=C),s.hasOwnProperty("unobserve")||(s.unobserve=j),s.hasOwnProperty("addObserver")||(s.it=g),t}function connectable(t){return void 0===t?T:T(t)}function A(s,i){if(this.H!==(s=null==s?this.defaultValue:s)){if(this.H=s,!(i&(t.LifecycleFlags.nt|t.LifecycleFlags.rt))||this.et&&i&t.LifecycleFlags.ot)return this.ut=i,this.I.A(this);this.ct(s,i)}return Promise.resolve()}function I(s){if(this.et&&s&t.LifecycleFlags.ot)return void this.I.A(this).catch(t=>{throw t});const i=this.H;this.oldValue!==i&&(this.ct(i,this.ut|s|t.LifecycleFlags.K),this.oldValue=this.H)}function S(){this.H=null,this.oldValue=null,this.defaultValue=null,this.$=null,this.q=""}function targetObserver(s=null){return function(i){subscriberCollection(t.MutationKind.j)(i);const h=i.prototype;h.lt=null,h.H=s,h.oldValue=s,h.defaultValue=s,h.$=null,h.q="",h._=h._||A,h.flush=h.flush||I,h.G=h.G||S}}function O(){this.D(this.ft),this.at&&this.at.dt(t.LifecycleFlags.nt|t.LifecycleFlags.K),this.pt()}function V(){this.wt.bt=void 0,this.wt=null,this.ft=null}function P(){const t=this.wt.length,s=this.ft=Array(t);let i=0;for(;t>i;)s[i]=i++;s.vt=[]}function F(){const t=this.wt.size,s=this.ft=Array(t);let i=0;for(;t>i;)s[i]=i++;s.vt=[]}function R(){return void 0===this.at?this.at=new t.CollectionLengthObserver(this,this.yt):this.at}function collectionObserver(s){return function(i){subscriberCollection(t.MutationKind.wt)(i),batchedSubscriberCollection()(i);const h=i.prototype;h.lt=null,h.wt=null,h.ft=null,h.gt=0,h.yt=8&s?"length":"size",h.Ct=s,h.pt=8&s?P:F,h.flush=O,h.G=V,h.jt=R,h.subscribe=h.subscribe||h.p,h.unsubscribe=h.unsubscribe||h.m,h.Tt=h.Tt||h.R,h.At=h.At||h.B}}function B(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function k(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function U(t,s,from,to,i){let h,n,r,e,o,u,c;for(u=from+1;to>u;u++){for(h=t[u],n=s[u],c=u-1;c>=from&&(e=s[c],(o=i(r=t[c],h))>0);c--)t[c+1]=r,s[c+1]=e;t[c+1]=h,s[c+1]=n}}function D(t,s,from,to,i){let h,n,r,e,o,u,c,l,f,a,d,p,b,m,w,v,y,g,C,j=0,T=0;for(;;){if(10>=to-from)return void U(t,s,from,to,i);e=s[from],o=s[to-1],r=t[j=from+(to-from>>1)],u=s[j],(c=i(h=t[from],n=t[to-1]))>0&&(a=h,d=e,h=n,e=o,n=a,o=d),0>(l=i(h,r))?(f=i(n,r))>0&&(a=n,d=o,n=r,o=u,r=a,u=d):(a=h,d=e,h=r,e=u,r=n,u=o,n=a,o=d),t[from]=h,s[from]=e,t[to-1]=r,s[to-1]=u,p=n,b=o,w=to-1,t[j]=t[m=from+1],s[j]=s[m],t[m]=p,s[m]=b;t:for(T=m+1;w>T;T++)if(y=s[T],0>(g=i(v=t[T],p)))t[T]=t[m],s[T]=s[m],t[m]=v,s[m]=y,m++;else if(g>0){do{if(--w==T)break t;g=i(C=t[w],p)}while(g>0);t[T]=t[w],s[T]=s[w],t[w]=v,s[w]=y,0>g&&(v=t[T],y=s[T],t[T]=t[m],s[T]=s[m],t[m]=v,s[m]=y,m++)}m-from>to-w?(D(t,s,w,to,i),to=m):(D(t,s,from,m,i),from=w)}}function enableArrayObservation(){for(const t of Et)1!=Ht[t].M&&def(Ht,t,Object.assign({},Lt,{value:xt[t]}))}function N(s,i){return i.bt||new t.ArrayObserver(s,i)}function enableMapObservation(){for(const t of rs)1!=ts[t].M&&us(ts,t,Object.assign({},os,{value:es[t]}))}function M(s,i){return i.bt||new t.MapObserver(s,i)}function enableSetObservation(){for(const t of ps)1!=cs[t].M&&ws(cs,t,Object.assign({},ms,{value:bs[t]}))}function $(s,i){return i.bt||new t.SetObserver(s,i)}function getCollectionObserver(t,s){switch(As.call(s)){case"[object Array]":return N(t,s);case"[object Map]":return M(t,s);case"[object Set]":return $(t,s)}return null}function z(t,s,i){const h=this.It;kernel.PLATFORM.global.clearTimeout(h.St),h.St=kernel.PLATFORM.global.setTimeout(()=>{this.Ot(t,s,i)},h.Vt)}function q(t,s,i){const h=this.It;if(kernel.PLATFORM.global.clearTimeout(h.St),!(i&h.Pt))return h.oldValue=Rs,void this.Ot(t,s,i);h.oldValue===Rs&&(h.oldValue=s);const n=kernel.PLATFORM.global.setTimeout(()=>{const s=h.oldValue;h.oldValue=Rs,this.Ot(t,s,i)},h.Vt);h.St=n}function Q(t){const s=this.Ft,i=+new Date-s.Rt;if(i>=s.Vt)return kernel.PLATFORM.global.clearTimeout(s.St),s.St=-1,s.Rt=+new Date,void this.Bt(t);if(s.newValue=t,-1===s.St){const t=kernel.PLATFORM.global.setTimeout(()=>{s.St=-1,s.Rt=+new Date,this.Bt(s.newValue)},s.Vt-i);s.St=t}}function H(name){return`${ks}:${name}`}function W(t){return void 0===t.$customElement?null:t.$customElement}function _(name){return`${Us}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots){const def=new Ms,i=arguments.length;switch(i){case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=kernel.PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=kernel.PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=kernel.PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?Ds:0==build?Ns:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&($s.forEach(t=>{s[t]&&(def[t]=s[t])}),zs.forEach(t=>{s[t]&&(def[t]=kernel.PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===kernel.PLATFORM.kt?def.bindables=Object.assign({},s.bindables):Object.assign(def.bindables,s.bindables)))}return 2!==i||null===t||"string"!=typeof s&&"build"in s||(def.build=Ds),def}function K(s){if(8&this.$state)return;const i=this.$lifecycle;i.Ut(),this.$state|=4,s|=t.LifecycleFlags.Dt;const h=this.$hooks;16&h&&this.Nt(s),this.$state|=8,this.$state&=-5,32&h&&i.Mt(this),i.$t(s)}function G(s){if(8&this.$state)return;const i=this.$lifecycle;i.Ut(),this.$state|=4,s|=t.LifecycleFlags.Dt;const h=this.$hooks;16&h&&this.Nt(s);let n=this.zt;for(;null!==n;)n.qt(s),n=n.Qt;i.Ht(this),this.$state|=8,this.$state&=-5,32&h&&i.Mt(this),i.$t(s)}function J(s){if(8&this.$state)return;this.$state|=4,s|=t.LifecycleFlags.Dt;let i=this.zt;for(;null!==i;)i.qt(s),i=i.Qt;this.$lifecycle.Ht(this),this.$state|=8,this.$state&=-5}function X(s){if(8&this.$state){const i=this.$lifecycle;i.Wt(),this.$state|=32,s|=t.LifecycleFlags._t;const h=this.$hooks;64&h&&this.Kt(s),this.$state&=-41,128&h&&i.Gt(this),i.Jt(s)}}function Y(s){if(8&this.$state){const i=this.$lifecycle;i.Wt(),this.$state|=32,(s|=t.LifecycleFlags._t)&t.LifecycleFlags.Xt^t.LifecycleFlags.Xt|s&t.LifecycleFlags.Yt&&(i.Zt(this),s|=t.LifecycleFlags.Xt);const h=this.$hooks;64&h&&this.Kt(s);let n=this.Et;for(;null!==n;)n.xt(s),n=n.Lt;this.$state&=-41,128&h&&i.Gt(this),i.Jt(s)}}function Z(s){if(8&this.$state){this.$state|=32,(s|=t.LifecycleFlags._t)&t.LifecycleFlags.Xt^t.LifecycleFlags.Xt|s&t.LifecycleFlags.Yt&&(this.$lifecycle.Zt(this),s|=t.LifecycleFlags.Xt);let i=this.Et;for(;null!==i;)i.xt(s),i=i.Lt;this.$state&=-41}}function E(s){2048&this.$hooks&&this.ts(s|=t.LifecycleFlags.ss)}function x(s){s|=t.LifecycleFlags.ss,2048&this.$hooks&&this.ts(s);let i=this.Et;for(;null!==i;)i.hs(s),i=i.Lt}function L(s){s|=t.LifecycleFlags.ss;let i=this.Et;for(;null!==i;)i.hs(s),i=i.Lt}function tt(){16&this.$state||(this.$state|=16,this.rs.ns(this.$nodes))}function st(){16&this.$state&&(this.$state&=-17,this.rs.es(this.$nodes))}function it(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ht(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.os&&(this.os=0,this.cache.us(this))?(this.$state|=128,1):0):0}function nt(s,i){if(s|=t.LifecycleFlags.rt,2&this.$state){if(this.$scope===i)return;this.cs(s)}const h=this.$lifecycle;h.ls(),this.$state|=1;const n=this.$hooks;8&n&&h.fs(this),this.$scope=i,4&n&&this.as(s),this.$state|=2,this.$state&=-2,h.ds(s)}function rt(s,i){if(2&this.$state)return;const h=this.$scope;h.ps=i;const n=this.$lifecycle;n.ls(),this.$state|=1;const r=this.$hooks;s|=t.LifecycleFlags.rt,8&r&&n.fs(this),4&r&&this.as(s);let e=this.bs;for(;null!==e;)e.ms(s,h),e=e.ws;this.$state|=2,this.$state&=-2,n.ds(s)}function et(s,i){if(s|=t.LifecycleFlags.rt,2&this.$state){if(this.$scope===i)return;this.cs(s)}this.$state|=1,this.$scope=i;let h=this.bs;for(;null!==h;)h.ms(s,i),h=h.ws;this.$state|=2,this.$state&=-2}function ot(s){if(2&this.$state){const i=this.$lifecycle;i.vs(),this.$state|=64;const h=this.$hooks;s|=t.LifecycleFlags.ys,512&h&&i.gs(this),256&h&&this.Cs(s),this.$state&=-67,i.js(s)}}function ut(s){if(2&this.$state){const i=this.$lifecycle;i.vs(),this.$state|=64;const h=this.$hooks;s|=t.LifecycleFlags.ys,512&h&&i.gs(this),256&h&&this.Cs(s);let n=this.Ts;for(;null!==n;)n.cs(s),n=n.As;this.$scope.ps=null,this.$state&=-67,i.js(s)}}function ct(s){if(2&this.$state){this.$state|=64,s|=t.LifecycleFlags.ys;let i=this.Ts;for(;null!==i;)i.cs(s),i=i.As;this.$state&=-67,this.$scope=null}}function lt(t){t.Is(this.constructor,this),2&this.$hooks&&this.Ss()}function ft(dom,t,s,host,i,h=kernel.PLATFORM.kt){const n=this.constructor,r=n.description;if(this.$scope=Scope.create(this,null),this.Os=host,this.rs=t.Vs(dom,this,host,r),s.Is(n,this),1024&this.$hooks){const t=this.Ps(host,h.parts,i);t&&"getElementTemplate"in t&&t.Fs(s,n,i).Ps(this,host,h.parts)}else s.Fs(dom,r,i,n).Ps(this,host,h.parts);2&this.$hooks&&this.Ss()}function at(t){const s=this.description,i=this.kind.J(s.name),aliases=s.aliases;t.register(kernel.Registration.transient(i,this));for(let s=0,h=aliases.length;h>s;++s){const h=this.kind.J(aliases[s]);t.register(kernel.Registration.Rs(i,h))}}function dt(t){return t.Bs=1,t}function bindable(s,i){let h;const n=function(s,i){const n=s.constructor;let bindables=n.bindables;void 0===bindables&&(bindables=n.bindables={}),h.ks||(h.ks=kernel.PLATFORM.Us(i)),h.Ds||(h.Ds=`${i}Changed`),void 0===h.mode&&(h.mode=t.BindingMode.Ns),arguments.length>1&&(h.Ms=i),bindables[h.Ms]=h};return arguments.length>1?(h={},void n(s,i)):"string"==typeof s?(h={},n):(h=s||{},n)}function pt(t){const s=this.kind.J(this.description.name);t.register(kernel.Registration.transient(s,this))}function bt(t){return t.containerless=1,t}function mt(s){if(2&this.$state)return;s|=t.LifecycleFlags.rt;const i=this.$scope;let h=this.bs;for(;null!==h;)h.ms(s,i),h=h.ws;this.$state|=2}function wt(s){if(2&this.$state){this.$state|=64,s|=t.LifecycleFlags.ys;let i=this.Ts;for(;null!==i;)i.cs(s),i=i.As;this.$state&=-67}}function createRenderContext(dom,t,dependencies,s){const i=t.$s(),h=new Gs,n=new Gs,r=new Gs,e=new Js,o=new Gs,u=i.get(IRenderer);return dom.zs(i,n),i.qs(IViewFactory,e),i.qs(IRenderable,h),i.qs(ITargetedInstruction,r),i.qs(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.Ps=function(t,targets,s,host,parts){u.Ps(dom,this,t,targets,s,host,parts)},i.Qs=function(t,s,u,c,parts,l){return h.Hs(t),n.Hs(s),r.Hs(u),c&&e.Hs(c,parts),l&&o.Hs(l),i},i.G=function(){e.G(),h.G(),r.G(),n.G(),o.G()},i}function vt(t){const s=[];for(let i=0,h=t.length;h>i;++i){const component=W(t[i]);null!==component&&s.push(component)}return s}function yt(s,name){Reflect.defineProperty(s,name,{Ws:1,get(){return this._s[name].W()},set(value){this._s[name]._(value,t.LifecycleFlags.K)}})}function instructionRenderer(t){return function(s){const i=function(...i){const h=new s(...i);return h.Ks=t,h};i.register=function(t){return kernel.Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const h=Object.getOwnPropertyDescriptors(s);return Object.keys(h).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,h[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addBindable(t,bindable){bindable.As=t.Ts,bindable.ws=null,null===t.Ts?t.bs=bindable:t.Ts.ws=bindable,t.Ts=bindable}function addAttachable(t,s){s.Lt=t.Et,s.Qt=null,null===t.Et?t.zt=s:t.Et.Qt=s,t.Et=s}var gt,Ct,jt,LifecycleFlags,DelegationStrategy,MutationKind,CollectionKind,ExpressionKind,BindingMode,State,Hooks,BindingType,TargetedInstructionType,ViewCompileFlags;(LifecycleFlags=t.LifecycleFlags||(t.LifecycleFlags={}))[LifecycleFlags.Gs=0]="none",LifecycleFlags[LifecycleFlags.Z=262144]="mustEvaluate",LifecycleFlags[LifecycleFlags.Js=3]="mutation",LifecycleFlags[LifecycleFlags.Xs=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Ys=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.Zs=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags.K=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Es=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=262112]="from",LifecycleFlags[LifecycleFlags.nt=96]="fromFlush",LifecycleFlags[LifecycleFlags.xs=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.Ls=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.ti=128]="fromStartTask",LifecycleFlags[LifecycleFlags.Yt=256]="fromStopTask",LifecycleFlags[LifecycleFlags.rt=512]="fromBind",LifecycleFlags[LifecycleFlags.ys=1024]="fromUnbind",LifecycleFlags[LifecycleFlags.Dt=2048]="fromAttach",LifecycleFlags[LifecycleFlags._t=4096]="fromDetach",LifecycleFlags[LifecycleFlags.ss=8192]="fromCache",LifecycleFlags[LifecycleFlags.si=16384]="fromDOMEvent",LifecycleFlags[LifecycleFlags.ii=32768]="fromObserverSetter",LifecycleFlags[LifecycleFlags.hi=65536]="fromBindableHandler",LifecycleFlags[LifecycleFlags.ni=131072]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Xt=524288]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ot=1048576]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.ri=2097152]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.ei=4194304]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.oi=4194304]="allowParentScopeTraversal",(function(t){t[t.ui=0]="None",t[t.ci=1]="Subscriber0",t[t.li=2]="Subscriber1",t[t.fi=4]="Subscriber2",t[t.ai=8]="SubscribersRest",t[t.di=15]="Any"})(gt||(gt={})),(DelegationStrategy=t.DelegationStrategy||(t.DelegationStrategy={}))[DelegationStrategy.Gs=0]="none",DelegationStrategy[DelegationStrategy.pi=1]="capturing",DelegationStrategy[DelegationStrategy.bi=2]="bubbling",(MutationKind=t.MutationKind||(t.MutationKind={}))[MutationKind.j=1]="instance",MutationKind[MutationKind.wt=2]="collection",(CollectionKind=t.CollectionKind||(t.CollectionKind={}))[CollectionKind.mi=8]="indexed",CollectionKind[CollectionKind.wi=4]="keyed",CollectionKind[CollectionKind.vi=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set";const Tt=Reflect.defineProperty,At={get:void 0,set:void 0,Ws:1,yi:1};t.SetterObserver=class{constructor(t,s){this.$=t,this.q=s}W(){return this.H}_(s,i){const h=this.H;h!==s&&(this.H=s,i&t.LifecycleFlags.rt||this.C(s,h,i),this.M||(this.$[this.q]=s))}},t.SetterObserver=s([propertyObserver()],t.SetterObserver),(function(t){t[t.gi=250]="UndefinedScope",t[t.Ci=251]="NullScope",t[t.ji=252]="NilOverrideContext",t[t.Ti=253]="NilParentScope"})(Ct||(Ct={}));class It{Ai(s,i){let h=this[i];return void 0===h&&(h=this[i]=new t.SetterObserver(s,i)),h}}class BindingContext{constructor(t,value){if(this.Ii=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(t,value){return new BindingContext(t,value)}static get(s,name,i,h){if(void 0===s)throw kernel.Reporter.error(250);if(null===s)throw kernel.Reporter.error(251);let n=s.Si;if(i>0){for(;i>0;){if(null===n.Oi)return;i--,n=n.Oi}return name in n?n:n.Vi}for(;n&&!(name in n)&&!(n.Vi&&name in n.Vi);)n=n.Oi;if(n)return name in n?n:n.Vi;if(h&t.LifecycleFlags.oi&&null!==s.ps){const n=this.get(s.ps,name,i,h&~t.LifecycleFlags.oi|t.LifecycleFlags.ri);if(null!==n)return n}return h&t.LifecycleFlags.ri?null:s.Vi||s.Si}Pi(){let t=this._s;return void 0===t&&(this._s=t=new It),t}}class Scope{constructor(t,s){this.Vi=t,this.Si=s,this.ps=null}static create(t,s){return new Scope(t,null==s?OverrideContext.create(t,s):s)}static Fi(t){if(null==t)throw kernel.Reporter.error(252);return new Scope(t.Vi,t)}static Ri(t,s){if(null==t)throw kernel.Reporter.error(253);return new Scope(s,OverrideContext.create(s,t.Si))}}class OverrideContext{constructor(t,s){this.Ii=1,this.Vi=t,this.Oi=s}static create(t,s){return new OverrideContext(t,void 0===s?null:s)}Pi(){let t=this._s;return void 0===t&&(this._s=t=new It),t}}const ISignaler=kernel.DI.ki("ISignaler").Bi(t=>t.singleton(St));class St{constructor(){this.Ui=Object.create(null)}Di(name,s){const i=this.Ui[name];if(void 0!==i)for(const h of i.keys())h.T(void 0,void 0,s|t.LifecycleFlags.K)}Ni(name,t){const s=this.Ui,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}Mi(name,t){const s=this.Ui[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",J(name){return`${this.name}:${name}`},$i(t){return t.kind===this},zi(t,s){const i=s,h="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=h,i.register=b,i}},ValueConverterResource={name:"value-converter",J(name){return`${this.name}:${name}`},$i(t){return t.kind===this},zi(t,s){const i=s,h="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=h,i.register=m,i}};(ExpressionKind=t.ExpressionKind||(t.ExpressionKind={}))[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.qi=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Qi=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=55]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation",(function(t){t[t.Hi=202]="NoLocator",t[t.Wi=203]="NoBehaviorFound",t[t._i=204]="BehaviorAlreadyApplied",t[t.Ki=205]="NoConverterFound",t[t.Gi=206]="NoBinding",t[t.Ji=207]="NotAFunction",t[t.Xi=208]="UnknownOperator",t[t.gi=250]="UndefinedScope",t[t.Ci=251]="NullScope"})(jt||(jt={}));class BindingBehavior{constructor(t,name,s){this.X=38962,this.Yi=t,this.name=name,this.Zi=s,this.Ei=BindingBehaviorResource.J(this.name),this.xi=hasBind(t),this.Li=hasUnbind(t)}evaluate(t,s,i){return this.Yi.evaluate(t,s,i)}assign(t,s,i,value){return this.Yi.assign(t,s,i,value)}connect(t,s,i){this.Yi.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const h=i.th;if(!h)throw kernel.Reporter.error(202,this);this.xi&&this.Yi.bind(t,s,i);const n=this.Ei,r=h.get(n);if(!r)throw kernel.Reporter.error(203,this);if(null!=i[n])throw kernel.Reporter.error(204,this);i[n]=r,r.bind.apply(r,[t,s,i].concat(w(t,s,h,this.Zi)))}sh(t,s,i){const h=this.Ei;i[h].sh(t,s,i),i[h]=null,this.Li&&this.Yi.sh(t,s,i)}accept(t){return t.ih(this)}}class ValueConverter{constructor(t,name,s){this.X=36913,this.Yi=t,this.name=name,this.Zi=s,this.hh=ValueConverterResource.J(this.name)}evaluate(t,s,i){if(!i)throw kernel.Reporter.error(202,this);const h=i.get(this.hh);if(!h)throw kernel.Reporter.error(205,this);if("toView"in h){const n=this.Zi,r=n.length,e=Array(r+1);e[0]=this.Yi.evaluate(t,s,i);for(let h=0;r>h;++h)e[h+1]=n[h].evaluate(t,s,i);return h.Ns.apply(h,e)}return this.Yi.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw kernel.Reporter.error(202,this);const h=i.get(this.hh);if(!h)throw kernel.Reporter.error(205,this);return"fromView"in h&&(value=h.nh.apply(h,[value].concat(w(t,s,i,this.Zi)))),this.Yi.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const h=i.th;if(!h)throw kernel.Reporter.error(202,this);this.Yi.connect(t,s,i);const n=this.Zi;for(let h=0,r=n.length;r>h;++h)n[h].connect(t,s,i);const r=h.get(this.hh);if(!r)throw kernel.Reporter.error(205,this);const e=r.Ui;if(void 0===e)return;const o=h.get(ISignaler);for(let t=0,s=e.length;s>t;++t)o.Ni(e[t],i)}sh(t,s,i){const h=i.th,n=h.get(this.hh).Ui;if(void 0===n)return;const r=h.get(ISignaler);for(let t=0,s=n.length;s>t;++t)r.Mi(n[t],i)}accept(t){return t.rh(this)}}class Assign{constructor(t,value){this.X=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t.eh(this)}}class Conditional{constructor(t,s,i){this.X=63,this.assign=kernel.PLATFORM.oh,this.uh=t,this.lh=s,this.fh=i}evaluate(t,s,i){return this.uh.evaluate(t,s,i)?this.lh.evaluate(t,s,i):this.fh.evaluate(t,s,i)}connect(t,s,i){this.uh.evaluate(t,s,null)?(this.uh.connect(t,s,i),this.lh.connect(t,s,i)):(this.uh.connect(t,s,i),this.fh.connect(t,s,i))}accept(t){return t.ah(this)}}class AccessThis{constructor(t=0){this.X=1793,this.assign=kernel.PLATFORM.oh,this.connect=kernel.PLATFORM.oh,this.dh=t}evaluate(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);let h=s.Si,n=this.dh;for(;n--&&h;)h=h.Oi;return 1>n&&h?h.Vi:void 0}accept(t){return t.ph(this)}}AccessThis.bh=new AccessThis(0),AccessThis.mh=new AccessThis(1);class AccessScope{constructor(name,t=0){this.X=10082,this.name=name,this.dh=t}evaluate(t,s,i){const name=this.name;return BindingContext.get(s,name,this.dh,t)[name]}assign(t,s,i,value){const name=this.name,h=BindingContext.get(s,name,this.dh,t);return h?h[name]=value:void 0}connect(t,s,i){const name=this.name,h=BindingContext.get(s,name,this.dh,t);i.ht(h,name)}accept(t){return t.wh(this)}}class AccessMember{constructor(t,name){this.X=9323,this.object=t,this.name=name}evaluate(t,s,i){const h=this.object.evaluate(t,s,i);return null==h?h:h[this.name]}assign(t,s,i,value){let h=this.object.evaluate(t,s,i);return null!==h&&"object"==typeof h||this.object.assign(t,s,i,h={}),h[this.name]=value,value}connect(t,s,i){const h=this.object.evaluate(t,s,null);this.object.connect(t,s,i),h&&i.ht(h,this.name)}accept(t){return t.vh(this)}}class AccessKeyed{constructor(t,s){this.X=9324,this.object=t,this.key=s}evaluate(t,s,i){const h=this.object.evaluate(t,s,i);if(null!=h)return h[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const h=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof h&&null!==h){this.key.connect(t,s,i);const n=this.key.evaluate(t,s,null);Array.isArray(h)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;for(let t=0;s>t;++t){const s=value.charCodeAt(t);if(48>s||s>57)return 0}return 1})(n)||i.ht(h,n)}}accept(t){return t.yh(this)}}class CallScope{constructor(name,t,s=0){this.X=1448,this.assign=kernel.PLATFORM.oh,this.name=name,this.Zi=t,this.dh=s}evaluate(t,s,i){const h=w(t,s,i,this.Zi),n=BindingContext.get(s,this.name,this.dh,t),r=v(t,n,this.name);if(r)return r.apply(n,h)}connect(t,s,i){const h=this.Zi;for(let n=0,r=h.length;r>n;++n)h[n].connect(t,s,i)}accept(t){return t.gh(this)}}class CallMember{constructor(t,name,s){this.X=1161,this.assign=kernel.PLATFORM.oh,this.object=t,this.name=name,this.Zi=s}evaluate(t,s,i){const h=this.object.evaluate(t,s,i),n=w(t,s,i,this.Zi),r=v(t,h,this.name);if(r)return r.apply(h,n)}connect(s,i,h){const n=this.object.evaluate(s,i,null);if(this.object.connect(s,i,h),v(s&~t.LifecycleFlags.Z,n,this.name)){const t=this.Zi;for(let n=0,r=t.length;r>n;++n)t[n].connect(s,i,h)}}accept(t){return t.Ch(this)}}class CallFunction{constructor(t,s){this.X=1162,this.assign=kernel.PLATFORM.oh,this.jh=t,this.Zi=s}evaluate(s,i,h){const n=this.jh.evaluate(s,i,h);if("function"==typeof n)return n.apply(null,w(s,i,h,this.Zi));if(s&t.LifecycleFlags.Z||null!=n)throw kernel.Reporter.error(207,this)}connect(t,s,i){const h=this.jh.evaluate(t,s,null);if(this.jh.connect(t,s,i),"function"==typeof h){const h=this.Zi;for(let n=0,r=h.length;r>n;++n)h[n].connect(t,s,i)}}accept(t){return t.Th(this)}}class Binary{constructor(t,s,i){this.X=46,this.assign=kernel.PLATFORM.oh,this.Ah=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){const h=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.Ah&&!h||"||"===this.Ah&&h||this.right.connect(t,s,i)}Ih(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}Sh(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}Oh(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}Vh(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}Ph(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}Fh(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}Rh(t,s,i){const h=this.right.evaluate(t,s,i);return"function"==typeof h?this.left.evaluate(t,s,i)instanceof h:0}Bh(t,s,i){const h=this.right.evaluate(t,s,i);return null!==h&&"object"==typeof h?this.left.evaluate(t,s,i)in h:0}kh(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}Uh(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}Dh(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}Nh(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}Mh(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}$h(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}zh(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}qh(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}Qh(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.Hh(this)}}class Unary{constructor(t,s){this.X=39,this.assign=kernel.PLATFORM.oh,this.Ah=t,this.Yi=s,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){this.Yi.connect(t,s,i)}Wh(t,s,i){this.Yi.evaluate(t,s,i)}_h(t,s,i){return typeof this.Yi.evaluate(t,s,i)}Kh(t,s,i){return!this.Yi.evaluate(t,s,i)}Uh(t,s,i){return-this.Yi.evaluate(t,s,i)}kh(t,s,i){return+this.Yi.evaluate(t,s,i)}accept(t){return t.Gh(this)}}class PrimitiveLiteral{constructor(value){this.X=17925,this.assign=kernel.PLATFORM.oh,this.connect=kernel.PLATFORM.oh,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.Jh(this)}}PrimitiveLiteral.Xh=new PrimitiveLiteral(void 0),PrimitiveLiteral.Yh=new PrimitiveLiteral(null),PrimitiveLiteral.Zh=new PrimitiveLiteral(1),PrimitiveLiteral.Eh=new PrimitiveLiteral(0),PrimitiveLiteral.xh=new PrimitiveLiteral("");class HtmlLiteral{constructor(parts){this.X=51,this.assign=kernel.PLATFORM.oh,this.parts=parts}evaluate(t,s,i){const h=this.parts;let n="";for(let r=0,e=h.length;e>r;++r){const value=h[r].evaluate(t,s,i);null!=value&&(n+=value)}return n}connect(t,s,i){for(let h=0,n=this.parts.length;n>h;++h)this.parts[h].connect(t,s,i)}accept(t){return t.Lh(this)}}class ArrayLiteral{constructor(t){this.X=17955,this.assign=kernel.PLATFORM.oh,this.elements=t}evaluate(t,s,i){const h=this.elements,n=h.length,r=Array(n);for(let e=0;n>e;++e)r[e]=h[e].evaluate(t,s,i);return r}connect(t,s,i){const h=this.elements;for(let n=0,r=h.length;r>n;++n)h[n].connect(t,s,i)}accept(t){return t.tn(this)}}ArrayLiteral.xh=new ArrayLiteral(kernel.PLATFORM.sn);class ObjectLiteral{constructor(t,s){this.X=17956,this.assign=kernel.PLATFORM.oh,this.keys=t,this.values=s}evaluate(t,s,i){const h={},n=this.keys,r=this.values;for(let e=0,o=n.length;o>e;++e)h[n[e]]=r[e].evaluate(t,s,i);return h}connect(t,s,i){const h=this.values;for(let n=0,r=this.keys.length;r>n;++n)h[n].connect(t,s,i)}accept(t){return t.in(this)}}ObjectLiteral.xh=new ObjectLiteral(kernel.PLATFORM.sn,kernel.PLATFORM.sn);class Template{constructor(t,s){this.X=17958,this.assign=kernel.PLATFORM.oh,this.hn=t,this.Y=void 0===s?kernel.PLATFORM.sn:s}evaluate(t,s,i){const h=this.Y,n=this.hn;let r=n[0];for(let e=0,o=h.length;o>e;++e)r+=h[e].evaluate(t,s,i),r+=n[e+1];return r}connect(t,s,i){const h=this.Y;for(let n=0,r=h.length;r>n;++n)h[n].connect(t,s,i),n++}accept(t){return t.nn(this)}}Template.xh=new Template([""]);class TaggedTemplate{constructor(t,s,i,h){this.X=1197,this.assign=kernel.PLATFORM.oh,this.hn=t,this.hn.raw=s,this.jh=i,this.Y=void 0===h?kernel.PLATFORM.sn:h}evaluate(t,s,i){const h=this.Y,n=h.length,r=Array(n);for(let e=0,o=n;o>e;++e)r[e]=h[e].evaluate(t,s,i);const e=this.jh.evaluate(t,s,i);if("function"!=typeof e)throw kernel.Reporter.error(207,this);return e.apply(null,[this.hn].concat(r))}connect(t,s,i){const h=this.Y;for(let n=0,r=h.length;r>n;++n)h[n].connect(t,s,i);this.jh.connect(t,s,i)}accept(t){return t.rn(this)}}class ArrayBindingPattern{constructor(t){this.X=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,h){}connect(t,s,i){}accept(t){return t.en(this)}}class ObjectBindingPattern{constructor(t,s){this.X=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,h){}connect(t,s,i){}accept(t){return t.on(this)}}class BindingIdentifier{constructor(name){this.X=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.un(this)}}const Ot={}.toString;class ForOfStatement{constructor(t,s){this.X=55,this.assign=kernel.PLATFORM.oh,this.cn=t,this.ln=s}evaluate(t,s,i){return this.ln.evaluate(t,s,i)}count(t){return Pt[Ot.call(t)](t)}fn(t,s){Vt[Ot.call(t)](t,s)}connect(t,s,i){this.cn.connect(t,s,i),this.ln.connect(t,s,i)}accept(t){return t.an(this)}}class Interpolation{constructor(parts,t){this.X=24,this.assign=kernel.PLATFORM.oh,this.parts=parts,this.Y=void 0===t?kernel.PLATFORM.sn:t,this.dn=this.Y.length>1,this.pn=this.Y[0]}evaluate(t,s,i){if(this.dn){const h=this.Y,parts=this.parts;let n=parts[0];for(let r=0,e=h.length;e>r;++r)n+=h[r].evaluate(t,s,i),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.pn.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.bn(this)}}BindingBehavior.prototype.X=38962,ValueConverter.prototype.X=36913,Assign.prototype.X=8208,Conditional.prototype.X=63,AccessThis.prototype.X=1793,AccessScope.prototype.X=10082,AccessMember.prototype.X=9323,AccessKeyed.prototype.X=9324,CallScope.prototype.X=1448,CallMember.prototype.X=1161,CallFunction.prototype.X=1162,Binary.prototype.X=46,Unary.prototype.X=39,PrimitiveLiteral.prototype.X=17925,HtmlLiteral.prototype.X=51,ArrayLiteral.prototype.X=17955,ObjectLiteral.prototype.X=17956,Template.prototype.X=17958,TaggedTemplate.prototype.X=1197,ArrayBindingPattern.prototype.X=65556,ObjectBindingPattern.prototype.X=65557,BindingIdentifier.prototype.X=65558,ForOfStatement.prototype.X=55,Interpolation.prototype.X=24;const Vt={mn(t,s){for(let i=0,h=t.length;h>i;++i)s(t,i,t[i])},wn(t,s){const i=Array(t.size);let h=-1;for(const s of t.entries())i[++h]=s;Vt["mn"](i,s)},vn(t,s){const i=Array(t.size);let h=-1;for(const s of t.keys())i[++h]=s;Vt["mn"](i,s)},yn(t,s){const i=Array(t);for(let s=0;t>s;++s)i[s]=s;Vt["mn"](i,s)},gn(t,s){},Cn(t,s){}},Pt={mn:t=>t.length,wn:t=>t.size,vn:t=>t.size,yn:t=>t,gn:()=>0,Cn:()=>0};(BindingMode=t.BindingMode||(t.BindingMode={}))[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Ns=2]="toView",BindingMode[BindingMode.nh=4]="fromView",BindingMode[BindingMode.jn=6]="twoWay",BindingMode[BindingMode.default=8]="default",(State=t.State||(t.State={}))[State.Gs=0]="none",State[State.Tn=1]="isBinding",State[State.An=2]="isBound",State[State.In=4]="isAttaching",State[State.Sn=8]="isAttached",State[State.On=16]="isMounted",State[State.Vn=32]="isDetaching",State[State.Pn=64]="isUnbinding",State[State.Fn=128]="isCached",State[State.Rn=256]="isContainerless",(Hooks=t.Hooks||(t.Hooks={}))[Hooks.Gs=1]="none",Hooks[Hooks.Bn=2]="hasCreated",Hooks[Hooks.kn=4]="hasBinding",Hooks[Hooks.Un=8]="hasBound",Hooks[Hooks.Dn=16]="hasAttaching",Hooks[Hooks.Nn=32]="hasAttached",Hooks[Hooks.Mn=64]="hasDetaching",Hooks[Hooks.$n=128]="hasDetached",Hooks[Hooks.zn=256]="hasUnbinding",Hooks[Hooks.qn=512]="hasUnbound",Hooks[Hooks.Qn=1024]="hasRender",Hooks[Hooks.Hn=2048]="hasCaching";const IRenderable=kernel.DI.ki("IRenderable").Wn(),IViewFactory=kernel.DI.ki("IViewFactory").Wn(),Ft=Object.freeze(Object.create(null)),ILifecycle=kernel.DI.ki("ILifecycle").Bi(t=>t.singleton(Rt));class Rt{constructor(){this._n=0,this.Kn=0,this.Gn=0,this.Jn=0,this.Xn=this,this.Yn=this,this.Zn=this,this.En=this,this.xn=this,this.Ln=this,this.tr=this,this.sr=this,this.ir=this,this.hr=this,this.nr=this,this.rr=this,this.er=this,this.or=this,this.ur=this,this.cr=this,this.lr=this,this.ar=this,this.dr=this,this.pr=this,this.br=null,this.mr=Promise.resolve(),this.wr=0,this.vr=0,this.yr=0,this.gr=0,this.Cr=0,this.jr=0,this.Tr=0,this.Ar=0,this.Ir=0,this.Sr=0,this.lt=Ft,this.flush=kernel.PLATFORM.oh,this.Or=Ft,this.connect=kernel.PLATFORM.oh,this.Vr=Ft,this.dt=kernel.PLATFORM.oh,this.Pr=Ft,this.bound=kernel.PLATFORM.oh,this.Fr=Ft,this.Rr=kernel.PLATFORM.oh,this.Br=Ft,this.kr=kernel.PLATFORM.oh,this.Ur=Ft,this.Dr=kernel.PLATFORM.oh,this.Nr=Ft,this.Mr=kernel.PLATFORM.oh,this.$r=Ft,this.cs=kernel.PLATFORM.oh,this.zr=Ft,this.qr=kernel.PLATFORM.oh,this.Qr=null}Hr(t){null===this.Qr&&(this.Qr=new AggregateLifecycleTask),this.Qr.Wr(t)}_r(t){null!==this.Qr&&(this.Qr===t?this.Qr=null:this.Qr.Kr(t))}A(s){return this.Xn===this&&(this.br=this.mr.then(()=>{this.Gr(t.LifecycleFlags.xs)})),null===s.lt&&(s.lt=Ft,this.Yn.lt=s,this.Yn=s,++this.wr),this.br}Gr(s){for(s|=t.LifecycleFlags.Ls;this.wr>0;){let i,h=this.Xn.lt;this.Xn=this.Yn=this,this.wr=0;do{i=h.lt,h.lt=null,h.flush(s),h=i}while(h!==Ft);if(s&t.LifecycleFlags.ot)break}}ls(){++this._n}fs(t){null===t.Pr&&(t.Pr=Ft,this.sr.Pr=t,this.sr=t,++this.gr)}Jr(t){null===t.Or&&(t.Or=Ft,this.En.Or=t,this.En=t,++this.vr),null===t.Vr&&(t.Vr=Ft,this.Ln.Vr=t,this.Ln=t,++this.yr)}Xr(t){if(this.vr>0){this.vr=0;let s,i=this.Zn.Or;this.Zn=this.En=this;do{i.connect(t),s=i.Or,i.Or=null,i=s}while(i!==Ft)}}Yr(s){for(s&t.LifecycleFlags.ti&&this.Gr(s|t.LifecycleFlags.Ls);this.yr>0;){this.yr=0;let t,i=this.xn.Vr;this.xn=this.Ln=this;do{i.dt(s),t=i.Vr,i.Vr=null,i=t}while(i!==Ft)}}ds(t){if(0==--this._n)return null===this.Qr||this.Qr.done?(this.Zr(t),LifecycleTask.done):(this.Qr.Er=this,this.Qr)}Zr(s){for(s&t.LifecycleFlags.ti&&this.Gr(s|t.LifecycleFlags.Ls);this.gr>0;){this.gr=0;let t,i=this.tr.Pr;this.tr=this.sr=this;do{i.bound(s),t=i.Pr,i.Pr=null,i=t}while(i!==Ft)}}vs(){++this.Jn}gs(t){null===t.zr&&(t.zr=Ft,this.pr.zr=t,this.pr=t,++this.Sr)}js(t){if(0==--this.Jn)return null===this.Qr||this.Qr.done?(this.xr(t),LifecycleTask.done):(this.Qr.Er=this,this.Qr)}xr(t){for(;this.Sr>0;){this.Sr=0;let s,i=this.dr.zr;this.dr=this.pr=this;do{i.qr(t),s=i.zr,i.zr=null,i=s}while(i!==Ft)}}Ut(){++this.Kn}Ht(t){null===t.Fr&&(t.Fr=Ft,this.hr.Fr=t,this.hr=t,++this.Cr)}Mt(t){null===t.Br&&(t.Br=Ft,this.rr.Br=t,this.rr=t,++this.jr)}$t(t){if(0==--this.Kn)return null===this.Qr||this.Qr.done?(this.Lr(t),LifecycleTask.done):(this.Qr.Er=this,this.Qr)}Lr(s){if(this.Gr(s|t.LifecycleFlags.Ls),this.Cr>0){this.Cr=0;let t,i=this.ir.Fr;this.ir=this.hr=this;do{i.Rr(s),t=i.Fr,i.Fr=null,i=t}while(i!==Ft)}if(this.Xr(t.LifecycleFlags.Z),this.jr>0){this.jr=0;let t,i=this.nr.Br;this.nr=this.rr=this;do{i.kr(s),t=i.Br,i.Br=null,i=t}while(i!==Ft)}}Wt(){++this.Gn}Zt(t){if(null===t.Ur&&(t.Ur=Ft,this.or.Ur=t,this.or=t,++this.Tr),null!==t.Fr){let s=this.ir,i=s.Fr;for(;i!==t;)i=(s=i).Fr;s.Fr=i.Fr,i.Fr=null,this.hr===i&&(this.hr=this),--this.Cr}}Gt(t){null===t.Nr&&(t.Nr=Ft,this.cr.Nr=t,this.cr=t,++this.Ar)}te(t){null===t.$r&&(t.$r=Ft,this.ar.$r=t,this.ar=t,++this.Ir)}Jt(t){if(0==--this.Gn)return null===this.Qr||this.Qr.done?(this.se(t),LifecycleTask.done):(this.Qr.Er=this,this.Qr)}se(s){if(this.Gr(s|t.LifecycleFlags.nt|t.LifecycleFlags.ot),this.Tr>0){this.Tr=0;let t,i=this.er.Ur;this.er=this.or=this;do{i.Dr(s),t=i.Ur,i.Ur=null,i=t}while(i!==Ft)}if(this.Ar>0){this.Ar=0;let t,i=this.ur.Nr;this.ur=this.cr=this;do{i.Mr(s),t=i.Nr,i.Nr=null,i=t}while(i!==Ft)}if(this.Ir>0){this.vs(),this.Ir=0;let t,i=this.lr.$r;this.lr=this.ar=this;do{i.cs(s),t=i.$r,i.$r=null,i=t}while(i!==Ft);this.js(s)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.ie=kernel.PLATFORM.oh,this.currentView=null,this.Sn=0,this.An=0,this.he=null,this.ne=LifecycleTask.done}static register(t){return kernel.Registration.transient(this,this).register(t,this)}re(value,t){this.ne.done?value instanceof Promise?(this.ee(new Bt(this,value)),this.oe()):this.ue(value,t):(value instanceof Promise?this.ee(new Bt(this,value)):this.ee(value),this.ne.ce()&&this.ne.cancel())}as(t,s){this.scope=s,this.An=1,null!==this.currentView&&this.currentView.ms(t,s)}Nt(t){this.Sn=1,null!==this.currentView&&this.currentView.qt(t)}Kt(t){this.Sn=0,null!==this.currentView&&this.currentView.xt(t)}Cs(t){this.An=0,null!==this.currentView&&this.currentView.cs(t)}ts(t){this.currentView=null}ee(t){null===this.he&&(this.he=[]),this.he.push(t)}ue(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let h,n=this.currentView;null===n?h=LifecycleTask.done:($lifecycle.te(n),$lifecycle.Wt(),n.xt(s),h=$lifecycle.Jt(s)),i.Wr(h),null===(n=this.currentView=t)?h=LifecycleTask.done:(this.An&&($lifecycle.ls(),n.ms(s,this.scope),$lifecycle.ds(s)),this.Sn?($lifecycle.Ut(),n.qt(s),h=$lifecycle.$t(s)):h=LifecycleTask.done),i.Wr(h),i.done?(this.ne=LifecycleTask.done,this.ie()):(this.ne=i,this.ne.le().then(()=>{this.ie(),this.oe()}).catch(t=>{throw t}))}oe(){if(null!==this.he&&this.he.length>0){const s=this.he.pop();this.he.length=0,Bt.is(s)?this.ne=s.start():this.ue(s,t.LifecycleFlags.ni)}else this.ne=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,ce:()=>0,cancel(){},le:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.Er=null,this.resolve=null,this.fe=[],this.ae=null}Wr(t){t.done||(this.done=0,this.fe.push(t),t.le().then(()=>{this.de()}).catch(t=>{throw t}))}Kr(t){if(t.done){const s=this.fe.indexOf(t);-1!==s&&this.fe.splice(s,1)}0===this.fe.length&&null!==this.Er&&(this.Er._r(this),this.Er=null)}ce(){return this.done?0:this.fe.every(t=>t.ce())}cancel(){this.ce()&&(this.fe.forEach(t=>{t.cancel()}),this.done=0)}le(){return null===this.ae&&(this.ae=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.ae}de(){this.done||this.fe.every(t=>t.done)&&this.complete(1)}complete(s){this.done=1,s&&null!==this.Er&&(this.Er.se(t.LifecycleFlags.ni),this.Er.xr(t.LifecycleFlags.ni),this.Er.Zr(t.LifecycleFlags.ni),this.Er.Lr(t.LifecycleFlags.ni)),this.Er._r(this),null!==this.resolve&&this.resolve()}}class Bt{constructor(t,s){this.pe=t,this.done=0,this.be=0,this.mr=s}static is(t){return"start"in t}start(){return this.be?LifecycleTask.done:(this.mr=this.mr.then(t=>(this.me(t),t)),this)}ce(){return!this.done}cancel(){this.ce()&&(this.be=1)}le(){return this.mr}me(value){this.be||(this.done=1,this.pe.re(value,t.LifecycleFlags.ni))}}const kt=[],Ut=[];let Dt=-1;y(-1);const{oneTime,Ns:Nt,nh:Mt}=t.BindingMode,$t=Nt|oneTime;t.Binding=class{constructor(t,s,i,mode,h,n){this.ws=null,this.As=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.Or=null,this.Vr=null,this.$scope=null,this.th=n,this.mode=mode,this.st=h,this.we=t,this.target=s,this.ve=i}ye(value,s){this.targetObserver._(value,(s|=this.ge)|t.LifecycleFlags.K)}Ce(value,s){this.we.assign((s|=this.ge)|t.LifecycleFlags.Es,this.$scope,this.th,value)}T(s,i,h){if(!(2&this.$state))return;const n=this.we,$scope=this.$scope,r=this.th;if(h|=this.ge,this.mode===t.BindingMode.nh&&(h&=~t.LifecycleFlags.K,h|=t.LifecycleFlags.Es),h&t.LifecycleFlags.K){const mode=this.mode,t=this.targetObserver.W();return(10082!==n.X||this.L>1)&&(s=n.evaluate(h,$scope,r)),s!==t&&this.ye(s,h),void(0==(mode&oneTime)&&(this.version++,n.connect(h,$scope,this),this.unobserve(0)))}if(!(h&t.LifecycleFlags.Es))throw kernel.Reporter.error(15,t.LifecycleFlags[h]);s!==n.evaluate(h,$scope,r)&&this.Ce(s,h)}ms(s,i){if(2&this.$state){if(this.$scope===i)return;this.cs(s|t.LifecycleFlags.rt)}this.$state|=1,this.ge=s&t.LifecycleFlags.ei,this.$scope=i;let h=this.we;hasBind(h)&&h.bind(s,i,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&Mt?this.st.tt(this.target,this.ve):this.st.je(this.target,this.ve)),targetObserver.bind&&targetObserver.bind(s),h=this.we,mode&$t&&this.ye(h.evaluate(s,i,this.th),s),mode&Nt&&this.$lifecycle.Jr(this),mode&Mt&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}cs(s){if(!(2&this.$state))return;this.$state|=64,this.ge=t.LifecycleFlags.Gs;const i=this.we;hasUnbind(i)&&i.sh(s,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.sh&&targetObserver.sh(s),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(s){2&this.$state&&this.we.connect((s|=this.ge)|t.LifecycleFlags.Z,this.$scope,this)}dt(s){2&this.$state&&this.ye(this.we.evaluate((s|=this.ge)|t.LifecycleFlags.Z,this.$scope,this.th),s)}},t.Binding=s([connectable()],t.Binding);class Call{constructor(t,s,i,h,n){this.ws=null,this.As=null,this.$state=0,this.th=n,this.we=t,this.targetObserver=h.tt(s,i)}Te(s){const i=this.$scope.Si;Object.assign(i,s);const h=this.we.evaluate(t.LifecycleFlags.Z,this.$scope,this.th);for(const t in s)delete i[t];return h}ms(s,i){if(2&this.$state){if(this.$scope===i)return;this.cs(s|t.LifecycleFlags.rt)}this.$state|=1,this.$scope=i;const h=this.we;hasBind(h)&&h.bind(s,i,this),this.targetObserver._(t=>this.Te(t),s),this.$state|=2,this.$state&=-2}cs(t){if(!(2&this.$state))return;this.$state|=64;const s=this.we;hasUnbind(s)&&s.sh(t,this.$scope,this),this.$scope=null,this.targetObserver._(null,t),this.$state&=-67}ht(t,s){}T(t,s,i){}}const IExpressionParser=kernel.DI.ki("IExpressionParser").Bi(t=>t.singleton(zt));class zt{constructor(){this.Ae=Object.create(null),this.Ie=Object.create(null),this.Se=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.Se[t];return void 0===i&&(i=this.Se[t]=this.Oe(t,s)),i}case 539:{let i=this.Ie[t];return void 0===i&&(i=this.Ie[t]=this.Oe(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.xh;let i=this.Ae[t];return void 0===i&&(i=this.Ae[t]=this.Oe(t,s)),i}}}cache(t){const{Ie:s,Ae:i,Se:h}=this;for(const n in t){const r=t[n];switch(r.X){case 24:h[n]=r;break;case 55:s[n]=r;break;default:i[n]=r}}}Oe(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),kernel.PLATFORM.sn):new AccessScope(parts[0]);let h=1;for(;parts.length>h;){const t=parts[h];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),kernel.PLATFORM.sn):new AccessMember(i,parts[h]),h++}return i}catch(t){throw kernel.Reporter.error(3,t)}}}(BindingType=t.BindingType||(t.BindingType={}))[BindingType.ui=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Ve=1280]="IsRef",BindingType[BindingType.Pe=512]="IsIterator",BindingType[BindingType.Fe=256]="IsCustom",BindingType[BindingType.Re=128]="IsFunction",BindingType[BindingType.Be=64]="IsEvent",BindingType[BindingType.ke=32]="IsProperty",BindingType[BindingType.Ue=16]="IsCommand",BindingType[BindingType.De=48]="IsPropertyCommand",BindingType[BindingType.Ne=80]="IsEventCommand",BindingType[BindingType.Me=6]="DelegationStrategyDelta",BindingType[BindingType.$e=15]="Command",BindingType[BindingType.ze=49]="OneTimeCommand",BindingType[BindingType.qe=50]="ToViewCommand",BindingType[BindingType.Qe=51]="FromViewCommand",BindingType[BindingType.He=52]="TwoWayCommand",BindingType[BindingType.We=53]="BindCommand",BindingType[BindingType._e=86]="TriggerCommand",BindingType[BindingType.Ke=87]="CaptureCommand",BindingType[BindingType.Ge=88]="DelegateCommand",BindingType[BindingType.Je=153]="CallCommand",BindingType[BindingType.Xe=26]="OptionsCommand",BindingType[BindingType.Ye=539]="ForCommand",BindingType[BindingType.Ze=284]="CustomCommand";const{Ns:qt,oneTime:Qt}=t.BindingMode;class MultiInterpolationBinding{constructor(s,i,h,n,mode,r){this.ws=null,this.As=null,this.$state=0,this.$scope=null,this.Ee=i,this.th=r,this.mode=mode,this.st=s,this.target=h,this.ve=n;const e=i.Y,parts=this.parts=Array(e.length);for(let o=0,u=e.length;u>o;++o)parts[o]=new t.InterpolationBinding(e[o],i,h,n,mode,s,r,0===o)}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.cs(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,h=parts.length;h>i;++i)parts[i].ms(t,s)}cs(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].cs(t)}}t.InterpolationBinding=class{constructor(t,s,i,h,mode,n,r,e){this.$state=0,this.Ee=s,this.xe=e,this.mode=mode,this.th=r,this.st=n,this.we=t,this.target=i,this.ve=h,this.targetObserver=n.je(i,h)}ye(value,s){this.targetObserver._(value,s|t.LifecycleFlags.K)}T(t,s,i){if(!(2&this.$state))return;const h=this.targetObserver.W(),n=this.Ee.evaluate(i,this.$scope,this.th);n!==h&&this.ye(n,i),0==(this.mode&Qt)&&(this.version++,this.we.connect(i,this.$scope,this),this.unobserve(0))}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.cs(t)}this.$state|=2,this.$scope=s;const i=this.we;i.bind&&i.bind(t,s,this),this.xe&&this.ye(this.Ee.evaluate(t,s,this.th),t),this.mode&qt&&i.connect(t,s,this)}cs(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.we;s.sh&&s.sh(t,this.$scope,this),this.$scope=null,this.unobserve(1)}},t.InterpolationBinding=s([connectable()],t.InterpolationBinding),t.LetBinding=class{constructor(t,s,i,h,toViewModel=0){this.ws=null,this.As=null,this.$state=0,this.$lifecycle=h.get(ILifecycle),this.$scope=null,this.th=h,this.st=i,this.we=t,this.target=null,this.ve=s,this.toViewModel=toViewModel}T(s,i,h){if(2&this.$state){if(!(h&t.LifecycleFlags.K))throw kernel.Reporter.error(15,h);{const{target:t,ve:s}=this,i=t[s],n=this.we.evaluate(h,this.$scope,this.th);n!==i&&(t[s]=n)}}}ms(s,i){if(2&this.$state){if(this.$scope===i)return;this.cs(s|t.LifecycleFlags.rt)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.Vi:i.Si;const h=this.we;h.bind&&h.bind(s,i,this),this.target[this.ve]=this.we.evaluate(t.LifecycleFlags.rt,i,this.th),this.we.connect(s,i,this),this.$state|=2,this.$state&=-2}cs(t){if(!(2&this.$state))return;this.$state|=64;const s=this.we;s.sh&&s.sh(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}},t.LetBinding=s([connectable()],t.LetBinding);class Ref{constructor(t,s,i){this.ws=null,this.As=null,this.$state=0,this.th=i,this.we=t,this.target=s}ms(s,i){if(2&this.$state){if(this.$scope===i)return;this.cs(s|t.LifecycleFlags.rt)}this.$state|=1,this.$scope=i;const h=this.we;hasBind(h)&&h.bind(s,i,this),this.we.assign(s,this.$scope,this.th,this.target),this.$state|=2,this.$state&=-2}cs(t){if(!(2&this.$state))return;this.$state|=64,this.we.evaluate(t,this.$scope,this.th)===this.target&&this.we.assign(t,this.$scope,this.th,null);const s=this.we;hasUnbind(s)&&s.sh(t,this.$scope,this),this.$scope=null,this.$state&=-67}ht(t,s){}T(t,s,i){}}t.CollectionLengthObserver=class{constructor(t,s){this.$=t,this.q=s,this.H=t[s]}W(){return this.$[this.q]}ct(t){this.$[this.q]=t}dt(t){this.C(this.$[this.q],this.H,t),this.H=this.$[this.q]}subscribe(t){this.p(t)}unsubscribe(t){this.m(t)}},t.CollectionLengthObserver=s([targetObserver()],t.CollectionLengthObserver);const Ht=Array.prototype,Wt=Ht.push,_t=Ht.unshift,Kt=Ht.pop,Gt=Ht.shift,Jt=Ht.splice,Xt=Ht.reverse,Yt=Ht.sort,Zt={push:Wt,unshift:_t,pop:Kt,shift:Gt,splice:Jt,reverse:Xt,sort:Yt},Et=["push","unshift","pop","shift","splice","reverse","sort"],xt={push(){const s=this.bt;if(void 0===s)return Wt.apply(this,arguments);const i=this.length,h=arguments.length;if(0===h)return i;this.length=s.ft.length=i+h;let n=i;for(;this.length>n;)this[n]=arguments[n-i],s.ft[n]=-2,n++;return s.C("push",arguments,t.LifecycleFlags.Xs),this.length},unshift(){const s=this.bt;if(void 0===s)return _t.apply(this,arguments);const i=arguments.length,h=Array(i);let n=0;for(;i>n;)h[n++]=-2;_t.apply(s.ft,h);const r=_t.apply(this,arguments);return s.C("unshift",arguments,t.LifecycleFlags.Xs),r},pop(){const s=this.bt;if(void 0===s)return Kt.call(this);const i=s.ft,h=Kt.call(this);return i[i.length-1]>-1&&Kt.call(i.vt,h),Kt.call(i),s.C("pop",arguments,t.LifecycleFlags.Xs),h},shift(){const s=this.bt;if(void 0===s)return Gt.call(this);const i=s.ft,h=Gt.call(this);return i[0]>-1&&Gt.call(i.vt,h),Gt.call(i),s.C("shift",arguments,t.LifecycleFlags.Xs),h},splice(s,i){const h=this.bt;if(void 0===h)return Jt.apply(this,arguments);const n=h.ft;if(i>0){let t=isNaN(s)?0:s;const to=t+i;for(;to>t;)n[t]>-1&&Jt.call(n.vt,this[t]),t++}const r=arguments.length;if(r>2){const t=r-2,h=Array(t);let e=0;for(;t>e;)h[e++]=-2;Jt.call(n,s,i,...h)}else 2===r&&Jt.call(n,s,i);const e=Jt.apply(this,arguments);return h.C("splice",arguments,t.LifecycleFlags.Xs),e},reverse(){const s=this.bt;if(void 0===s)return Xt.call(this);const i=this.length,h=i/2|0;let n=0;for(;n!==h;){const t=i-n-1,h=this[n],r=s.ft[n],e=s.ft[t];this[n]=this[t],s.ft[n]=e,this[t]=h,s.ft[t]=r,n++}return s.C("reverse",arguments,t.LifecycleFlags.Xs),this},sort(s){const i=this.bt;if(void 0===i)return Yt.call(this,s);const h=this.length;if(2>h)return this;D(this,i.ft,0,h,k);let n=0;for(;h>n&&void 0!==this[n];)n++;return void 0!==s&&"function"==typeof s||(s=B),D(this,i.ft,0,n,s),i.C("sort",arguments,t.LifecycleFlags.Xs),this}},Lt={Le:1,Ws:0,yi:1},def=Object.defineProperty;for(const t of Et)def(xt[t],"observing",{value:1,Le:0,yi:0,Ws:0});enableArrayObservation(),t.ArrayObserver=class{constructor(t,s){this.I=t,s.bt=this,this.wt=s,this.pt()}},t.ArrayObserver=s([collectionObserver(9)],t.ArrayObserver);const ts=Map.prototype,ss=ts.set,is=ts.clear,hs=ts.delete,ns={set:ss,clear:is,delete:hs},rs=["set","clear","delete"],es={set(s,value){const i=this.bt;if(void 0===i)return ss.call(this,s,value);const h=this.size;if(ss.call(this,s,value),this.size===h){let t=0;for(const h of this.entries()){if(h[0]===s)return h[1]!==value&&(i.ft[t]=-2),this;t++}return this}return i.ft[h]=-2,i.C("set",arguments,t.LifecycleFlags.Xs),this},clear(){const s=this.bt;if(void 0===s)return is.call(this);if(this.size>0){const i=s.ft;let h=0;for(const t of this.keys())i[h]>-1&&i.vt.push(t),h++;is.call(this),i.length=0,s.C("clear",arguments,t.LifecycleFlags.Xs)}},delete(value){const s=this.bt;if(void 0===s)return hs.call(this,value);if(0===this.size)return 0;let i=0;const h=s.ft;for(const t of this.keys()){if(t===value)return h[i]>-1&&h.vt.push(t),h.splice(i,1),hs.call(this,value);i++}return s.C("delete",arguments,t.LifecycleFlags.Xs),0}},os={Le:1,Ws:0,yi:1},us=Object.defineProperty;for(const t of rs)us(es[t],"observing",{value:1,Le:0,yi:0,Ws:0});enableMapObservation(),t.MapObserver=class{constructor(t,s){this.I=t,s.bt=this,this.wt=s,this.pt()}},t.MapObserver=s([collectionObserver(6)],t.MapObserver);const cs=Set.prototype,ls=cs.add,fs=cs.clear,as=cs.delete,ds={add:ls,clear:fs,delete:as},ps=["add","clear","delete"],bs={add(value){const s=this.bt;if(void 0===s)return ls.call(this,value);const i=this.size;return ls.call(this,value),this.size===i?this:(s.ft[i]=-2,s.C("add",arguments,t.LifecycleFlags.Xs),this)},clear(){const s=this.bt;if(void 0===s)return fs.call(this);if(this.size>0){const i=s.ft;let h=0;for(const t of this.keys())i[h]>-1&&i.vt.push(t),h++;fs.call(this),i.length=0,s.C("clear",arguments,t.LifecycleFlags.Xs)}},delete(value){const s=this.bt;if(void 0===s)return as.call(this,value);if(0===this.size)return 0;let i=0;const h=s.ft;for(const t of this.keys()){if(t===value)return h[i]>-1&&h.vt.push(t),h.splice(i,1),as.call(this,value);i++}return s.C("delete",arguments,t.LifecycleFlags.Xs),0}},ms={Le:1,Ws:0,yi:1},ws=Object.defineProperty;for(const t of ps)ws(bs[t],"observing",{value:1,Le:0,yi:0,Ws:0});enableSetObservation(),t.SetObserver=class{constructor(t,s){this.I=t,s.bt=this,this.wt=s,this.pt()}},t.SetObserver=s([collectionObserver(7)],t.SetObserver);const vs="undefined"==typeof Proxy,ys={so:0,io:0};t.CustomSetterObserver=class{constructor(t,s,i,h){this.lt=null,this.$=t,this.M=0,this.q=s,this.ho=i,this.I=h}W(){return this.$[this.q]}_(t){this.$[this.q]=t}flush(s){this.C(this.H,this.oldValue,s|t.LifecycleFlags.K)}subscribe(t){this.M||this.no(),this.p(t)}unsubscribe(t){this.m(t)}no(){const t=this.ho.set,s=this;this.M=1,this.H=this.$[this.q],Reflect.defineProperty(this.$,this.q,{set(i){t.call(s.$,i);const h=s.H;h!==i&&(s.oldValue=h,s.I.A(s).catch(t=>{throw t}),s.H=i)}})}},t.CustomSetterObserver=s([subscriberCollection(t.MutationKind.j)],t.CustomSetterObserver),t.CustomSetterObserver.prototype.G=kernel.PLATFORM.oh,t.GetterObserver=class{constructor(t,s,i,h,n,r){this.$=s,this.q=i,this.controller=new gs(t,s,i,h,this,n,r)}W(){return this.controller.value}_(t){}flush(s){const i=this.controller.value,h=this.controller.ro();i!==h&&this.C(h,i,s|t.LifecycleFlags.K)}subscribe(t){this.p(t),this.controller.eo()}unsubscribe(t){this.m(t),this.controller.oo()}},t.GetterObserver=s([subscriberCollection(t.MutationKind.j)],t.GetterObserver),t.GetterObserver.prototype.G=kernel.PLATFORM.oh;class gs{constructor(t,s,i,h,n,r,e){this.uo=0,this.dependencies=[],this.j=s,this.I=e,this.co=t,this.Er=n,this.propertyName=i,this.lo=0;const o=new Proxy(s,(function t(s,i){return{get(h,n){const value=h[n];if("$observers"===n||"function"==typeof value||!i.uo)return value;if(h instanceof Array)i.fo(s.ao(h)),"length"===n&&i.fo(s.ao(h).jt());else if(h instanceof Map)i.fo(s.do(h)),"size"===n&&i.fo(s.do(h).jt());else if(h instanceof Set){if(i.fo(s.po(h)),"size"===n)return s.po(h).jt()}else i.fo(s.tt(h,n));return(function(s,i,value){return value instanceof Object?new Proxy(value,t(s,i)):value})(s,i,value)}}})(r,this)),u=h.get,c=this;Reflect.defineProperty(s,i,{get:()=>((1>c.lo||c.uo)&&(c.value=u.apply(o)),c.value)})}fo(t){this.dependencies.includes(t)||this.dependencies.push(t)}eo(){this.lo++,this.lo>1||this.ro(1)}ro(t=0){const s=!this.co.so||t;return s&&(this.bo(),this.uo=1),this.value=this.j[this.propertyName],s&&(this.uo=0,this.dependencies.forEach(t=>{t.subscribe(this)})),this.value}oo(){this.lo--,0===this.lo&&this.bo()}T(){this.I.A(this.Er).catch(t=>{throw t})}bo(){this.dependencies.forEach(t=>{t.unsubscribe(this)}),this.dependencies.length=0}}const IDirtyChecker=kernel.DI.ki("IDirtyChecker").Bi(t=>t.singleton(Cs));class Cs{constructor(){this.mo=120,this.wo=[]}vo(t,s){return new js(this,t,s)}yo(t){const s=this.wo;s.push(t),1===s.length&&this.Co()}removeProperty(t){const s=this.wo;s.splice(s.indexOf(t),1)}Co(){kernel.PLATFORM.global.setTimeout(()=>{this.jo()},this.mo)}jo(){const s=this.wo;let i=s.length;for(;i--;){const h=s[i];h.To()&&h.flush(t.LifecycleFlags.nt)}s.length&&this.Co()}}let js=class{constructor(t,s,i){this.$=s,this.q=i,this.Ao=t}To(){return this.oldValue!==this.$[this.q]}W(){return this.$[this.q]}_(t){this.$[this.q]=t}flush(s){const i=this.oldValue,h=this.W();this.C(h,i,s|t.LifecycleFlags.K),this.oldValue=h}subscribe(t){this.g()||(this.oldValue=this.W(),this.Ao.yo(this)),this.p(t)}unsubscribe(t){this.m(t)&&!this.g()&&this.Ao.removeProperty(this)}};js=s([propertyObserver()],js);const Ts=kernel.PLATFORM.oh;class PrimitiveObserver{constructor(t,s){this.Io=1,"length"===s?(this.$=t,this.W=this.So):this.W=this.Oo}So(){return this.$.length}Oo(){}}PrimitiveObserver.prototype._=Ts,PrimitiveObserver.prototype.subscribe=Ts,PrimitiveObserver.prototype.unsubscribe=Ts,PrimitiveObserver.prototype.G=Ts;class PropertyAccessor{constructor(t,s){this.$=t,this.q=s}W(){return this.$[this.q]}_(value){this.$[this.q]=value}}const As={}.toString,IObserverLocator=kernel.DI.ki("IObserverLocator").Wn(),ITargetObserverLocator=kernel.DI.ki("ITargetObserverLocator").Wn(),ITargetAccessorLocator=kernel.DI.ki("ITargetAccessorLocator").Wn();class Is{constructor(t,s,i,h){this.Vo=[],this.Ao=s,this.I=t,this.Po=i,this.Fo=h}tt(t,s){if((function(t){return 1==t.Ii})(t))return t.Pi().Ai(t,s);let i,h=t._s;return h&&s in h?h[s]:((i=this.Ro(t,s)).Io||(void 0===h&&(h=this.Bo(t)),h[s]=i),i)}ko(t){this.Vo.push(t)}je(t,s){return this.Fo.Uo(t)?this.Po.Do(t,s)?this.tt(t,s):this.Fo.je(this.I,t,s):new PropertyAccessor(t,s)}ao(t){return N(this.I,t)}do(t){return M(this.I,t)}po(t){return $(this.I,t)}Bo(t){return t._s||this.No(t)}No(t){const value={};return Reflect.defineProperty(t,"$observers",{Ws:0,yi:0,Le:0,value})||kernel.Reporter.write(0,t),value}Mo(t,s,i){for(let h=0,n=this.Vo.length;n>h;h++){const n=this.Vo[h].tt(t,s,i);if(n)return n}return null}Ro(s,i){if(!(s instanceof Object))return new PrimitiveObserver(s,i);let h=0;if(this.Po.Uo(s)){const t=this.Po.tt(this.I,this,s,i);if(null!==t)return t;if(null!==t)return t;h=1}switch(As.call(s)){case"[object Array]":return"length"===i?this.ao(s).jt():this.Ao.vo(s,i);case"[object Map]":return"size"===i?this.do(s).jt():this.Ao.vo(s,i);case"[object Set]":return"size"===i?this.po(s).jt():this.Ao.vo(s,i)}const n=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(s,i);if(n&&(n.get||n.set)){if(n.get&&n.get.tt)return n.get.tt(s);return this.Mo(s,i,n)||(h?this.Ao.vo(s,i):(function(s,i,h,n,r,e){if(0==e.yi)return i.vo(n,r);if(e.get){const o=n.constructor.computed&&n.constructor.computed[r]||ys;return e.set?o.io?vs?i.vo(n,r):new t.GetterObserver(o,n,r,e,s,h):new t.CustomSetterObserver(n,r,e,h):vs?i.vo(n,r):new t.GetterObserver(o,n,r,e,s,h)}throw kernel.Reporter.error(18,r)})(this,this.Ao,this.I,s,i,n))}return new t.SetterObserver(s,i)}}Is.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Ss=kernel.PLATFORM.oh;t.SelfObserver=class{constructor(t,s,i){this.$=t,this.q=s,this.H=t[s],this.Ds=i in t?t[i].bind(t):Ss}W(){return this.H}_(s,i){const h=this.H;if(h!==s&&(this.H=s,!(i&t.LifecycleFlags.rt))){const t=this.Ds(s,h);void 0!==t&&(this.H=s=t),this.C(s,h,i)}}},t.SelfObserver=s([propertyObserver()],t.SelfObserver);const{oneTime:Os,Ns:Vs,nh:Ps,jn:Fs}=t.BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.$o=i.mode,i.mode=this.mode}sh(t,s,i){i.mode=i.$o,i.$o=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Os)}}BindingBehaviorResource.zi("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Vs)}}BindingBehaviorResource.zi("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Ps)}}BindingBehaviorResource.zi("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Fs)}}BindingBehaviorResource.zi("twoWay",TwoWayBindingBehavior);const Rs={},Bs=t.BindingMode.nh;class DebounceBindingBehavior{bind(s,i,h,n=200){let r,e,o;h instanceof t.Binding?(r="handleChange",o=q,e=h.mode&Bs?t.LifecycleFlags.Es:t.LifecycleFlags.K):(r="callSource",o=z,e=t.LifecycleFlags.K),h.Ot=h[r],h.Ot.zo=r,h[r]=o,h.It={Pt:e,Vt:n,St:0,oldValue:Rs}}sh(t,s,i){i[i.Ot.zo]=i.Ot,i.Ot=null,kernel.PLATFORM.global.clearTimeout(i.It.St),i.It=null}}BindingBehaviorResource.zi("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.qo=t}bind(t,s,i,...h){if(!i.ye)throw kernel.Reporter.error(11);if(4===arguments.length){const name=h[0];this.qo.Ni(name,i),i.Qo=name}else{if(4>=arguments.length)throw kernel.Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.qo.Ni(t[s],i);i.Qo=t}}}sh(t,s,i){const name=i.Qo;if(i.Qo=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.qo.Mi(t[s],i)}else this.qo.Mi(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.zi("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(s,i,h,n=200){let r;h.Bt=h[r=h instanceof t.Binding?h.mode===t.BindingMode.jn?"updateSource":"updateTarget":"callSource"],h.Bt.zo=r,h[r]=Q,h.Ft={Vt:n,Rt:0,St:-1}}sh(t,s,i){i[i.Bt.zo]=i.Bt,i.Bt=null,kernel.PLATFORM.global.clearTimeout(i.Ft.St),i.Ft=null}}BindingBehaviorResource.zi("throttle",ThrottleBindingBehavior);const ks="custom-element",Us="custom-attribute";(TargetedInstructionType=t.TargetedInstructionType||(t.TargetedInstructionType={})).Ho="ra",TargetedInstructionType.Wo="rb",TargetedInstructionType._o="rc",TargetedInstructionType.Ko="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.Ee="rf",TargetedInstructionType.Go="rg",TargetedInstructionType.Jo="rh",TargetedInstructionType.Xo="ri",TargetedInstructionType.Yo="rj",TargetedInstructionType.Zo="rk";const ITargetedInstruction=kernel.DI.ki("createInterface").Wn(),Ds=Object.freeze({required:1,compiler:"default"}),Ns=Object.freeze({required:0,compiler:"default"});class Ms{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Ns,this.bindables=kernel.PLATFORM.kt,this.instructions=kernel.PLATFORM.sn,this.dependencies=kernel.PLATFORM.sn,this.surrogates=kernel.PLATFORM.sn,this.containerless=0,this.shadowOptions=null,this.hasSlots=0}}const $s=["name","template","cache","build","containerless","shadowOptions","hasSlots"],zs=["instructions","dependencies","surrogates"],CustomAttributeResource={name:Us,J:_,$i(t){return t.kind===this},zi(s,i){const h=i,n=(function(def,s){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?kernel.PLATFORM.sn:aliases,defaultBindingMode:null==defaultBindingMode?t.BindingMode.Ns:defaultBindingMode,Bs:void 0===def.Bs?0:def.Bs,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},s.bindables,def.bindables)}})("string"==typeof s?{name:s}:s,h),r=h.prototype;return h.kind=CustomAttributeResource,h.description=n,h.register=at,r.Eo=lt,r.ms=nt,r.qt=K,r.xt=X,r.cs=ot,r.hs=E,r.As=null,r.ws=null,r.Lt=null,r.Qt=null,r.$r=null,r.$scope=null,r.$hooks=0,r.$state=0,"flush"in r&&(r.lt=null),"binding"in r&&(r.$hooks|=4),"bound"in r&&(r.$hooks|=8,r.Pr=null),"unbinding"in r&&(r.$hooks|=256),"unbound"in r&&(r.$hooks|=512,r.zr=null),"created"in r&&(r.$hooks|=2),"attaching"in r&&(r.$hooks|=16),"attached"in r&&(r.$hooks|=32,r.Br=null),"detaching"in r&&(r.$hooks|=64),"caching"in r&&(r.$hooks|=2048),"detached"in r&&(r.$hooks|=128,r.Nr=null),h}},INode=kernel.DI.ki("INode").Wn(),IRenderLocation=kernel.DI.ki("IRenderLocation").Wn(),IDOM=kernel.DI.ki("IDOM").Wn(),NodeSequence={empty:{childNodes:kernel.PLATFORM.sn,firstChild:null,lastChild:null,xo:()=>kernel.PLATFORM.sn,insertBefore(t){},Lo(t){},remove(){}}};class If{constructor(t,s,i){this.value=0,this.pe=i,this.tu=null,this.su=null,this.iu=t,this.hu=null,this.location=s}as(t){const s=this.nu(t);this.pe.re(s,t),this.pe.as(t,this.$scope)}Nt(t){this.pe.Nt(t)}Kt(t){this.pe.Kt(t)}Cs(t){this.pe.Cs(t)}ts(t){null!==this.hu&&this.hu.release(t)&&(this.hu=null),null!==this.su&&this.su.release(t)&&(this.su=null),this.pe.ts(t)}ru(s,i,h){if(h&t.LifecycleFlags.nt){const t=this.nu(h);this.pe.re(t,h)}else this.$lifecycle.A(this).catch(t=>{throw t})}flush(t){const s=this.nu(t);this.pe.re(s,t)}nu(t){return this.value?this.hu=this.eu(this.hu,this.iu,t):null!==this.tu?this.su=this.eu(this.su,this.tu,t):null}eu(t,s,i){return null===t&&(t=s.create()),t.ou(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],s([bindable],If.prototype,"value",void 0),CustomAttributeResource.zi({name:"if",isTemplateController:1},If);class Else{constructor(t){this.uu=t}link(t){t.tu=this.uu}}Else.inject=[IViewFactory],CustomAttributeResource.zi({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.uu=i,this.cu=0,this.location=t,this.lu=null,this.fu=s,this.du=[]}as(t){this.pu()}bound(t){let s=this.fu.bs;for(;null!==s;){if(s.target===this&&"items"===s.ve){this.bu=s.we;break}s=s.ws}this.mu=this.bu.cn.evaluate(t,this.$scope,null),this.wu(null,t)}Nt(t){const{du:s,location:i}=this;for(let h=0,n=s.length;n>h;++h){const n=s[h];n.ou(i),n.qt(t)}}Kt(t){const{du:s}=this;for(let i=0,h=s.length;h>i;++i){const h=s[i];h.xt(t),h.release(t)}}qr(t){this.pu();const{du:s}=this;for(let i=0,h=s.length;h>i;++i)s[i].cs(t)}vu(s,i,h){this.pu(),this.wu(null,h|t.LifecycleFlags.K)}N(s){this.wu(s,t.LifecycleFlags.nt|t.LifecycleFlags.K)}wu(t,s){const{du:i,$lifecycle}=this;if(2&this.$state){const{mu:h,$scope,uu:n,bu:r,yu:e}=this,o=i.length,u=r.count(e);if(u>o){i.length=u;for(let t=o;u>t;++t)i[t]=n.create()}else if(o>u){$lifecycle.Wt();for(let t=u,h=i[t];o>t;h=i[++t])h.release(s),h.xt(s);$lifecycle.Jt(s),$lifecycle.vs();for(let t=u,h=i[t];o>t;h=i[++t])h.cs(s);if($lifecycle.js(s),i.length=u,0===u)return}else if(0===u)return;$lifecycle.ls(),r.fn(e,null===t?(t,n,r)=>{const e=i[n];e.ms(s,Scope.Ri($scope,e.$scope&&e.$scope.Vi[h]===r?e.$scope.Vi:BindingContext.create(h,r)))}:(n,r,e)=>{const o=i[r];o.ms(s,Scope.Ri($scope,!o.$scope||t[r]!==r&&o.$scope.Vi[h]!==e?BindingContext.create(h,e):o.$scope.Vi))}),$lifecycle.ds(s)}if(8&this.$state){const{location:h}=this;if($lifecycle.Ut(),null===t)for(let t=0,n=i.length;n>t;++t){const n=i[t];n.ou(h),n.qt(s)}else for(let n=0,r=i.length;r>n;++n)if(t[n]!==n){const t=i[n];t.ou(h),t.qt(s)}$lifecycle.$t(s)}}pu(){const t=this.lu;if(3&this.$state){const s=this.lu=getCollectionObserver(this.$lifecycle,this.yu);t!==s&&t&&t.At(this),s&&s.Tt(this)}else t&&t.At(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],s([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.zi({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,s){this.uu=t,this.currentView=this.uu.create(),this.currentView.ou(s)}as(s){this.currentView.ms(s|t.LifecycleFlags.oi,this.$scope)}Nt(t){this.currentView.qt(t)}Kt(t){this.currentView.xt(t)}Cs(t){this.currentView.cs(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.zi({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.uu=t,this.currentView=this.uu.create(),this.currentView.ou(s)}ru(){2&this.$state&&this.gu(t.LifecycleFlags.hi)}as(t){this.gu(t)}Nt(t){this.currentView.qt(t)}Kt(t){this.currentView.xt(t)}Cs(t){this.currentView.cs(t)}gu(t){const s=Scope.Ri(this.$scope,this.value);this.currentView.ms(t,s)}}With.inject=[IViewFactory,IRenderLocation],s([bindable],With.prototype,"value",void 0),CustomAttributeResource.zi({name:"with",isTemplateController:1},With);const IProjectorLocator=kernel.DI.ki("IProjectorLocator").Wn(),CustomElementResource={name:ks,J:H,$i(t){return t.kind===this},Cu:W,zi(t,s=null){if(!t)throw kernel.Reporter.error(70);const i=null===s?class{}:s,h=buildTemplateDefinition(i,t),n=i.prototype;return i.kind=CustomElementResource,i.description=h,i.register=pt,n.Eo=ft,n.ms=rt,n.qt=G,n.xt=Y,n.cs=ut,n.hs=x,n.As=null,n.ws=null,n.Lt=null,n.Qt=null,n.$r=null,n.$scope=null,n.$hooks=0,n.bs=null,n.Ts=null,n.zt=null,n.Et=null,n.Rr=tt,n.Dr=st,n.Fr=null,n.Ur=null,n.rs=null,"flush"in n&&(n.lt=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.Pr=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n.zr=null),"render"in n&&(n.$hooks|=1024),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n.Br=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.Nr=null),i}},qs={mode:"open"},ISanitizer=kernel.DI.ki("ISanitizer").Bi(t=>t.singleton(class{ju(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.Tu=t}Ns(t){return null==t?null:this.Tu.ju(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.zi("sanitize",SanitizeValueConverter);class Qs{constructor($lifecycle,cache){this.bs=null,this.Ts=null,this.ws=null,this.As=null,this.zt=null,this.Et=null,this.Qt=null,this.Lt=null,this.Fr=null,this.Ur=null,this.$r=null,this.$state=0,this.$scope=null,this.os=0,this.$lifecycle=$lifecycle,this.cache=cache}ou(t){this.os=0,this.location=t}release(t){return this.os=1,8&this.$state?this.cache.Au(this):!!this.Dr(t)}Iu(t){this.$scope=t,this.ms=mt,this.cs=wt}}class Hs{constructor(name,template,t){this.Su=0,this.Ou=-1,this.cache=null,this.I=t,this.name=name,this.template=template}Vu(t,s){t&&("*"===t?t=Hs.Pu:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Ou&&s||(this.Ou=t)),this.cache=this.Ou>0?[]:null,this.Su=this.Ou>0}Au(t){return null!==this.cache&&this.Ou>this.cache.length}us(s){return this.Au(s)?(s.hs(t.LifecycleFlags.Gs),this.cache.push(s),1):0}create(){const cache=this.cache;let t;if(null!==cache&&cache.length>0)return(t=cache.pop()).$state&=-129,t;if(t=new Qs(this.I,this),this.template.Ps(t),!t.$nodes)throw kernel.Reporter.error(90);return t}}Hs.Pu=65535,(t=>{t.ms=et,t.cs=ct,t.qt=J,t.xt=Z,t.hs=L,t.Rr=it,t.Dr=ht})(Qs.prototype);const ITemplateCompiler=kernel.DI.ki("ITemplateCompiler").Wn();(ViewCompileFlags=t.ViewCompileFlags||(t.ViewCompileFlags={}))[ViewCompileFlags.Gs=1]="none",ViewCompileFlags[ViewCompileFlags.Fu=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Ru=4]="shadowDOM";const ITemplateFactory=kernel.DI.ki("ITemplateFactory").Wn(),Ws={Bu:null,dom:null,Ps(t){t.$nodes=NodeSequence.empty,t.$context=null}},_s="default",IInstructionRenderer=kernel.DI.ki("IInstructionRenderer").Wn(),IRenderer=kernel.DI.ki("IRenderer").Wn(),IRenderingEngine=kernel.DI.ki("IRenderingEngine").Bi(t=>t.singleton(Ks));class Ks{constructor(t,s,i,h){this.ku=new Map,this.Uu=t,this.Du=s,this.Nu=new Map,this.I=i,this.Mu=new Map,this.$u=h.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}Fs(dom,t,s,i){if(!t)return null;let h=this.Mu.get(t);return h||(h=this.zu(dom,t,s,i),this.Mu.set(t,h)),h}qu(dom,t,s){if(!t)return null;let i=this.Nu.get(t);if(!i){const h=buildTemplateDefinition(null,t),template=this.zu(dom,h,s,null);(i=new Hs(h.name,template,this.I)).Vu(h.cache,1),this.Nu.set(t,i)}return i}Is(t,s){let i=this.ku.get(t);i||(i=Ys.create(t),this.ku.set(t,i)),i.Qu(s,this.I)}zu(dom,s,i,h){if(null===i&&(i=this.Uu),null!==s.template){const n=createRenderContext(dom,i,s.dependencies,h);if(s.build.required){const i=s.build.compiler||_s,compiler=this.$u[i];if(void 0===compiler)throw kernel.Reporter.error(20,i);s=compiler.compile(dom,s,new kernel.RuntimeCompilationResources(n),t.ViewCompileFlags.Fu)}return this.Du.create(n,s)}return Ws}}Ks.inject=[kernel.IContainer,ITemplateFactory,ILifecycle,kernel.all(ITemplateCompiler)];class Gs{constructor(){this.j=null}Hs(t){this.j=t}resolve(t,s){if(void 0===this.j)throw kernel.Reporter.error(50);return this.j}G(){this.j=null}}class Js{Hs(t,parts){this.uu=t,this.Hu=parts||kernel.PLATFORM.kt}resolve(t,s){const i=this.uu;if(null==i)throw kernel.Reporter.error(50);if(!i.name||!i.name.length)throw kernel.Reporter.error(51);const h=this.Hu[i.name];if(h){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.qu(dom,h,s)}return i}G(){this.uu=null,this.Hu=kernel.PLATFORM.kt}}let Xs=class{constructor(t,customElement){this.gt=0,this.children=null,this.customElement=customElement,this.I=t,this.M=0}W(){return this.M||(this.M=1,this.customElement.rs.Wu(()=>{this._u()}),this.children=vt(this.customElement.rs.children)),this.children}_(t){}flush(s){this.C(this.children,void 0,s|t.LifecycleFlags.K),this.gt=0}subscribe(t){this.p(t)}unsubscribe(t){this.m(t)}_u(){this.children=vt(this.customElement.rs.children),"$childrenChanged"in this.customElement&&this.customElement.Ku(),this.I.A(this).catch(t=>{throw t}),this.gt=1}};Xs=s([subscriberCollection(t.MutationKind.j)],Xs);class Ys{constructor(){}static create(t){const s=new Ys;return s.bindables=t.description.bindables,s}Qu(t,s){t.$lifecycle=s,"$projector"in t?this.Gu(s,t):this.Ju(t)}Gu(t,s){this.Ju(s).Xu=new Xs(t,s),Reflect.defineProperty(s,"$children",{Ws:0,get(){return this._s.Xu.W()}})}Ju(s){const i={},bindables=this.bindables,h=Object.getOwnPropertyNames(bindables);for(let n=0,r=h.length;r>n;++n){const name=h[n];i[name]=new t.SelfObserver(s,name,bindables[name].Ds),yt(s,name)}return Reflect.defineProperty(s,"$observers",{Ws:0,value:i}),i}}class Aurelia{constructor(t=kernel.DI.Yu()){this.Uu=t,this.Zu=[],this.Eu=[],this.xu=[],this.Lu=0,this.tc=null,kernel.Registration.j(Aurelia,this).register(t,Aurelia)}register(...t){return this.Uu.register(...t),this}app(s){const host=s.host;let component;const i=s.component;CustomElementResource.$i(i)?(this.Uu.register(i),component=this.Uu.get(CustomElementResource.J(i.description.name))):component=i;const dom=this.Uu.get(IDOMInitializer).initialize(s),h=()=>{if(host.$au=this,!this.Zu.includes(component)){this.tc=component,this.Zu.push(component);const t=this.Uu.get(IRenderingEngine),s=this.Uu.get(IProjectorLocator);component.Eo(dom,s,t,host,this.Uu)}component.ms(t.LifecycleFlags.ti|t.LifecycleFlags.rt,null),component.qt(t.LifecycleFlags.ti|t.LifecycleFlags.Dt)};return this.Eu.push(h),this.xu.push(()=>{component.xt(t.LifecycleFlags.Yt|t.LifecycleFlags._t),component.cs(t.LifecycleFlags.Yt|t.LifecycleFlags.ys),host.$au=null}),this.Lu&&h(),this}root(){return this.tc}start(){for(const t of this.Eu)t();return this.Lu=1,this}stop(){this.Lu=0;for(const t of this.xu)t();return this}}kernel.PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=kernel.DI.ki("IDOMInitializer").Wn();class Zs{constructor(t){const s=this.sc={};t.forEach(t=>{s[t.Ks]=t})}Ps(dom,t,s,targets,i,host,parts){const h=i.instructions,n=this.sc;if(targets.length!==h.length)throw kernel.Reporter.error(targets.length>h.length?30:31);for(let i=0,r=targets.length;r>i;++i){const instructions=h[i],r=targets[i];for(let i=0,h=instructions.length;h>i;++i){const h=instructions[i];n[h.type].Ps(dom,t,s,r,h,parts)}}if(host){const h=i.surrogates;for(let i=0,r=h.length;r>i;++i){const r=h[i];n[r.type].Ps(dom,t,s,host,r,parts)}}}}Zs.inject=[kernel.all(IInstructionRenderer)];let Es=class{Ps(dom,t,s,i,h){i[h.to]=h.value}};Es=s([instructionRenderer("re")],Es);let xs=class{constructor(t){this.ic=t}Ps(dom,t,s,i,h){const n=t.Qs(s,i,h,null,null,i,1),component=t.get(H(h.res)),r=t.get(IRenderer).sc,e=t.get(IProjectorLocator),o=h.instructions;component.Eo(dom,e,this.ic,i,t,h);for(let i=0,h=o.length;h>i;++i){const h=o[i];r[h.type].Ps(dom,t,s,component,h)}addBindable(s,component),addAttachable(s,component),n.G()}};xs.inject=[IRenderingEngine],xs=s([instructionRenderer("ra")],xs);let Ls=class{constructor(t){this.ic=t}Ps(dom,t,s,i,h){const n=t.Qs(s,i,h),component=t.get(_(h.res)),r=t.get(IRenderer).sc,e=h.instructions;component.Eo(this.ic);for(let i=0,h=e.length;h>i;++i){const h=e[i];r[h.type].Ps(dom,t,s,component,h)}addBindable(s,component),addAttachable(s,component),n.G()}};Ls.inject=[IRenderingEngine],Ls=s([instructionRenderer("rb")],Ls);let ti=class{constructor(t){this.ic=t}Ps(dom,t,s,i,h,parts){const n=this.ic.qu(dom,h.def,t),r=t.Qs(s,i,h,n,parts,dom.hc(i),0),component=t.get(_(h.res)),e=t.get(IRenderer).sc,o=h.instructions;component.Eo(this.ic),h.link&&component.link(s.Et);for(let i=0,h=o.length;h>i;++i){const h=o[i];e[h.type].Ps(dom,t,s,component,h)}addBindable(s,component),addAttachable(s,component),r.G()}};ti.inject=[IRenderingEngine],ti=s([instructionRenderer("rc")],ti);let si=class{constructor(t,s){this.nc=t,this.st=s}Ps(dom,s,i,h,n){dom.remove(h);const r=n.instructions,toViewModel=n.toViewModel;for(let h=0,n=r.length;n>h;++h){const n=r[h],e=ensureExpression(this.nc,n.from,48);addBindable(i,new t.LetBinding(e,n.to,this.st,s,toViewModel))}}};si.inject=[IExpressionParser,IObserverLocator],si=s([instructionRenderer("rd")],si);let ii=class{constructor(t,s){this.nc=t,this.st=s}Ps(dom,t,s,i,h){const n=ensureExpression(this.nc,h.from,153);addBindable(s,new Call(n,i,h.to,this.st,t))}};ii.inject=[IExpressionParser,IObserverLocator],ii=s([instructionRenderer("rh")],ii);let hi=class{constructor(t){this.nc=t}Ps(dom,t,s,i,h){const n=ensureExpression(this.nc,h.from,1280);addBindable(s,new Ref(n,i,t))}};hi.inject=[IExpressionParser],hi=s([instructionRenderer("rj")],hi);let ni=class{constructor(t,s){this.nc=t,this.st=s}Ps(dom,s,i,h,n){let bindable;const r=ensureExpression(this.nc,n.from,2048);addBindable(i,bindable=r.dn?new MultiInterpolationBinding(this.st,r,h,n.to,t.BindingMode.Ns,s):new t.InterpolationBinding(r.pn,r,h,n.to,t.BindingMode.Ns,this.st,s,1))}};ni.inject=[IExpressionParser,IObserverLocator],ni=s([instructionRenderer("rf")],ni);let ri=class{constructor(t,s){this.nc=t,this.st=s}Ps(dom,s,i,h,n){const r=ensureExpression(this.nc,n.from,48|n.mode);addBindable(i,new t.Binding(r,h,n.to,n.mode,this.st,s))}};ri.inject=[IExpressionParser,IObserverLocator],ri=s([instructionRenderer("rg")],ri);let ei=class{constructor(t,s){this.nc=t,this.st=s}Ps(dom,s,i,h,n){const r=ensureExpression(this.nc,n.from,539);addBindable(i,new t.Binding(r,h,n.to,t.BindingMode.Ns,this.st,s))}};ei.inject=[IExpressionParser,IObserverLocator],ei=s([instructionRenderer("rk")],ei);const BasicRenderer={register(t){t.register(Es,xs,Ls,ti,si,ii,hi,ni,ri,ei)}},oi=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],RuntimeConfiguration={register(t){t.register(BasicRenderer,kernel.Registration.singleton(IObserverLocator,Is),kernel.Registration.singleton(ILifecycle,Rt),kernel.Registration.singleton(IRenderer,Zs),...oi)},Yu(){const t=kernel.DI.Yu();return t.register(RuntimeConfiguration),t}};t.CallFunction=CallFunction,t.connects=function(t){return 32==(32&t.X)},t.observes=function(t){return 64==(64&t.X)},t.callsFunction=function(t){return 128==(128&t.X)},t.hasAncestor=function(t){return 256==(256&t.X)},t.isAssignable=function(t){return 8192==(8192&t.X)},t.isLeftHandSide=function(t){return 1024==(1024&t.X)},t.isPrimary=function(t){return 512==(512&t.X)},t.isResource=function(t){return 32768==(32768&t.X)},t.hasBind=hasBind,t.hasUnbind=hasUnbind,t.isLiteral=isLiteral,t.arePureLiterals=arePureLiterals,t.isPureLiteral=isPureLiteral,t.BindingBehavior=BindingBehavior,t.ValueConverter=ValueConverter,t.Assign=Assign,t.Conditional=Conditional,t.AccessThis=AccessThis,t.AccessScope=AccessScope,t.AccessMember=AccessMember,t.AccessKeyed=AccessKeyed,t.CallScope=CallScope,t.CallMember=CallMember,t.Binary=Binary,t.Unary=Unary,t.PrimitiveLiteral=PrimitiveLiteral,t.HtmlLiteral=HtmlLiteral,t.ArrayLiteral=ArrayLiteral,t.ObjectLiteral=ObjectLiteral,t.Template=Template,t.TaggedTemplate=TaggedTemplate,t.ArrayBindingPattern=ArrayBindingPattern,t.ObjectBindingPattern=ObjectBindingPattern,t.BindingIdentifier=BindingIdentifier,t.ForOfStatement=ForOfStatement,t.Interpolation=Interpolation,t.Call=Call,t.connectable=connectable,t.IExpressionParser=IExpressionParser,t.MultiInterpolationBinding=MultiInterpolationBinding,t.Ref=Ref,t.enableArrayObservation=enableArrayObservation,t.disableArrayObservation=function(){for(const t of Et)1==Ht[t].M&&def(Ht,t,Object.assign({},Lt,{value:Zt[t]}))},t.enableMapObservation=enableMapObservation,t.disableMapObservation=function(){for(const t of rs)1==ts[t].M&&us(ts,t,Object.assign({},os,{value:ns[t]}))},t.enableSetObservation=enableSetObservation,t.disableSetObservation=function(){for(const t of ps)1==cs[t].M&&ws(cs,t,Object.assign({},ms,{value:ds[t]}))},t.BindingContext=BindingContext,t.Scope=Scope,t.OverrideContext=OverrideContext,t.collectionObserver=collectionObserver,t.computed=function(t){return function(s,i){(s.computed||(s.computed={}))[i]=t}},t.IDirtyChecker=IDirtyChecker,t.IObserverLocator=IObserverLocator,t.ITargetObserverLocator=ITargetObserverLocator,t.ITargetAccessorLocator=ITargetAccessorLocator,t.getCollectionObserver=getCollectionObserver,t.PrimitiveObserver=PrimitiveObserver,t.PropertyAccessor=PropertyAccessor,t.propertyObserver=propertyObserver,t.ISignaler=ISignaler,t.subscriberCollection=subscriberCollection,t.batchedSubscriberCollection=batchedSubscriberCollection,t.targetObserver=targetObserver,t.bindingBehavior=function(t){return s=>BindingBehaviorResource.zi(t,s)},t.BindingBehaviorResource=BindingBehaviorResource,t.BindingModeBehavior=BindingModeBehavior,t.OneTimeBindingBehavior=OneTimeBindingBehavior,t.ToViewBindingBehavior=ToViewBindingBehavior,t.FromViewBindingBehavior=FromViewBindingBehavior,t.TwoWayBindingBehavior=TwoWayBindingBehavior,t.DebounceBindingBehavior=DebounceBindingBehavior,t.SignalBindingBehavior=SignalBindingBehavior,t.ThrottleBindingBehavior=ThrottleBindingBehavior,t.customAttribute=function(t){return s=>CustomAttributeResource.zi(t,s)},t.CustomAttributeResource=CustomAttributeResource,t.dynamicOptions=function(t){return void 0===t?dt:dt(t)},t.templateController=function(t){return s=>CustomAttributeResource.zi("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s)},t.If=If,t.Else=Else,t.Repeat=Repeat,t.Replaceable=Replaceable,t.With=With,t.containerless=function(t){return void 0===t?bt:bt(t)},t.customElement=function(t){return s=>CustomElementResource.zi(t,s)},t.CustomElementResource=CustomElementResource,t.IProjectorLocator=IProjectorLocator,t.useShadowDOM=function(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:qs;return"function"==typeof t?s(t):s},t.valueConverter=function(t){return s=>ValueConverterResource.zi(t,s)},t.ValueConverterResource=ValueConverterResource,t.ISanitizer=ISanitizer,t.SanitizeValueConverter=SanitizeValueConverter,t.bindable=bindable,t.Aurelia=Aurelia,t.IDOMInitializer=IDOMInitializer,t.RuntimeConfiguration=RuntimeConfiguration,t.buildTemplateDefinition=buildTemplateDefinition,t.isTargetedInstruction=function(value){const type=value.type;return"string"==typeof type&&2===type.length},t.ITargetedInstruction=ITargetedInstruction,t.INode=INode,t.IRenderLocation=IRenderLocation,t.IDOM=IDOM,t.NodeSequence=NodeSequence,t.CallBindingInstruction=class{constructor(from,to){this.type="rh",this.from=from,this.to=to}},t.FromViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.nh,this.oneTime=0,this.to=to}},t.HydrateAttributeInstruction=class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}},t.HydrateElementInstruction=class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}},t.HydrateTemplateController=class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}},t.InterpolationInstruction=class{constructor(from,to){this.type="rf",this.from=from,this.to=to}},t.IteratorBindingInstruction=class{constructor(from,to){this.type="rk",this.from=from,this.to=to}},t.LetBindingInstruction=class{constructor(from,to){this.type="ri",this.from=from,this.to=to}},t.LetElementInstruction=class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}},t.OneTimeBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.oneTime,this.oneTime=1,this.to=to}},t.RefBindingInstruction=class{constructor(from){this.type="rj",this.from=from}},t.SetPropertyInstruction=class{constructor(value,to){this.type="re",this.to=to,this.value=value}},t.ToViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.Ns,this.oneTime=0,this.to=to}},t.TwoWayBindingInstruction=class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=t.BindingMode.jn,this.oneTime=0,this.to=to}},t.AggregateLifecycleTask=AggregateLifecycleTask,t.CompositionCoordinator=CompositionCoordinator,t.ILifecycle=ILifecycle,t.IRenderable=IRenderable,t.IViewFactory=IViewFactory,t.LifecycleTask=LifecycleTask,t.PromiseTask=class{constructor(t,s){this.done=0,this.be=0,this.Ds=s,this.mr=t.then(value=>{if(1!=this.be)return this.done=1,this.Ds(value),value})}ce(){return!this.done}cancel(){this.ce()&&(this.be=1)}le(){return this.mr}},t.stringifyLifecycleFlags=function(s){const i=[];return s&t.LifecycleFlags.Z&&i.push("mustEvaluate"),s&t.LifecycleFlags.Xs&&i.push("isCollectionMutation"),s&t.LifecycleFlags.Ys&&i.push("isInstanceMutation"),s&t.LifecycleFlags.Zs&&i.push("updateTargetObserver"),s&t.LifecycleFlags.K&&i.push("updateTargetInstance"),s&t.LifecycleFlags.Es&&i.push("updateSourceExpression"),s&t.LifecycleFlags.xs&&i.push("fromAsyncFlush"),s&t.LifecycleFlags.Ls&&i.push("fromSyncFlush"),s&t.LifecycleFlags.ti&&i.push("fromStartTask"),s&t.LifecycleFlags.Yt&&i.push("fromStopTask"),s&t.LifecycleFlags.rt&&i.push("fromBind"),s&t.LifecycleFlags.ys&&i.push("fromUnbind"),s&t.LifecycleFlags.Dt&&i.push("fromAttach"),s&t.LifecycleFlags._t&&i.push("fromDetach"),s&t.LifecycleFlags.ss&&i.push("fromCache"),s&t.LifecycleFlags.si&&i.push("fromDOMEvent"),s&t.LifecycleFlags.ii&&i.push("fromObserverSetter"),s&t.LifecycleFlags.hi&&i.push("fromBindableHandler"),s&t.LifecycleFlags.ni&&i.push("fromLifecycleTask"),s&t.LifecycleFlags.Xt&&i.push("parentUnmountQueued"),s&t.LifecycleFlags.ot&&i.push("doNotUpdateDOM"),s&t.LifecycleFlags.ri&&i.push("isTraversingParentScope"),s&t.LifecycleFlags.oi&&i.push("allowParentScopeTraversal"),i.join("|")},t.instructionRenderer=instructionRenderer,t.ensureExpression=ensureExpression,t.addAttachable=addAttachable,t.addBindable=addBindable,t.BasicRenderer=BasicRenderer,t.CompiledTemplate=class{constructor(dom,t,s,i){this.dom=dom,this.rc=t,this.uu=s,this.Bu=i}Ps(t,host,parts){const s=t.$nodes=this.uu.ec();t.$context=this.Bu,this.Bu.Ps(t,s.xo(),this.rc,host,parts)}},t.createRenderContext=createRenderContext,t.IInstructionRenderer=IInstructionRenderer,t.IRenderer=IRenderer,t.IRenderingEngine=IRenderingEngine,t.ITemplateCompiler=ITemplateCompiler,t.ITemplateFactory=ITemplateFactory,Object.defineProperty(t,"oc",{value:1})});
